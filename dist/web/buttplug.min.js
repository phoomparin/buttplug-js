!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["buttplug-commonjs"]=t():e.Buttplug=t()}(window,function(){return function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,__webpack_require__),s.l=!0,s.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)__webpack_require__.d(r,s,function(t){return e[t]}.bind(null,s));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s="./src/index.ts")}({"./dependencies/buttplug-schema/schema/buttplug-schema.json":function(e){e.exports={$schema:"http://json-schema.org/draft-06/schema#",title:"Buttplug Message Schema",version:1,description:"The JSON Protocol format for the Buttplug Protocol.",components:{Id:{description:"User-set id for the message. 0 denotes system message and is reserved.",type:"integer",minimum:0,maximum:4294967295},SystemId:{description:"Used for non-direct-reply messages that can only be sent from server to client, using the reserved system message Id of 0.",type:"integer",minimum:0,maximum:0},DeviceName:{description:"Name of the device",type:"string"},DeviceIndex:{description:"Index used for referencing the device in device messages.",type:"integer",minimum:0},IdMessage:{properties:{Id:{$ref:"#/components/Id"}},additionalProperties:!1,minProperties:1,maxProperties:1,required:["Id"]},DeviceMessages:{description:"A list of the messages a device will accept on this server implementation.",type:"array",items:{type:"string",minItems:1}},DeviceMessagesEx:{description:"A list of the messages a device will accept on this server implementation.",type:"object",items:{description:"A list of the messages attributes.",type:"object",properties:{FeatureCount:{$ref:"#/components/FeatureCount"}},additionalProperties:!0,minItems:1}},SystemIdMessage:{description:"Message sent by the server that is not in direct reply to a message send from the client, and always uses system Id.",properties:{Id:{$ref:"#/components/SystemId"}},additionalProperties:!1,minProperties:1,maxProperties:1,required:["Id"]},DeviceIndexMessage:{properties:{Id:{$ref:"#/components/Id"},DeviceIndex:{$ref:"#/components/DeviceIndex"}},additionalProperties:!1,minProperties:2,maxProperties:2,required:["Id","DeviceIndex"]},FeatureCount:{description:"Number of features on device.",type:"integer",minimum:0}},messages:{Ok:{type:"object",description:"Signifies successful processing of the message indicated by the id.",anyOf:[{$ref:"#/components/IdMessage"}]},Ping:{type:"object",description:"Connection keep-alive message.",anyOf:[{$ref:"#/components/IdMessage"}]},Error:{type:"object",description:"Signifies the server encountered an error while processing the message indicated by the id.",properties:{Id:{$ref:"#/components/Id"},ErrorMessage:{type:"string"},ErrorCode:{type:"number",minimum:0,maximum:4}},additionalProperties:!1,minProperties:3,maxProperties:3,required:["Id","ErrorMessage","ErrorCode"]},Test:{type:"object",description:"Used for connection/application testing. Causes server to echo back the string sent. Sending string of 'Error' will result in a server error. ",properties:{Id:{$ref:"#/components/Id"},TestString:{description:"String to be echo'd back from server. Setting this to 'Error' will cause an error to be thrown.",type:"string"}},minProperties:2,maxProperties:2,additionalProperties:!1,required:["Id","TestString"]},DeviceList:{type:"object",description:"List of all available devices known to the system.",properties:{Id:{$ref:"#/components/Id"},Devices:{description:"Array of device ids and names.",type:"array",items:{type:"object",properties:{DeviceName:{$ref:"#/components/DeviceName"},DeviceIndex:{$ref:"#/components/DeviceIndex"},DeviceMessages:{oneOf:[{$ref:"#/components/DeviceMessages"},{$ref:"#/components/DeviceMessagesEx"}]}},minProperties:3,maxProperties:3,additionalProperties:!1,required:["DeviceName","DeviceIndex","DeviceMessages"]},minItems:0}},minProperties:2,maxProperties:2,additionalProperties:!1,required:["Id","Devices"]},DeviceAdded:{type:"object",description:"Notifies client that a device of a certain type has been added to the server.",properties:{Id:{$ref:"#/components/SystemId"},DeviceName:{$ref:"#/components/DeviceName"},DeviceIndex:{$ref:"#/components/DeviceIndex"},DeviceMessages:{oneOf:[{$ref:"#/components/DeviceMessages"},{$ref:"#/components/DeviceMessagesEx"}]}},minProperties:4,maxProperties:4,additionalProperties:!1,required:["Id","DeviceName","DeviceIndex","DeviceMessages"]},DeviceRemoved:{type:"object",description:"Notifies client that a device of a certain type has been removed from the server.",anyOf:[{$ref:"#/components/DeviceIndexMessage"}]},RequestDeviceList:{type:"object",description:"Request for the server to send a list of devices to the client.",anyOf:[{$ref:"#/components/IdMessage"}]},StartScanning:{type:"object",description:"Request for the server to start scanning for new devices.",anyOf:[{$ref:"#/components/IdMessage"}]},StopScanning:{type:"object",description:"Request for the server to stop scanning for new devices.",anyOf:[{$ref:"#/components/IdMessage"}]},ScanningFinished:{type:"object",description:"Server notification to client that scanning has ended.",anyOf:[{$ref:"#/components/SystemIdMessage"}]},RequestLog:{type:"object",description:"Request for server to stream log messages of a certain level to client.",properties:{Id:{$ref:"#/components/Id"},LogLevel:{description:"Maximum level of log message to receive.",enum:["Off","Fatal","Error","Warn","Info","Debug","Trace"]}},minProperties:2,maxProperties:2,additionalProperties:!1,required:["Id","LogLevel"]},Log:{type:"object",description:"Log message from the server.",properties:{Id:{$ref:"#/components/SystemId"},LogLevel:{description:"Log level of message.",enum:["Off","Fatal","Error","Warn","Info","Debug","Trace"]},LogMessage:{description:"Log message from server.",type:"string"}},minProperties:3,maxProperties:3,additionalProperties:!1,required:["Id","LogLevel","LogMessage"]},RequestServerInfo:{type:"object",description:"Request server version, and relay client name.",properties:{Id:{$ref:"#/components/Id"},ClientName:{description:"Name of the client software.",type:"string"},MessageVersion:{description:"Message template version of the client software.",type:"integer",minimum:0}},minProperties:2,maxProperties:3,additionalProperties:!1,required:["Id","ClientName"]},ServerInfo:{type:"object",description:"Server version information, in Major.Minor.Build format.",properties:{Id:{$ref:"#/components/Id"},ServerName:{description:"Name of the server. Can be 0-length.",type:"string"},MessageVersion:{description:"Message template version of the server software.",type:"integer",minimum:0},MajorVersion:{description:"Major version of server.",type:"integer",minimum:0},MinorVersion:{description:"Minor version of server.",type:"integer",minimum:0},BuildVersion:{description:"Build version of server.",type:"integer",minimum:0},MaxPingTime:{description:"Maximum time (in milliseconds) the server will wait between ping messages from client before shutting down.",type:"integer",minimum:0}},minProperties:7,maxProperties:7,additionalProperties:!1,required:["Id","MajorVersion","MinorVersion","BuildVersion","MessageVersion","MaxPingTime","ServerName"]},FleshlightLaunchFW12Cmd:{type:"object",description:"Sends speed and position command to the Fleshlight Launch Device denoted by the device index.",properties:{Id:{$ref:"#/components/Id"},DeviceIndex:{$ref:"#/components/DeviceIndex"},Speed:{description:"Speed at which to move to designated position.",type:"integer",minimum:0,maximum:99},Position:{description:"Position to which to move Fleshlight.",type:"integer",minimum:0,maximum:99}},minProperties:4,maxProperties:4,additionalProperties:!1,required:["Id","DeviceIndex","Speed","Position"]},LovenseCmd:{type:"object",description:"Sends a command string to a Lovense device. Command string will be verified by sender.",properties:{Id:{$ref:"#/components/Id"},DeviceIndex:{$ref:"#/components/DeviceIndex"},Command:{description:"Command to send to Lovense device.",type:"string"}},minProperties:3,maxProperties:3,additionalProperties:!1,required:["Id","DeviceIndex","Command"]},SingleMotorVibrateCmd:{type:"object",description:"Sends a vibrate command to a device that supports vibration.",properties:{Id:{$ref:"#/components/Id"},DeviceIndex:{$ref:"#/components/DeviceIndex"},Speed:{description:"Device vibration speed (floating point, 0 < x < 1), stepping will be device specific.",type:"number",minimum:0,maximum:1}},minProperties:3,maxProperties:3,additionalProperties:!1,required:["Id","DeviceIndex","Speed"]},RawCmd:{type:"object",description:"Sends a raw byte array to a device. Should only be used for testing/development.",properties:{Id:{$ref:"#/components/Id"},DeviceIndex:{$ref:"#/components/DeviceIndex"},Command:{description:"Raw byte string to send to device.",type:"array",items:{type:"integer",minimum:0,maximum:255,minItems:1}}},minProperties:3,maxProperties:3,additionalProperties:!1,required:["Id","DeviceIndex","Command"]},KiirooCmd:{type:"object",description:"Sends a raw byte string to a Kiiroo Onyx/Pearl device.",properties:{Id:{$ref:"#/components/Id"},DeviceIndex:{$ref:"#/components/DeviceIndex"},Command:{description:"Command to send to Kiiroo device.",type:"string"}},minProperties:3,maxProperties:3,additionalProperties:!1,required:["Id","DeviceIndex","Command"]},VorzeA10CycloneCmd:{type:"object",description:"Sends a raw byte string to a Kiiroo Onyx/Pearl device.",properties:{Id:{$ref:"#/components/Id"},DeviceIndex:{$ref:"#/components/DeviceIndex"},Speed:{description:"Rotation speed command for the Cyclone.",type:"integer",minimum:0,maximum:100},Clockwise:{description:"True for clockwise rotation (in relation to device facing user), false for Counter-clockwise",type:"boolean"}},minProperties:4,maxProperties:4,additionalProperties:!1,required:["Id","DeviceIndex","Speed","Clockwise"]},StopDeviceCmd:{type:"object",description:"Stops the all actions currently being taken by a device.",properties:{Id:{$ref:"#/components/Id"},DeviceIndex:{$ref:"#/components/DeviceIndex"}},minProperties:2,maxProperties:2,additionalProperties:!1,required:["Id","DeviceIndex"]},StopAllDevices:{type:"object",description:"Stops all actions currently being taken by all connected devices.",anyOf:[{$ref:"#/components/IdMessage"}]},VibrateCmd:{type:"object",description:"Sends a vibrate command to a device that supports vibration.",properties:{Id:{$ref:"#/components/Id"},DeviceIndex:{$ref:"#/components/DeviceIndex"},Speeds:{description:"Device vibration speeds (floating point, 0 < x < 1) keyed on vibrator number, stepping will be device specific.",type:"array",items:{type:"object",properties:{Index:{description:"Vibrator number.",type:"integer",minimum:0},Speed:{description:"Vibration speed (floating point, 0 < x < 1), stepping will be device specific.",type:"number",minimum:0,maximum:1}},minProperties:2,maxProperties:2,additionalProperties:!1,required:["Index","Speed"]},minItems:1}},minProperties:3,maxProperties:3,additionalProperties:!1,required:["Id","DeviceIndex","Speeds"]},RotateCmd:{type:"object",description:"Sends a rotate command to a device that supports rotation.",properties:{Id:{$ref:"#/components/Id"},DeviceIndex:{$ref:"#/components/DeviceIndex"},Rotations:{description:"Device rotation speeds (floating point, 0 < x < 1) keyed on rotator number, stepping will be device specific.",type:"array",items:{type:"object",properties:{Index:{description:"Rotator number.",type:"integer",minimum:0},Speed:{description:"Rotation speed (floating point, 0 < x < 1), stepping will be device specific.",type:"number",minimum:0,maximum:1},Clockwise:{description:"Rotation direction (boolean). Not all devices have a concept of actual clockwise.",type:"boolean"}},minProperties:3,maxProperties:3,additionalProperties:!1,required:["Index","Speed","Clockwise"]},minItems:1}},minProperties:3,maxProperties:3,additionalProperties:!1,required:["Id","DeviceIndex","Rotations"]},LinearCmd:{type:"object",description:"Sends a linear movement command to a device that supports linear movements.",properties:{Id:{$ref:"#/components/Id"},DeviceIndex:{$ref:"#/components/DeviceIndex"},Vectors:{description:"Device linear movement times (milliseconds) and positions (floating point, 0 < x < 1) keyed on linear actuator number, stepping will be device specific.",type:"array",items:{type:"object",properties:{Index:{description:"Linear actuator number.",type:"integer",minimum:0},Duration:{description:"Linear movement time in milliseconds.",type:"number",minimum:0},Position:{description:"Linear movement position (floating point, 0 < x < 1), stepping will be device specific.",type:"number",minimum:0,maximum:1}},minProperties:3,maxProperties:3,additionalProperties:!1,required:["Index","Duration","Position"]}}},minProperties:3,maxProperties:3,additionalProperties:!1,required:["Id","DeviceIndex","Vectors"]}},type:"array",items:{title:"Messages",description:"One or more messages validated by the Buttplug Message schema list.",properties:{Ok:{$ref:"#/messages/Ok"},Error:{$ref:"#/messages/Error"},Ping:{$ref:"#/messages/Ping"},Test:{$ref:"#/messages/Test"},DeviceList:{$ref:"#/messages/DeviceList"},DeviceAdded:{$ref:"#/messages/DeviceAdded"},DeviceRemoved:{$ref:"#/messages/DeviceRemoved"},RequestDeviceList:{$ref:"#/messages/RequestDeviceList"},StopDeviceCmd:{$ref:"#/messages/StopDeviceCmd"},StopAllDevices:{$ref:"#/messages/StopAllDevices"},StartScanning:{$ref:"#/messages/StartScanning"},StopScanning:{$ref:"#/messages/StopScanning"},ScanningFinished:{$ref:"#/messages/ScanningFinished"},RequestLog:{$ref:"#/messages/RequestLog"},Log:{$ref:"#/messages/Log"},RequestServerInfo:{$ref:"#/messages/RequestServerInfo"},ServerInfo:{$ref:"#/messages/ServerInfo"},FleshlightLaunchFW12Cmd:{$ref:"#/messages/FleshlightLaunchFW12Cmd"},LovenseCmd:{$ref:"#/messages/LovenseCmd"},SingleMotorVibrateCmd:{$ref:"#/messages/SingleMotorVibrateCmd"},KiirooCmd:{$ref:"#/messages/KiirooCmd"},RawCmd:{$ref:"#/messages/RawCmd"},VorzeA10CycloneCmd:{$ref:"#/messages/VorzeA10CycloneCmd"},VibrateCmd:{$ref:"#/messages/VibrateCmd"},RotateCmd:{$ref:"#/messages/RotateCmd"},LinearCmd:{$ref:"#/messages/LinearCmd"}},additionalProperties:!1,minProperties:1,maxProperties:1},minItems:1,additionalProperties:!1}},"./node_modules/ajv/lib/ajv.js":function(e,t,r){"use strict";var s=r("./node_modules/ajv/lib/compile/index.js"),o=r("./node_modules/ajv/lib/compile/resolve.js"),a=r("./node_modules/ajv/lib/cache.js"),i=r("./node_modules/ajv/lib/compile/schema_obj.js"),n=r("./node_modules/fast-json-stable-stringify/index.js"),c=r("./node_modules/ajv/lib/compile/formats.js"),u=r("./node_modules/ajv/lib/compile/rules.js"),l=r("./node_modules/ajv/lib/data.js"),d=r("./node_modules/ajv/lib/compile/util.js");e.exports=Ajv,Ajv.prototype.validate=function validate(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var s=this._addSchema(e);r=s.validate||this._compile(s)}var o=r(t);!0!==r.$async&&(this.errors=r.errors);return o},Ajv.prototype.compile=function compile(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},Ajv.prototype.addSchema=function addSchema(e,t,r,s){if(Array.isArray(e)){for(var a=0;a<e.length;a++)this.addSchema(e[a],void 0,r,s);return this}var i=this._getId(e);if(void 0!==i&&"string"!=typeof i)throw new Error("schema id must be string");return checkUnique(this,t=o.normalizeId(t||i)),this._schemas[t]=this._addSchema(e,r,s,!0),this},Ajv.prototype.addMetaSchema=function addMetaSchema(e,t,r){return this.addSchema(e,t,r,!0),this},Ajv.prototype.validateSchema=function validateSchema(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function defaultMeta(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(p)?p:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var s,o=this._formats.uri;this._formats.uri="function"==typeof o?this._schemaUriFormatFunc:this._schemaUriFormat;try{s=this.validate(r,e)}finally{this._formats.uri=o}if(!s&&t){var a="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(a);this.logger.error(a)}return s},Ajv.prototype.getSchema=function getSchema(e){var t=_getSchemaObj(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function _getSchemaFragment(e,t){var r=o.schema.call(e,{schema:{}},t);if(r){var a=r.schema,n=r.root,c=r.baseId,u=s.call(e,a,n,void 0,c);return e._fragments[t]=new i({ref:t,fragment:!0,schema:a,root:n,baseId:c,validate:u}),u}}(this,e)}},Ajv.prototype.removeSchema=function removeSchema(e){if(e instanceof RegExp)return _removeAllSchemas(this,this._schemas,e),_removeAllSchemas(this,this._refs,e),this;switch(typeof e){case"undefined":return _removeAllSchemas(this,this._schemas),_removeAllSchemas(this,this._refs),this._cache.clear(),this;case"string":var t=_getSchemaObj(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,s=r?r(e):e;this._cache.del(s);var a=this._getId(e);a&&(a=o.normalizeId(a),delete this._schemas[a],delete this._refs[a])}return this},Ajv.prototype.addFormat=function addFormat(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},Ajv.prototype.errorsText=function errorsText(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,s=void 0===t.dataVar?"data":t.dataVar,o="",a=0;a<e.length;a++){var i=e[a];i&&(o+=s+i.dataPath+" "+i.message+r)}return o.slice(0,-r.length)},Ajv.prototype._addSchema=function _addSchema(e,t,r,s){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var a=this._opts.serialize,n=a?a(e):e,c=this._cache.get(n);if(c)return c;s=s||!1!==this._opts.addUsedSchema;var u=o.normalizeId(this._getId(e));u&&s&&checkUnique(this,u);var l,d=!1!==this._opts.validateSchema&&!t;d&&!(l=u&&u==o.normalizeId(e.$schema))&&this.validateSchema(e,!0);var h=o.ids.call(this,e),f=new i({id:u,schema:e,localRefs:h,cacheKey:n,meta:r});"#"!=u[0]&&s&&(this._refs[u]=f);this._cache.put(n,f),d&&l&&this.validateSchema(e,!0);return f},Ajv.prototype._compile=function _compile(e,t){if(e.compiling)return e.validate=callValidate,callValidate.schema=e.schema,callValidate.errors=null,callValidate.root=t||callValidate,!0===e.schema.$async&&(callValidate.$async=!0),callValidate;var r,o;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{o=s.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=o,e.refs=o.refs,e.refVal=o.refVal,e.root=o.root,o;function callValidate(){var t=e.validate,r=t.apply(this,arguments);return callValidate.errors=t.errors,r}},Ajv.prototype.compileAsync=r("./node_modules/ajv/lib/compile/async.js");var h=r("./node_modules/ajv/lib/keyword.js");Ajv.prototype.addKeyword=h.add,Ajv.prototype.getKeyword=h.get,Ajv.prototype.removeKeyword=h.remove;var f=r("./node_modules/ajv/lib/compile/error_classes.js");Ajv.ValidationError=f.Validation,Ajv.MissingRefError=f.MissingRef,Ajv.$dataMetaSchema=l;var p="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes"],v=["/properties"];function Ajv(e){if(!(this instanceof Ajv))return new Ajv(e);e=this._opts=d.copy(e)||{},function setLogger(e){var t=e._opts.logger;if(!1===t)e.logger={log:noop,warn:noop,error:noop};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format);var t=this._schemaUriFormat=this._formats["uri-reference"];this._schemaUriFormatFunc=function(e){return t.test(e)},this._cache=e.cache||new a,this._loadingSchemas={},this._compilations=[],this.RULES=u(),this._getId=function chooseGetId(e){switch(e.schemaId){case"auto":return _get$IdOrId;case"id":return _getId;default:return _get$Id}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=n),this._metaOpts=function getMetaSchemaOptions(e){for(var t=d.copy(e._opts),r=0;r<m.length;r++)delete t[m[r]];return t}(this),e.formats&&function addInitialFormats(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),function addDefaultMetaSchema(e){var t;e._opts.$data&&(t=r("./node_modules/ajv/lib/refs/data.json"),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var s=r("./node_modules/ajv/lib/refs/json-schema-draft-07.json");e._opts.$data&&(s=l(s,v));e.addMetaSchema(s,p,!0),e._refs["http://json-schema.org/schema"]=p}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{const:!0}}),function addInitialSchemas(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function _getSchemaObj(e,t){return t=o.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function _removeAllSchemas(e,t,r){for(var s in t){var o=t[s];o.meta||r&&!r.test(s)||(e._cache.del(o.cacheKey),delete t[s])}}function _getId(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function _get$Id(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function _get$IdOrId(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function checkUnique(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function noop(){}},"./node_modules/ajv/lib/cache.js":function(e,t,r){"use strict";var s=e.exports=function Cache(){this._cache={}};s.prototype.put=function Cache_put(e,t){this._cache[e]=t},s.prototype.get=function Cache_get(e){return this._cache[e]},s.prototype.del=function Cache_del(e){delete this._cache[e]},s.prototype.clear=function Cache_clear(){this._cache={}}},"./node_modules/ajv/lib/compile/async.js":function(e,t,r){"use strict";var s=r("./node_modules/ajv/lib/compile/error_classes.js").MissingRef;e.exports=function compileAsync(e,t,r){var o=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof t&&(r=t,t=void 0);var a=loadMetaSchemaOf(e).then(function(){var r=o._addSchema(e,void 0,t);return r.validate||function _compileAsync(e){try{return o._compile(e)}catch(r){if(r instanceof s)return function loadMissingSchema(r){var a=r.missingSchema;if(added(a))throw new Error("Schema "+a+" is loaded but "+r.missingRef+" cannot be resolved");var i=o._loadingSchemas[a];i||(i=o._loadingSchemas[a]=o._opts.loadSchema(a)).then(removePromise,removePromise);return i.then(function(e){if(!added(a))return loadMetaSchemaOf(e).then(function(){added(a)||o.addSchema(e,a,void 0,t)})}).then(function(){return function _compileAsync(e){try{return o._compile(e)}catch(e){if(e instanceof s)return loadMissingSchema(e);throw e}function loadMissingSchema(r){var s=r.missingSchema;if(added(s))throw new Error("Schema "+s+" is loaded but "+r.missingRef+" cannot be resolved");var a=o._loadingSchemas[s];return a||(a=o._loadingSchemas[s]=o._opts.loadSchema(s)).then(removePromise,removePromise),a.then(function(e){if(!added(s))return loadMetaSchemaOf(e).then(function(){added(s)||o.addSchema(e,s,void 0,t)})}).then(function(){return _compileAsync(e)});function removePromise(){delete o._loadingSchemas[s]}function added(e){return o._refs[e]||o._schemas[e]}}}(e)});function removePromise(){delete o._loadingSchemas[a]}function added(e){return o._refs[e]||o._schemas[e]}}(r);throw r}function loadMissingSchema(r){var s=r.missingSchema;if(added(s))throw new Error("Schema "+s+" is loaded but "+r.missingRef+" cannot be resolved");var a=o._loadingSchemas[s];return a||(a=o._loadingSchemas[s]=o._opts.loadSchema(s)).then(removePromise,removePromise),a.then(function(e){if(!added(s))return loadMetaSchemaOf(e).then(function(){added(s)||o.addSchema(e,s,void 0,t)})}).then(function(){return _compileAsync(e)});function removePromise(){delete o._loadingSchemas[s]}function added(e){return o._refs[e]||o._schemas[e]}}}(r)});r&&a.then(function(e){r(null,e)},r);return a;function loadMetaSchemaOf(e){var t=e.$schema;return t&&!o.getSchema(t)?compileAsync.call(o,{$ref:t},!0):Promise.resolve()}}},"./node_modules/ajv/lib/compile/error_classes.js":function(e,t,r){"use strict";var s=r("./node_modules/ajv/lib/compile/resolve.js");function MissingRefError(e,t,r){this.message=r||MissingRefError.message(e,t),this.missingRef=s.url(e,t),this.missingSchema=s.normalizeId(s.fullPath(this.missingRef))}function errorSubclass(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:errorSubclass(function ValidationError(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}),MissingRef:errorSubclass(MissingRefError)},MissingRefError.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},"./node_modules/ajv/lib/compile/formats.js":function(e,t,r){"use strict";var s=r("./node_modules/ajv/lib/compile/util.js"),o=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,a=[0,31,28,31,30,31,30,31,31,30,31,30,31],i=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,n=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,u=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#.\/;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,l=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,d=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,h=/^(?:\/(?:[^~\/]|~0|~1)*)*$/,f=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,p=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~\/]|~0|~1)*)*)$/;function formats(e){return e="full"==e?"full":"fast",s.copy(formats[e])}function date(e){var t=e.match(o);if(!t)return!1;var r=+t[1],s=+t[2],i=+t[3];return s>=1&&s<=12&&i>=1&&i<=(2==s&&function isLeapYear(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:a[s])}function time(e,t){var r=e.match(i);if(!r)return!1;var s=r[1],o=r[2],a=r[3],n=r[5];return(s<=23&&o<=59&&a<=59||23==s&&59==o&&60==a)&&(!t||n)}e.exports=formats,formats.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":u,url:l,email:/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:n,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex,uuid:d,"json-pointer":h,"json-pointer-uri-fragment":f,"relative-json-pointer":p},formats.full={date:date,time:time,"date-time":function date_time(e){var t=e.split(m);return 2==t.length&&date(t[0])&&time(t[1],!0)},uri:function uri(e){return v.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,"uri-template":u,url:l,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function hostname(e){return e.length<=255&&n.test(e)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex,uuid:d,"json-pointer":h,"json-pointer-uri-fragment":f,"relative-json-pointer":p};var m=/t|\s/i;var v=/\/|:/;var g=/[^\\]\\Z/;function regex(e){if(g.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},"./node_modules/ajv/lib/compile/index.js":function(e,t,r){"use strict";var s=r("./node_modules/ajv/lib/compile/resolve.js"),o=r("./node_modules/ajv/lib/compile/util.js"),a=r("./node_modules/ajv/lib/compile/error_classes.js"),i=r("./node_modules/fast-json-stable-stringify/index.js"),n=r("./node_modules/ajv/lib/dotjs/validate.js"),c=o.ucs2length,u=r("./node_modules/ajv/node_modules/fast-deep-equal/index.js"),l=a.Validation;function compIndex(e,t,r){for(var s=0;s<this._compilations.length;s++){var o=this._compilations[s];if(o.schema==e&&o.root==t&&o.baseId==r)return s}return-1}function patternCode(e,t){return"var pattern"+e+" = new RegExp("+o.toQuotedString(t[e])+");"}function defaultCode(e){return"var default"+e+" = defaults["+e+"];"}function refValCode(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function customRuleCode(e){return"var customRule"+e+" = customRules["+e+"];"}function vars(e,t){if(!e.length)return"";for(var r="",s=0;s<e.length;s++)r+=t(s,e);return r}e.exports=function compile(e,t,r,d){var h=this,f=this._opts,p=[void 0],m={},v=[],g={},y=[],_={},b=[];t=t||{schema:e,refVal:p,refs:m};var S=function checkCompiling(e,t,r){var s=compIndex.call(this,e,t,r);return s>=0?{index:s,compiling:!0}:(s=this._compilations.length,this._compilations[s]={schema:e,root:t,baseId:r},{index:s,compiling:!1})}.call(this,e,t,d);var E=this._compilations[S.index];if(S.compiling)return E.callValidate=function callValidate(){var e=E.validate;var t=e.apply(this,arguments);callValidate.errors=e.errors;return t};var w=this._formats;var P=this.RULES;try{var x=localCompile(e,t,r,d);E.validate=x;var C=E.callValidate;return C&&(C.schema=x.schema,C.errors=null,C.refs=x.refs,C.refVal=x.refVal,C.root=x.root,C.$async=x.$async,f.sourceCode&&(C.source=x.source)),x}finally{(function endCompiling(e,t,r){var s=compIndex.call(this,e,t,r);s>=0&&this._compilations.splice(s,1)}).call(this,e,t,d)}function localCompile(e,r,i,d){var g=!r||r&&r.schema==e;if(r.schema!=t.schema)return compile.call(h,e,r,i,d);var _,S=!0===e.$async,E=n({isTop:!0,schema:e,isRoot:g,baseId:d,root:r,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:a.MissingRef,RULES:P,validate:n,util:o,resolve:s,resolveRef:resolveRef,usePattern:usePattern,useDefault:useDefault,useCustomRule:useCustomRule,opts:f,formats:w,logger:h.logger,self:h});E=vars(p,refValCode)+vars(v,patternCode)+vars(y,defaultCode)+vars(b,customRuleCode)+E,f.processCode&&(E=f.processCode(E));try{var x=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",E);_=x(h,P,w,t,p,y,b,u,c,l),p[0]=_}catch(e){throw h.logger.error("Error compiling schema, function code:",E),e}return _.schema=e,_.errors=null,_.refs=m,_.refVal=p,_.root=g?_:r,S&&(_.$async=!0),!0===f.sourceCode&&(_.source={code:E,patterns:v,defaults:y}),_}function resolveRef(e,o,a){o=s.url(e,o);var i,n,c=m[o];if(void 0!==c)return resolvedRef(i=p[c],n="refVal["+c+"]");if(!a&&t.refs){var u=t.refs[o];if(void 0!==u)return i=t.refVal[u],n=addLocalRef(o,i),resolvedRef(i,n)}n=addLocalRef(o);var l=s.call(h,localCompile,t,o);if(void 0===l){var d=r&&r[o];d&&(l=s.inlineRef(d,f.inlineRefs)?d:compile.call(h,d,t,r,e))}if(void 0!==l)return function replaceLocalRef(e,t){var r=m[e];p[r]=t}(o,l),resolvedRef(l,n);!function removeLocalRef(e){delete m[e]}(o)}function addLocalRef(e,t){var r=p.length;return p[r]=t,m[e]=r,"refVal"+r}function resolvedRef(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function usePattern(e){var t=g[e];return void 0===t&&(t=g[e]=v.length,v[t]=e),"pattern"+t}function useDefault(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return o.toQuotedString(e);case"object":if(null===e)return"null";var t=i(e),r=_[t];return void 0===r&&(r=_[t]=y.length,y[r]=e),"default"+r}}function useCustomRule(e,t,r,s){var o=e.definition.validateSchema;if(o&&!1!==h._opts.validateSchema){var a=o(t);if(!a){var i="keyword schema is invalid: "+h.errorsText(o.errors);if("log"!=h._opts.validateSchema)throw new Error(i);h.logger.error(i)}}var n,c=e.definition.compile,u=e.definition.inline,l=e.definition.macro;if(c)n=c.call(h,t,r,s);else if(l)n=l.call(h,t,r,s),!1!==f.validateSchema&&h.validateSchema(n,!0);else if(u)n=u.call(h,s,e.keyword,t,r);else if(!(n=e.definition.validate))return;if(void 0===n)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var d=b.length;return b[d]=n,{code:"customRule"+d,validate:n}}}},"./node_modules/ajv/lib/compile/resolve.js":function(e,t,r){"use strict";var s=r("./node_modules/uri-js/dist/es5/uri.all.js"),o=r("./node_modules/ajv/node_modules/fast-deep-equal/index.js"),a=r("./node_modules/ajv/lib/compile/util.js"),i=r("./node_modules/ajv/lib/compile/schema_obj.js"),n=r("./node_modules/ajv/node_modules/json-schema-traverse/index.js");function resolve(e,t,r){var s=this._refs[r];if("string"==typeof s){if(!this._refs[s])return resolve.call(this,e,t,s);s=this._refs[s]}if((s=s||this._schemas[r])instanceof i)return inlineRef(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var o,a,n,c=resolveSchema.call(this,t,r);return c&&(o=c.schema,t=c.root,n=c.baseId),o instanceof i?a=o.validate||e.call(this,o.schema,t,void 0,n):void 0!==o&&(a=inlineRef(o,this._opts.inlineRefs)?o:e.call(this,o,t,void 0,n)),a}function resolveSchema(e,t){var r=s.parse(t),o=_getFullPath(r),a=getFullPath(this._getId(e.schema));if(0===Object.keys(e.schema).length||o!==a){var n=normalizeId(o),c=this._refs[n];if("string"==typeof c)return function resolveRecursive(e,t,r){var s=resolveSchema.call(this,e,t);if(s){var o=s.schema,a=s.baseId;e=s.root;var i=this._getId(o);return i&&(a=resolveUrl(a,i)),getJsonPointer.call(this,r,a,o,e)}}.call(this,e,c,r);if(c instanceof i)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[n])instanceof i))return;if(c.validate||this._compile(c),n==normalizeId(t))return{schema:c,root:e,baseId:a};e=c}if(!e.schema)return;a=getFullPath(this._getId(e.schema))}return getJsonPointer.call(this,r,a,e.schema,e)}e.exports=resolve,resolve.normalizeId=normalizeId,resolve.fullPath=getFullPath,resolve.url=resolveUrl,resolve.ids=function resolveIds(e){var t=normalizeId(this._getId(e)),r={"":t},i={"":getFullPath(t,!1)},c={},u=this;return n(e,{allKeys:!0},function(e,t,n,l,d,h,f){if(""!==t){var p=u._getId(e),m=r[l],v=i[l]+"/"+d;if(void 0!==f&&(v+="/"+("number"==typeof f?f:a.escapeFragment(f))),"string"==typeof p){p=m=normalizeId(m?s.resolve(m,p):p);var g=u._refs[p];if("string"==typeof g&&(g=u._refs[g]),g&&g.schema){if(!o(e,g.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=normalizeId(v))if("#"==p[0]){if(c[p]&&!o(e,c[p]))throw new Error('id "'+p+'" resolves to more than one schema');c[p]=e}else u._refs[p]=v}r[t]=m,i[t]=v}}),c},resolve.inlineRef=inlineRef,resolve.schema=resolveSchema;var c=a.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(e,t,r,s){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var o=e.fragment.split("/"),i=1;i<o.length;i++){var n=o[i];if(n){if(void 0===(r=r[n=a.unescapeFragment(n)]))break;var u;if(!c[n]&&((u=this._getId(r))&&(t=resolveUrl(t,u)),r.$ref)){var l=resolveUrl(t,r.$ref),d=resolveSchema.call(this,s,l);d&&(r=d.schema,s=d.root,t=d.baseId)}}}return void 0!==r&&r!==s.schema?{schema:r,root:s,baseId:t}:void 0}}var u=a.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function inlineRef(e,t){return!1!==t&&(void 0===t||!0===t?function checkNoRef(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&!checkNoRef(t))return!1}else for(var s in e){if("$ref"==s)return!1;if("object"==typeof(t=e[s])&&!checkNoRef(t))return!1}return!0}(e):t?function countKeys(e){var t,r=0;if(Array.isArray(e)){for(var s=0;s<e.length;s++)if("object"==typeof(t=e[s])&&(r+=countKeys(t)),r==1/0)return 1/0}else for(var o in e){if("$ref"==o)return 1/0;if(u[o])r++;else if("object"==typeof(t=e[o])&&(r+=countKeys(t)+1),r==1/0)return 1/0}return r}(e)<=t:void 0)}function getFullPath(e,t){return!1!==t&&(e=normalizeId(e)),_getFullPath(s.parse(e))}function _getFullPath(e){return s.serialize(e).split("#")[0]+"#"}var l=/#\/?$/;function normalizeId(e){return e?e.replace(l,""):""}function resolveUrl(e,t){return t=normalizeId(t),s.resolve(e,t)}},"./node_modules/ajv/lib/compile/rules.js":function(e,t,r){"use strict";var s=r("./node_modules/ajv/lib/dotjs/index.js"),o=r("./node_modules/ajv/lib/compile/util.js").toHash;e.exports=function rules(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=o(t),e.types=o(["number","integer","string","array","object","boolean","null"]),e.forEach(function(r){r.rules=r.rules.map(function(r){var o;if("object"==typeof r){var a=Object.keys(r)[0];o=r[a],r=a,o.forEach(function(r){t.push(r),e.all[r]=!0})}return t.push(r),e.all[r]={keyword:r,code:s[r],implements:o}}),e.all.$comment={keyword:"$comment",code:s.$comment},r.type&&(e.types[r.type]=r)}),e.keywords=o(t.concat(["$schema","$id","id","$data","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},"./node_modules/ajv/lib/compile/schema_obj.js":function(e,t,r){"use strict";var s=r("./node_modules/ajv/lib/compile/util.js");e.exports=function SchemaObject(e){s.copy(e,this)}},"./node_modules/ajv/lib/compile/ucs2length.js":function(e,t,r){"use strict";e.exports=function ucs2length(e){for(var t,r=0,s=e.length,o=0;o<s;)r++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<s&&56320==(64512&(t=e.charCodeAt(o)))&&o++;return r}},"./node_modules/ajv/lib/compile/util.js":function(e,t,r){"use strict";function checkDataType(e,t,r){var s=r?" !== ":" === ",o=r?" || ":" && ",a=r?"!":"",i=r?"":"!";switch(e){case"null":return t+s+"null";case"array":return a+"Array.isArray("+t+")";case"object":return"("+a+t+o+"typeof "+t+s+'"object"'+o+i+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+s+'"number"'+o+i+"("+t+" % 1)"+o+t+s+t+")";default:return"typeof "+t+s+'"'+e+'"'}}e.exports={copy:function copy(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:checkDataType,checkDataTypes:function checkDataTypes(e,t){switch(e.length){case 1:return checkDataType(e[0],t,!0);default:var r="",s=toHash(e);for(var o in s.array&&s.object&&(r=s.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete s.null,delete s.array,delete s.object),s.number&&delete s.integer,s)r+=(r?" && ":"")+checkDataType(o,t,!0);return r}},coerceToTypes:function coerceToTypes(e,t){if(Array.isArray(t)){for(var r=[],o=0;o<t.length;o++){var a=t[o];s[a]?r[r.length]=a:"array"===e&&"array"===a&&(r[r.length]=a)}if(r.length)return r}else{if(s[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:toHash,getProperty:getProperty,escapeQuotes:escapeQuotes,equal:r("./node_modules/ajv/node_modules/fast-deep-equal/index.js"),ucs2length:r("./node_modules/ajv/lib/compile/ucs2length.js"),varOccurences:function varOccurences(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function varReplace(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function cleanUpCode(e){return e.replace(i,"").replace(n,"").replace(c,"if (!($1))")},finalCleanUpCode:function finalCleanUpCode(e,t){var r=e.match(u);r&&2==r.length&&(e=t?e.replace(d,"").replace(p,m):e.replace(l,"").replace(h,f));return(r=e.match(v))&&3===r.length?e.replace(g,""):e},schemaHasRules:function schemaHasRules(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function schemaHasRulesExcept(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var s in e)if(s!=r&&t[s])return!0},toQuotedString:toQuotedString,getPathExpr:function getPathExpr(e,t,r,s){return joinPaths(e,r?"'/' + "+t+(s?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):s?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function getPath(e,t,r){var s=toQuotedString(r?"/"+escapeJsonPointer(t):getProperty(t));return joinPaths(e,s)},getData:function getData(e,t,r){var s,o,a,i;if(""===e)return"rootData";if("/"==e[0]){if(!y.test(e))throw new Error("Invalid JSON-pointer: "+e);o=e,a="rootData"}else{if(!(i=e.match(_)))throw new Error("Invalid JSON-pointer: "+e);if(s=+i[1],"#"==(o=i[2])){if(s>=t)throw new Error("Cannot access property/index "+s+" levels up, current level is "+t);return r[t-s]}if(s>t)throw new Error("Cannot access data "+s+" levels up, current level is "+t);if(a="data"+(t-s||""),!o)return a}for(var n=a,c=o.split("/"),u=0;u<c.length;u++){var l=c[u];l&&(a+=getProperty(unescapeJsonPointer(l)),n+=" && "+a)}return n},unescapeFragment:function unescapeFragment(e){return unescapeJsonPointer(decodeURIComponent(e))},unescapeJsonPointer:unescapeJsonPointer,escapeFragment:function escapeFragment(e){return encodeURIComponent(escapeJsonPointer(e))},escapeJsonPointer:escapeJsonPointer};var s=toHash(["string","number","integer","boolean","null"]);function toHash(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var o=/^[a-z$_][a-z$_0-9]*$/i,a=/'|\\/g;function getProperty(e){return"number"==typeof e?"["+e+"]":o.test(e)?"."+e:"['"+escapeQuotes(e)+"']"}function escapeQuotes(e){return e.replace(a,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var i=/else\s*{\s*}/g,n=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,c=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var u=/[^v.]errors/g,l=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,d=/var errors = 0;|var vErrors = null;/g,h="return errors === 0;",f="validate.errors = null; return true;",p=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,m="return data;",v=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,g=/if \(rootData === undefined\) rootData = data;/;function toQuotedString(e){return"'"+escapeQuotes(e)+"'"}var y=/^\/(?:[^~]|~0|~1)*$/,_=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function joinPaths(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function escapeJsonPointer(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapeJsonPointer(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},"./node_modules/ajv/lib/data.js":function(e,t,r){"use strict";var s=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var o,a=t[r].split("/"),i=e;for(o=1;o<a.length;o++)i=i[a[o]];for(o=0;o<s.length;o++){var n=s[o],c=i[n];c&&(i[n]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return e}},"./node_modules/ajv/lib/dotjs/_limit.js":function(e,t,r){"use strict";e.exports=function generate__limit(e,t,r){var s,o=" ",a=e.level,i=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(i||""),h=e.opts.$data&&n&&n.$data;h?(o+=" var schema"+a+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",s="schema"+a):s=n;var f="maximum"==t,p=f?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[p],v=e.opts.$data&&m&&m.$data,g=f?"<":">",y=f?">":"<",_=void 0;if(v){var b=e.util.getData(m.$data,i,e.dataPathArr),S="exclusive"+a,E="exclType"+a,w="exclIsNumber"+a,P="' + "+(I="op"+a)+" + '";o+=" var schemaExcl"+a+" = "+b+"; ",o+=" var "+S+"; var "+E+" = typeof "+(b="schemaExcl"+a)+"; if ("+E+" != 'boolean' && "+E+" != 'undefined' && "+E+" != 'number') { ";var x;_=p;(x=x||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(_||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var C=o;o=x.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+C+"]); ":o+=" validate.errors = ["+C+"]; return false; ":o+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else if ( ",h&&(o+=" ("+s+" !== undefined && typeof "+s+" != 'number') || "),o+=" "+E+" == 'number' ? ( ("+S+" = "+s+" === undefined || "+b+" "+g+"= "+s+") ? "+d+" "+y+"= "+b+" : "+d+" "+y+" "+s+" ) : ( ("+S+" = "+b+" === true) ? "+d+" "+y+"= "+s+" : "+d+" "+y+" "+s+" ) || "+d+" !== "+d+") { var op"+a+" = "+S+" ? '"+g+"' : '"+g+"='; ",void 0===n&&(_=p,u=e.errSchemaPath+"/"+p,s=b,h=v)}else{P=g;if((w="number"==typeof m)&&h){var I="'"+P+"'";o+=" if ( ",h&&(o+=" ("+s+" !== undefined && typeof "+s+" != 'number') || "),o+=" ( "+s+" === undefined || "+m+" "+g+"= "+s+" ? "+d+" "+y+"= "+m+" : "+d+" "+y+" "+s+" ) || "+d+" !== "+d+") { "}else{w&&void 0===n?(S=!0,_=p,u=e.errSchemaPath+"/"+p,s=m,y+="="):(w&&(s=Math[f?"min":"max"](m,n)),m===(!w||s)?(S=!0,_=p,u=e.errSchemaPath+"/"+p,y+="="):(S=!1,P+="="));I="'"+P+"'";o+=" if ( ",h&&(o+=" ("+s+" !== undefined && typeof "+s+" != 'number') || "),o+=" "+d+" "+y+" "+s+" || "+d+" !== "+d+") { "}}_=_||t,(x=x||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(_||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+I+", limit: "+s+", exclusive: "+S+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be "+P+" ",o+=h?"' + "+s:s+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+n,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";C=o;return o=x.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+C+"]); ":o+=" validate.errors = ["+C+"]; return false; ":o+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",l&&(o+=" else { "),o}},"./node_modules/ajv/lib/dotjs/_limitItems.js":function(e,t,r){"use strict";e.exports=function generate__limitItems(e,t,r){var s,o=" ",a=e.level,i=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(i||""),h=e.opts.$data&&n&&n.$data;h?(o+=" var schema"+a+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",s="schema"+a):s=n,o+="if ( ",h&&(o+=" ("+s+" !== undefined && typeof "+s+" != 'number') || "),o+=" "+d+".length "+("maxItems"==t?">":"<")+" "+s+") { ";var f=t,p=p||[];p.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(f||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+s+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxItems"==t?"more":"fewer",o+=" than ",o+=h?"' + "+s+" + '":""+n,o+=" items' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+n,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var m=o;return o=p.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",l&&(o+=" else { "),o}},"./node_modules/ajv/lib/dotjs/_limitLength.js":function(e,t,r){"use strict";e.exports=function generate__limitLength(e,t,r){var s,o=" ",a=e.level,i=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(i||""),h=e.opts.$data&&n&&n.$data;h?(o+=" var schema"+a+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",s="schema"+a):s=n;var f="maxLength"==t?">":"<";o+="if ( ",h&&(o+=" ("+s+" !== undefined && typeof "+s+" != 'number') || "),!1===e.opts.unicode?o+=" "+d+".length ":o+=" ucs2length("+d+") ",o+=" "+f+" "+s+") { ";var p=t,m=m||[];m.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+s+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT be ",o+="maxLength"==t?"longer":"shorter",o+=" than ",o+=h?"' + "+s+" + '":""+n,o+=" characters' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+n,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var v=o;return o=m.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+v+"]); ":o+=" validate.errors = ["+v+"]; return false; ":o+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",l&&(o+=" else { "),o}},"./node_modules/ajv/lib/dotjs/_limitProperties.js":function(e,t,r){"use strict";e.exports=function generate__limitProperties(e,t,r){var s,o=" ",a=e.level,i=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(i||""),h=e.opts.$data&&n&&n.$data;h?(o+=" var schema"+a+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",s="schema"+a):s=n,o+="if ( ",h&&(o+=" ("+s+" !== undefined && typeof "+s+" != 'number') || "),o+=" Object.keys("+d+").length "+("maxProperties"==t?">":"<")+" "+s+") { ";var f=t,p=p||[];p.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(f||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+s+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxProperties"==t?"more":"fewer",o+=" than ",o+=h?"' + "+s+" + '":""+n,o+=" properties' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+n,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var m=o;return o=p.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",l&&(o+=" else { "),o}},"./node_modules/ajv/lib/dotjs/allOf.js":function(e,t,r){"use strict";e.exports=function generate_allOf(e,t,r){var s=" ",o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),i=e.errSchemaPath+"/"+t,n=!e.opts.allErrors,c=e.util.copy(e),u="";c.level++;var l="valid"+c.level,d=c.baseId,h=!0,f=o;if(f)for(var p,m=-1,v=f.length-1;m<v;)p=f[m+=1],e.util.schemaHasRules(p,e.RULES.all)&&(h=!1,c.schema=p,c.schemaPath=a+"["+m+"]",c.errSchemaPath=i+"/"+m,s+="  "+e.validate(c)+" ",c.baseId=d,n&&(s+=" if ("+l+") { ",u+="}"));return n&&(s+=h?" if (true) { ":" "+u.slice(0,-1)+" "),s=e.util.cleanUpCode(s)}},"./node_modules/ajv/lib/dotjs/anyOf.js":function(e,t,r){"use strict";e.exports=function generate_anyOf(e,t,r){var s=" ",o=e.level,a=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(a||""),d="valid"+o,h="errs__"+o,f=e.util.copy(e),p="";f.level++;var m="valid"+f.level;if(i.every(function(t){return e.util.schemaHasRules(t,e.RULES.all)})){var v=f.baseId;s+=" var "+h+" = errors; var "+d+" = false;  ";var g=e.compositeRule;e.compositeRule=f.compositeRule=!0;var y=i;if(y)for(var _,b=-1,S=y.length-1;b<S;)_=y[b+=1],f.schema=_,f.schemaPath=n+"["+b+"]",f.errSchemaPath=c+"/"+b,s+="  "+e.validate(f)+" ",f.baseId=v,s+=" "+d+" = "+d+" || "+m+"; if (!"+d+") { ",p+="}";e.compositeRule=f.compositeRule=g,s+=" "+p+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),s+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(s+=" } "),s=e.util.cleanUpCode(s)}else u&&(s+=" if (true) { ");return s}},"./node_modules/ajv/lib/dotjs/comment.js":function(e,t,r){"use strict";e.exports=function generate_comment(e,t,r){var s=" ",o=e.schema[t],a=e.errSchemaPath+"/"+t,i=(e.opts.allErrors,e.util.toQuotedString(o));return!0===e.opts.$comment?s+=" console.log("+i+");":"function"==typeof e.opts.$comment&&(s+=" self._opts.$comment("+i+", "+e.util.toQuotedString(a)+", validate.root.schema);"),s}},"./node_modules/ajv/lib/dotjs/const.js":function(e,t,r){"use strict";e.exports=function generate_const(e,t,r){var s=" ",o=e.level,a=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(a||""),d="valid"+o,h=e.opts.$data&&i&&i.$data;h&&(s+=" var schema"+o+" = "+e.util.getData(i.$data,a,e.dataPathArr)+"; "),h||(s+=" var schema"+o+" = validate.schema"+n+";"),s+="var "+d+" = equal("+l+", schema"+o+"); if (!"+d+") {   ";var f=f||[];f.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+o+" } ",!1!==e.opts.messages&&(s+=" , message: 'should be equal to constant' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ";var p=s;return s=f.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+p+"]); ":s+=" validate.errors = ["+p+"]; return false; ":s+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" }",u&&(s+=" else { "),s}},"./node_modules/ajv/lib/dotjs/contains.js":function(e,t,r){"use strict";e.exports=function generate_contains(e,t,r){var s=" ",o=e.level,a=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(a||""),d="valid"+o,h="errs__"+o,f=e.util.copy(e);f.level++;var p="valid"+f.level,m="i"+o,v=f.dataLevel=e.dataLevel+1,g="data"+v,y=e.baseId,_=e.util.schemaHasRules(i,e.RULES.all);if(s+="var "+h+" = errors;var "+d+";",_){var b=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=i,f.schemaPath=n,f.errSchemaPath=c,s+=" var "+p+" = false; for (var "+m+" = 0; "+m+" < "+l+".length; "+m+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var S=l+"["+m+"]";f.dataPathArr[v]=m;var E=e.validate(f);f.baseId=y,e.util.varOccurences(E,g)<2?s+=" "+e.util.varReplace(E,g,S)+" ":s+=" var "+g+" = "+S+"; "+E+" ",s+=" if ("+p+") break; }  ",e.compositeRule=f.compositeRule=b,s+="  if (!"+p+") {"}else s+=" if ("+l+".length == 0) {";var w=w||[];w.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: 'should contain a valid item' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ";var P=s;return s=w.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+P+"]); ":s+=" validate.errors = ["+P+"]; return false; ":s+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else { ",_&&(s+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(s+=" } "),s=e.util.cleanUpCode(s)}},"./node_modules/ajv/lib/dotjs/custom.js":function(e,t,r){"use strict";e.exports=function generate_custom(e,t,r){var s,o,a=" ",i=e.level,n=e.dataLevel,c=e.schema[t],u=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,h="data"+(n||""),f="valid"+i,p="errs__"+i,m=e.opts.$data&&c&&c.$data;m?(a+=" var schema"+i+" = "+e.util.getData(c.$data,n,e.dataPathArr)+"; ",o="schema"+i):o=c;var v,g,y,_,b,S="definition"+i,E=this.definition,w="";if(m&&E.$data){b="keywordValidate"+i;var P=E.validateSchema;a+=" var "+S+" = RULES.custom['"+t+"'].definition; var "+b+" = "+S+".validate;"}else{if(!(_=e.useCustomRule(this,c,e.schema,e)))return;o="validate.schema"+u,b=_.code,v=E.compile,g=E.inline,y=E.macro}var x=b+".errors",C="i"+i,I="ruleErr"+i,M=E.async;if(M&&!e.async)throw new Error("async keyword in sync schema");if(g||y||(a+=x+" = null;"),a+="var "+p+" = errors;var "+f+";",m&&E.$data&&(w+="}",a+=" if ("+o+" === undefined) { "+f+" = true; } else { ",P&&(w+="}",a+=" "+f+" = "+S+".validateSchema("+o+"); if ("+f+") { ")),g)E.statements?a+=" "+_.validate+" ":a+=" "+f+" = "+_.validate+"; ";else if(y){var D=e.util.copy(e);w="";D.level++;var j="valid"+D.level;D.schema=_.validate,D.schemaPath="";var A=e.compositeRule;e.compositeRule=D.compositeRule=!0;var O=e.validate(D).replace(/validate\.schema/g,b);e.compositeRule=D.compositeRule=A,a+=" "+O}else{(R=R||[]).push(a),a="",a+="  "+b+".call( ",e.opts.passContext?a+="this":a+="self",v||!1===E.schema?a+=" , "+h+" ":a+=" , "+o+" , "+h+" , validate.schema"+e.schemaPath+" ",a+=" , (dataPath || '')",'""'!=e.errorPath&&(a+=" + "+e.errorPath);var L=n?"data"+(n-1||""):"parentData",T=n?e.dataPathArr[n]:"parentDataProperty",B=a+=" , "+L+" , "+T+" , rootData )  ";a=R.pop(),!1===E.errors?(a+=" "+f+" = ",M&&(a+="await "),a+=B+"; "):a+=M?" var "+(x="customErrors"+i)+" = null; try { "+f+" = await "+B+"; } catch (e) { "+f+" = false; if (e instanceof ValidationError) "+x+" = e.errors; else throw e; } ":" "+x+" = null; "+f+" = "+B+"; "}if(E.modifying&&(a+=" if ("+L+") "+h+" = "+L+"["+T+"];"),a+=""+w,E.valid)d&&(a+=" if (true) { ");else{var R;a+=" if ( ",void 0===E.valid?(a+=" !",a+=y?""+j:""+f):a+=" "+!E.valid+" ",a+=") { ",s=this.keyword,(R=R||[]).push(a),a="",(R=R||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(s||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(a+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ";var F=a;a=R.pop(),!e.compositeRule&&d?e.async?a+=" throw new ValidationError(["+F+"]); ":a+=" validate.errors = ["+F+"]; return false; ":a+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var $=a;a=R.pop(),g?E.errors?"full"!=E.errors&&(a+="  for (var "+C+"="+p+"; "+C+"<errors; "+C+"++) { var "+I+" = vErrors["+C+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+I+".schemaPath === undefined) { "+I+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(a+=" "+I+".schema = "+o+"; "+I+".data = "+h+"; "),a+=" } "):!1===E.errors?a+=" "+$+" ":(a+=" if ("+p+" == errors) { "+$+" } else {  for (var "+C+"="+p+"; "+C+"<errors; "+C+"++) { var "+I+" = vErrors["+C+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+I+".schemaPath === undefined) { "+I+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(a+=" "+I+".schema = "+o+"; "+I+".data = "+h+"; "),a+=" } } "):y?(a+="   var err =   ",!1!==e.createErrors?(a+=" { keyword: '"+(s||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(a+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; ")):!1===E.errors?a+=" "+$+" ":(a+=" if (Array.isArray("+x+")) { if (vErrors === null) vErrors = "+x+"; else vErrors = vErrors.concat("+x+"); errors = vErrors.length;  for (var "+C+"="+p+"; "+C+"<errors; "+C+"++) { var "+I+" = vErrors["+C+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+e.errorPath+";  "+I+'.schemaPath = "'+l+'";  ',e.opts.verbose&&(a+=" "+I+".schema = "+o+"; "+I+".data = "+h+"; "),a+=" } } else { "+$+" } "),a+=" } ",d&&(a+=" else { ")}return a}},"./node_modules/ajv/lib/dotjs/dependencies.js":function(e,t,r){"use strict";e.exports=function generate_dependencies(e,t,r){var s=" ",o=e.level,a=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(a||""),d="errs__"+o,h=e.util.copy(e),f="";h.level++;var p="valid"+h.level,m={},v={},g=e.opts.ownProperties;for(S in i){var y=i[S],_=Array.isArray(y)?v:m;_[S]=y}s+="var "+d+" = errors;";var b=e.errorPath;for(var S in s+="var missing"+o+";",v)if((_=v[S]).length){if(s+=" if ( "+l+e.util.getProperty(S)+" !== undefined ",g&&(s+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(S)+"') "),u){s+=" && ( ";var E=_;if(E)for(var w=-1,P=E.length-1;w<P;){j=E[w+=1],w&&(s+=" || "),s+=" ( ( "+(T=l+(L=e.util.getProperty(j)))+" === undefined ",g&&(s+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(j)+"') "),s+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?j:L)+") ) "}s+=")) {  ";var x="missing"+o,C="' + "+x+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,x,!0):b+" + "+x);var I=I||[];I.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+C+"', depsCount: "+_.length+", deps: '"+e.util.escapeQuotes(1==_.length?_[0]:_.join(", "))+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should have ",1==_.length?s+="property "+e.util.escapeQuotes(_[0]):s+="properties "+e.util.escapeQuotes(_.join(", ")),s+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ";var M=s;s=I.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+M+"]); ":s+=" validate.errors = ["+M+"]; return false; ":s+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{s+=" ) { ";var D=_;if(D)for(var j,A=-1,O=D.length-1;A<O;){j=D[A+=1];var L=e.util.getProperty(j),T=(C=e.util.escapeQuotes(j),l+L);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,j,e.opts.jsonPointers)),s+=" if ( "+T+" === undefined ",g&&(s+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(j)+"') "),s+=") {  var err =   ",!1!==e.createErrors?(s+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+C+"', depsCount: "+_.length+", deps: '"+e.util.escapeQuotes(1==_.length?_[0]:_.join(", "))+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should have ",1==_.length?s+="property "+e.util.escapeQuotes(_[0]):s+="properties "+e.util.escapeQuotes(_.join(", ")),s+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}s+=" }   ",u&&(f+="}",s+=" else { ")}e.errorPath=b;var B=h.baseId;for(var S in m){y=m[S];e.util.schemaHasRules(y,e.RULES.all)&&(s+=" "+p+" = true; if ( "+l+e.util.getProperty(S)+" !== undefined ",g&&(s+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(S)+"') "),s+=") { ",h.schema=y,h.schemaPath=n+e.util.getProperty(S),h.errSchemaPath=c+"/"+e.util.escapeFragment(S),s+="  "+e.validate(h)+" ",h.baseId=B,s+=" }  ",u&&(s+=" if ("+p+") { ",f+="}"))}return u&&(s+="   "+f+" if ("+d+" == errors) {"),s=e.util.cleanUpCode(s)}},"./node_modules/ajv/lib/dotjs/enum.js":function(e,t,r){"use strict";e.exports=function generate_enum(e,t,r){var s=" ",o=e.level,a=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(a||""),d="valid"+o,h=e.opts.$data&&i&&i.$data;h&&(s+=" var schema"+o+" = "+e.util.getData(i.$data,a,e.dataPathArr)+"; ");var f="i"+o,p="schema"+o;h||(s+=" var "+p+" = validate.schema"+n+";"),s+="var "+d+";",h&&(s+=" if (schema"+o+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+o+")) "+d+" = false; else {"),s+=d+" = false;for (var "+f+"=0; "+f+"<"+p+".length; "+f+"++) if (equal("+l+", "+p+"["+f+"])) { "+d+" = true; break; }",h&&(s+="  }  "),s+=" if (!"+d+") {   ";var m=m||[];m.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+o+" } ",!1!==e.opts.messages&&(s+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ";var v=s;return s=m.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+v+"]); ":s+=" validate.errors = ["+v+"]; return false; ":s+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" }",u&&(s+=" else { "),s}},"./node_modules/ajv/lib/dotjs/format.js":function(e,t,r){"use strict";e.exports=function generate_format(e,t,r){var s=" ",o=e.level,a=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(a||"");if(!1===e.opts.format)return u&&(s+=" if (true) { "),s;var d,h=e.opts.$data&&i&&i.$data;h?(s+=" var schema"+o+" = "+e.util.getData(i.$data,a,e.dataPathArr)+"; ",d="schema"+o):d=i;var f=e.opts.unknownFormats,p=Array.isArray(f);if(h){s+=" var "+(m="format"+o)+" = formats["+d+"]; var "+(v="isObject"+o)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(g="formatType"+o)+" = "+v+" && "+m+".type || 'string'; if ("+v+") { ",e.async&&(s+=" var async"+o+" = "+m+".async; "),s+=" "+m+" = "+m+".validate; } if (  ",h&&(s+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),s+=" (","ignore"!=f&&(s+=" ("+d+" && !"+m+" ",p&&(s+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),s+=") || "),s+=" ("+m+" && "+g+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?s+=" (async"+o+" ? await "+m+"("+l+") : "+m+"("+l+")) ":s+=" "+m+"("+l+") ",s+=" : "+m+".test("+l+"))))) {"}else{var m;if(!(m=e.formats[i])){if("ignore"==f)return e.logger.warn('unknown format "'+i+'" ignored in schema at path "'+e.errSchemaPath+'"'),u&&(s+=" if (true) { "),s;if(p&&f.indexOf(i)>=0)return u&&(s+=" if (true) { "),s;throw new Error('unknown format "'+i+'" is used in schema at path "'+e.errSchemaPath+'"')}var v,g=(v="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(v){var y=!0===m.async;m=m.validate}if(g!=r)return u&&(s+=" if (true) { "),s;if(y){if(!e.async)throw new Error("async format in sync schema");s+=" if (!(await "+(_="formats"+e.util.getProperty(i)+".validate")+"("+l+"))) { "}else{s+=" if (! ";var _="formats"+e.util.getProperty(i);v&&(_+=".validate"),s+="function"==typeof m?" "+_+"("+l+") ":" "+_+".test("+l+") ",s+=") { "}}var b=b||[];b.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",s+=h?""+d:""+e.util.toQuotedString(i),s+="  } ",!1!==e.opts.messages&&(s+=" , message: 'should match format \"",s+=h?"' + "+d+" + '":""+e.util.escapeQuotes(i),s+="\"' "),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+n:""+e.util.toQuotedString(i),s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ";var S=s;return s=b.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+S+"]); ":s+=" validate.errors = ["+S+"]; return false; ":s+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } ",u&&(s+=" else { "),s}},"./node_modules/ajv/lib/dotjs/if.js":function(e,t,r){"use strict";e.exports=function generate_if(e,t,r){var s=" ",o=e.level,a=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(a||""),d="valid"+o,h="errs__"+o,f=e.util.copy(e);f.level++;var p="valid"+f.level,m=e.schema.then,v=e.schema.else,g=void 0!==m&&e.util.schemaHasRules(m,e.RULES.all),y=void 0!==v&&e.util.schemaHasRules(v,e.RULES.all),_=f.baseId;if(g||y){var b;f.createErrors=!1,f.schema=i,f.schemaPath=n,f.errSchemaPath=c,s+=" var "+h+" = errors; var "+d+" = true;  ";var S=e.compositeRule;e.compositeRule=f.compositeRule=!0,s+="  "+e.validate(f)+" ",f.baseId=_,f.createErrors=!0,s+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=f.compositeRule=S,g?(s+=" if ("+p+") {  ",f.schema=e.schema.then,f.schemaPath=e.schemaPath+".then",f.errSchemaPath=e.errSchemaPath+"/then",s+="  "+e.validate(f)+" ",f.baseId=_,s+=" "+d+" = "+p+"; ",g&&y?s+=" var "+(b="ifClause"+o)+" = 'then'; ":b="'then'",s+=" } ",y&&(s+=" else { ")):s+=" if (!"+p+") { ",y&&(f.schema=e.schema.else,f.schemaPath=e.schemaPath+".else",f.errSchemaPath=e.errSchemaPath+"/else",s+="  "+e.validate(f)+" ",f.baseId=_,s+=" "+d+" = "+p+"; ",g&&y?s+=" var "+(b="ifClause"+o)+" = 'else'; ":b="'else'",s+=" } "),s+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+b+" } ",!1!==e.opts.messages&&(s+=" , message: 'should match \"' + "+b+" + '\" schema' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),s+=" }   ",u&&(s+=" else { "),s=e.util.cleanUpCode(s)}else u&&(s+=" if (true) { ");return s}},"./node_modules/ajv/lib/dotjs/index.js":function(e,t,r){"use strict";e.exports={$ref:r("./node_modules/ajv/lib/dotjs/ref.js"),allOf:r("./node_modules/ajv/lib/dotjs/allOf.js"),anyOf:r("./node_modules/ajv/lib/dotjs/anyOf.js"),$comment:r("./node_modules/ajv/lib/dotjs/comment.js"),const:r("./node_modules/ajv/lib/dotjs/const.js"),contains:r("./node_modules/ajv/lib/dotjs/contains.js"),dependencies:r("./node_modules/ajv/lib/dotjs/dependencies.js"),enum:r("./node_modules/ajv/lib/dotjs/enum.js"),format:r("./node_modules/ajv/lib/dotjs/format.js"),if:r("./node_modules/ajv/lib/dotjs/if.js"),items:r("./node_modules/ajv/lib/dotjs/items.js"),maximum:r("./node_modules/ajv/lib/dotjs/_limit.js"),minimum:r("./node_modules/ajv/lib/dotjs/_limit.js"),maxItems:r("./node_modules/ajv/lib/dotjs/_limitItems.js"),minItems:r("./node_modules/ajv/lib/dotjs/_limitItems.js"),maxLength:r("./node_modules/ajv/lib/dotjs/_limitLength.js"),minLength:r("./node_modules/ajv/lib/dotjs/_limitLength.js"),maxProperties:r("./node_modules/ajv/lib/dotjs/_limitProperties.js"),minProperties:r("./node_modules/ajv/lib/dotjs/_limitProperties.js"),multipleOf:r("./node_modules/ajv/lib/dotjs/multipleOf.js"),not:r("./node_modules/ajv/lib/dotjs/not.js"),oneOf:r("./node_modules/ajv/lib/dotjs/oneOf.js"),pattern:r("./node_modules/ajv/lib/dotjs/pattern.js"),properties:r("./node_modules/ajv/lib/dotjs/properties.js"),propertyNames:r("./node_modules/ajv/lib/dotjs/propertyNames.js"),required:r("./node_modules/ajv/lib/dotjs/required.js"),uniqueItems:r("./node_modules/ajv/lib/dotjs/uniqueItems.js"),validate:r("./node_modules/ajv/lib/dotjs/validate.js")}},"./node_modules/ajv/lib/dotjs/items.js":function(e,t,r){"use strict";e.exports=function generate_items(e,t,r){var s=" ",o=e.level,a=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(a||""),d="valid"+o,h="errs__"+o,f=e.util.copy(e),p="";f.level++;var m="valid"+f.level,v="i"+o,g=f.dataLevel=e.dataLevel+1,y="data"+g,_=e.baseId;if(s+="var "+h+" = errors;var "+d+";",Array.isArray(i)){var b=e.schema.additionalItems;if(!1===b){s+=" "+d+" = "+l+".length <= "+i.length+"; ";var S=c;c=e.errSchemaPath+"/additionalItems",s+="  if (!"+d+") {   ";var E=E||[];E.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+i.length+" } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT have more than "+i.length+" items' "),e.opts.verbose&&(s+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ";var w=s;s=E.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+w+"]); ":s+=" validate.errors = ["+w+"]; return false; ":s+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } ",c=S,u&&(p+="}",s+=" else { ")}var P=i;if(P)for(var x,C=-1,I=P.length-1;C<I;)if(x=P[C+=1],e.util.schemaHasRules(x,e.RULES.all)){s+=" "+m+" = true; if ("+l+".length > "+C+") { ";var M=l+"["+C+"]";f.schema=x,f.schemaPath=n+"["+C+"]",f.errSchemaPath=c+"/"+C,f.errorPath=e.util.getPathExpr(e.errorPath,C,e.opts.jsonPointers,!0),f.dataPathArr[g]=C;var D=e.validate(f);f.baseId=_,e.util.varOccurences(D,y)<2?s+=" "+e.util.varReplace(D,y,M)+" ":s+=" var "+y+" = "+M+"; "+D+" ",s+=" }  ",u&&(s+=" if ("+m+") { ",p+="}")}if("object"==typeof b&&e.util.schemaHasRules(b,e.RULES.all)){f.schema=b,f.schemaPath=e.schemaPath+".additionalItems",f.errSchemaPath=e.errSchemaPath+"/additionalItems",s+=" "+m+" = true; if ("+l+".length > "+i.length+") {  for (var "+v+" = "+i.length+"; "+v+" < "+l+".length; "+v+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);M=l+"["+v+"]";f.dataPathArr[g]=v;D=e.validate(f);f.baseId=_,e.util.varOccurences(D,y)<2?s+=" "+e.util.varReplace(D,y,M)+" ":s+=" var "+y+" = "+M+"; "+D+" ",u&&(s+=" if (!"+m+") break; "),s+=" } }  ",u&&(s+=" if ("+m+") { ",p+="}")}}else if(e.util.schemaHasRules(i,e.RULES.all)){f.schema=i,f.schemaPath=n,f.errSchemaPath=c,s+="  for (var "+v+" = 0; "+v+" < "+l+".length; "+v+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);M=l+"["+v+"]";f.dataPathArr[g]=v;D=e.validate(f);f.baseId=_,e.util.varOccurences(D,y)<2?s+=" "+e.util.varReplace(D,y,M)+" ":s+=" var "+y+" = "+M+"; "+D+" ",u&&(s+=" if (!"+m+") break; "),s+=" }"}return u&&(s+=" "+p+" if ("+h+" == errors) {"),s=e.util.cleanUpCode(s)}},"./node_modules/ajv/lib/dotjs/multipleOf.js":function(e,t,r){"use strict";e.exports=function generate_multipleOf(e,t,r){var s,o=" ",a=e.level,i=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(i||""),h=e.opts.$data&&n&&n.$data;h?(o+=" var schema"+a+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",s="schema"+a):s=n,o+="var division"+a+";if (",h&&(o+=" "+s+" !== undefined && ( typeof "+s+" != 'number' || "),o+=" (division"+a+" = "+d+" / "+s+", ",e.opts.multipleOfPrecision?o+=" Math.abs(Math.round(division"+a+") - division"+a+") > 1e-"+e.opts.multipleOfPrecision+" ":o+=" division"+a+" !== parseInt(division"+a+") ",o+=" ) ",h&&(o+="  )  "),o+=" ) {   ";var f=f||[];f.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+s+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be multiple of ",o+=h?"' + "+s:s+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+n,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var p=o;return o=f.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+p+"]); ":o+=" validate.errors = ["+p+"]; return false; ":o+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",l&&(o+=" else { "),o}},"./node_modules/ajv/lib/dotjs/not.js":function(e,t,r){"use strict";e.exports=function generate_not(e,t,r){var s=" ",o=e.level,a=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(a||""),d="errs__"+o,h=e.util.copy(e);h.level++;var f="valid"+h.level;if(e.util.schemaHasRules(i,e.RULES.all)){h.schema=i,h.schemaPath=n,h.errSchemaPath=c,s+=" var "+d+" = errors;  ";var p,m=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(p=h.opts.allErrors,h.opts.allErrors=!1),s+=" "+e.validate(h)+" ",h.createErrors=!0,p&&(h.opts.allErrors=p),e.compositeRule=h.compositeRule=m,s+=" if ("+f+") {   ";var v=v||[];v.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: 'should NOT be valid' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ";var g=s;s=v.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+g+"]); ":s+=" validate.errors = ["+g+"]; return false; ":s+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(s+=" } ")}else s+="  var err =   ",!1!==e.createErrors?(s+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: 'should NOT be valid' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(s+=" if (false) { ");return s}},"./node_modules/ajv/lib/dotjs/oneOf.js":function(e,t,r){"use strict";e.exports=function generate_oneOf(e,t,r){var s=" ",o=e.level,a=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(a||""),d="valid"+o,h="errs__"+o,f=e.util.copy(e),p="";f.level++;var m="valid"+f.level,v=f.baseId,g="prevValid"+o,y="passingSchemas"+o;s+="var "+h+" = errors , "+g+" = false , "+d+" = false , "+y+" = null; ";var _=e.compositeRule;e.compositeRule=f.compositeRule=!0;var b=i;if(b)for(var S,E=-1,w=b.length-1;E<w;)S=b[E+=1],e.util.schemaHasRules(S,e.RULES.all)?(f.schema=S,f.schemaPath=n+"["+E+"]",f.errSchemaPath=c+"/"+E,s+="  "+e.validate(f)+" ",f.baseId=v):s+=" var "+m+" = true; ",E&&(s+=" if ("+m+" && "+g+") { "+d+" = false; "+y+" = ["+y+", "+E+"]; } else { ",p+="}"),s+=" if ("+m+") { "+d+" = "+g+" = true; "+y+" = "+E+"; }";return e.compositeRule=f.compositeRule=_,s+=p+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(s+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),s+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(s+=" } "),s}},"./node_modules/ajv/lib/dotjs/pattern.js":function(e,t,r){"use strict";e.exports=function generate_pattern(e,t,r){var s,o=" ",a=e.level,i=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(i||""),h=e.opts.$data&&n&&n.$data;h?(o+=" var schema"+a+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",s="schema"+a):s=n,o+="if ( ",h&&(o+=" ("+s+" !== undefined && typeof "+s+" != 'string') || "),o+=" !"+(h?"(new RegExp("+s+"))":e.usePattern(n))+".test("+d+") ) {   ";var f=f||[];f.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",o+=h?""+s:""+e.util.toQuotedString(n),o+="  } ",!1!==e.opts.messages&&(o+=" , message: 'should match pattern \"",o+=h?"' + "+s+" + '":""+e.util.escapeQuotes(n),o+="\"' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+e.util.toQuotedString(n),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var p=o;return o=f.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+p+"]); ":o+=" validate.errors = ["+p+"]; return false; ":o+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",l&&(o+=" else { "),o}},"./node_modules/ajv/lib/dotjs/properties.js":function(e,t,r){"use strict";e.exports=function generate_properties(e,t,r){var s=" ",o=e.level,a=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(a||""),d="errs__"+o,h=e.util.copy(e),f="";h.level++;var p="valid"+h.level,m="key"+o,v="idx"+o,g=h.dataLevel=e.dataLevel+1,y="data"+g,_="dataProperties"+o,b=Object.keys(i||{}),S=e.schema.patternProperties||{},E=Object.keys(S),w=e.schema.additionalProperties,P=b.length||E.length,x=!1===w,C="object"==typeof w&&Object.keys(w).length,I=e.opts.removeAdditional,M=x||C||I,D=e.opts.ownProperties,j=e.baseId,A=e.schema.required;if(A&&(!e.opts.$data||!A.$data)&&A.length<e.opts.loopRequired)var O=e.util.toHash(A);if(s+="var "+d+" = errors;var "+p+" = true;",D&&(s+=" var "+_+" = undefined;"),M){if(s+=D?" "+_+" = "+_+" || Object.keys("+l+"); for (var "+v+"=0; "+v+"<"+_+".length; "+v+"++) { var "+m+" = "+_+"["+v+"]; ":" for (var "+m+" in "+l+") { ",P){if(s+=" var isAdditional"+o+" = !(false ",b.length)if(b.length>8)s+=" || validate.schema"+n+".hasOwnProperty("+m+") ";else{var L=b;if(L)for(var T=-1,B=L.length-1;T<B;)Q=L[T+=1],s+=" || "+m+" == "+e.util.toQuotedString(Q)+" "}if(E.length){var R=E;if(R)for(var F=-1,$=R.length-1;F<$;)oe=R[F+=1],s+=" || "+e.usePattern(oe)+".test("+m+") "}s+=" ); if (isAdditional"+o+") { "}if("all"==I)s+=" delete "+l+"["+m+"]; ";else{var k=e.errorPath,N="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),x)if(I)s+=" delete "+l+"["+m+"]; ";else{s+=" "+p+" = false; ";var U=c;c=e.errSchemaPath+"/additionalProperties",(te=te||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+N+"' } ",!1!==e.opts.messages&&(s+=" , message: '",e.opts._errorDataPathProperty?s+="is an invalid additional property":s+="should NOT have additional properties",s+="' "),e.opts.verbose&&(s+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ";var V=s;s=te.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+V+"]); ":s+=" validate.errors = ["+V+"]; return false; ":s+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=U,u&&(s+=" break; ")}else if(C)if("failing"==I){s+=" var "+d+" = errors;  ";var z=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=w,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var q=l+"["+m+"]";h.dataPathArr[g]=m;var W=e.validate(h);h.baseId=j,e.util.varOccurences(W,y)<2?s+=" "+e.util.varReplace(W,y,q)+" ":s+=" var "+y+" = "+q+"; "+W+" ",s+=" if (!"+p+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+l+"["+m+"]; }  ",e.compositeRule=h.compositeRule=z}else{h.schema=w,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);q=l+"["+m+"]";h.dataPathArr[g]=m;W=e.validate(h);h.baseId=j,e.util.varOccurences(W,y)<2?s+=" "+e.util.varReplace(W,y,q)+" ":s+=" var "+y+" = "+q+"; "+W+" ",u&&(s+=" if (!"+p+") break; ")}e.errorPath=k}P&&(s+=" } "),s+=" }  ",u&&(s+=" if ("+p+") { ",f+="}")}var H=e.opts.useDefaults&&!e.compositeRule;if(b.length){var G=b;if(G)for(var Q,K=-1,Y=G.length-1;K<Y;){var J=i[Q=G[K+=1]];if(e.util.schemaHasRules(J,e.RULES.all)){var Z=e.util.getProperty(Q),X=(q=l+Z,H&&void 0!==J.default);h.schema=J,h.schemaPath=n+Z,h.errSchemaPath=c+"/"+e.util.escapeFragment(Q),h.errorPath=e.util.getPath(e.errorPath,Q,e.opts.jsonPointers),h.dataPathArr[g]=e.util.toQuotedString(Q);W=e.validate(h);if(h.baseId=j,e.util.varOccurences(W,y)<2){W=e.util.varReplace(W,y,q);var ee=q}else{ee=y;s+=" var "+y+" = "+q+"; "}if(X)s+=" "+W+" ";else{if(O&&O[Q]){s+=" if ( "+ee+" === undefined ",D&&(s+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(Q)+"') "),s+=") { "+p+" = false; ";k=e.errorPath,U=c;var te,re=e.util.escapeQuotes(Q);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(k,Q,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(te=te||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+re+"' } ",!1!==e.opts.messages&&(s+=" , message: '",e.opts._errorDataPathProperty?s+="is a required property":s+="should have required property \\'"+re+"\\'",s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ";V=s;s=te.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+V+"]); ":s+=" validate.errors = ["+V+"]; return false; ":s+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=U,e.errorPath=k,s+=" } else { "}else u?(s+=" if ( "+ee+" === undefined ",D&&(s+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(Q)+"') "),s+=") { "+p+" = true; } else { "):(s+=" if ("+ee+" !== undefined ",D&&(s+=" &&   Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(Q)+"') "),s+=" ) { ");s+=" "+W+" } "}}u&&(s+=" if ("+p+") { ",f+="}")}}if(E.length){var se=E;if(se)for(var oe,ae=-1,ie=se.length-1;ae<ie;){J=S[oe=se[ae+=1]];if(e.util.schemaHasRules(J,e.RULES.all)){h.schema=J,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(oe),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(oe),s+=D?" "+_+" = "+_+" || Object.keys("+l+"); for (var "+v+"=0; "+v+"<"+_+".length; "+v+"++) { var "+m+" = "+_+"["+v+"]; ":" for (var "+m+" in "+l+") { ",s+=" if ("+e.usePattern(oe)+".test("+m+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);q=l+"["+m+"]";h.dataPathArr[g]=m;W=e.validate(h);h.baseId=j,e.util.varOccurences(W,y)<2?s+=" "+e.util.varReplace(W,y,q)+" ":s+=" var "+y+" = "+q+"; "+W+" ",u&&(s+=" if (!"+p+") break; "),s+=" } ",u&&(s+=" else "+p+" = true; "),s+=" }  ",u&&(s+=" if ("+p+") { ",f+="}")}}}return u&&(s+=" "+f+" if ("+d+" == errors) {"),s=e.util.cleanUpCode(s)}},"./node_modules/ajv/lib/dotjs/propertyNames.js":function(e,t,r){"use strict";e.exports=function generate_propertyNames(e,t,r){var s=" ",o=e.level,a=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(a||""),d="errs__"+o,h=e.util.copy(e);h.level++;var f="valid"+h.level;if(s+="var "+d+" = errors;",e.util.schemaHasRules(i,e.RULES.all)){h.schema=i,h.schemaPath=n,h.errSchemaPath=c;var p="key"+o,m="idx"+o,v="i"+o,g="' + "+p+" + '",y="data"+(h.dataLevel=e.dataLevel+1),_="dataProperties"+o,b=e.opts.ownProperties,S=e.baseId;b&&(s+=" var "+_+" = undefined; "),s+=b?" "+_+" = "+_+" || Object.keys("+l+"); for (var "+m+"=0; "+m+"<"+_+".length; "+m+"++) { var "+p+" = "+_+"["+m+"]; ":" for (var "+p+" in "+l+") { ",s+=" var startErrs"+o+" = errors; ";var E=p,w=e.compositeRule;e.compositeRule=h.compositeRule=!0;var P=e.validate(h);h.baseId=S,e.util.varOccurences(P,y)<2?s+=" "+e.util.varReplace(P,y,E)+" ":s+=" var "+y+" = "+E+"; "+P+" ",e.compositeRule=h.compositeRule=w,s+=" if (!"+f+") { for (var "+v+"=startErrs"+o+"; "+v+"<errors; "+v+"++) { vErrors["+v+"].propertyName = "+p+"; }   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+g+"' } ",!1!==e.opts.messages&&(s+=" , message: 'property name \\'"+g+"\\' is invalid' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),u&&(s+=" break; "),s+=" } }"}return u&&(s+="  if ("+d+" == errors) {"),s=e.util.cleanUpCode(s)}},"./node_modules/ajv/lib/dotjs/ref.js":function(e,t,r){"use strict";e.exports=function generate_ref(e,t,r){var s,o,a=" ",i=e.level,n=e.dataLevel,c=e.schema[t],u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(n||""),h="valid"+i;if("#"==c||"#/"==c)e.isRoot?(s=e.async,o="validate"):(s=!0===e.root.schema.$async,o="root.refVal[0]");else{var f=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===f){var p=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(p),(y=y||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(a+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(a+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var m=a;a=y.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(a+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,p);e.logger.warn(p),l&&(a+=" if (true) { ")}}else if(f.inline){var v=e.util.copy(e);v.level++;var g="valid"+v.level;v.schema=f.schema,v.schemaPath="",v.errSchemaPath=c,a+=" "+e.validate(v).replace(/validate\.schema/g,f.code)+" ",l&&(a+=" if ("+g+") { ")}else s=!0===f.$async||e.async&&!1!==f.$async,o=f.code}if(o){var y;(y=y||[]).push(a),a="",e.opts.passContext?a+=" "+o+".call(this, ":a+=" "+o+"( ",a+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(a+=" + "+e.errorPath);var _=a+=" , "+(n?"data"+(n-1||""):"parentData")+" , "+(n?e.dataPathArr[n]:"parentDataProperty")+", rootData)  ";if(a=y.pop(),s){if(!e.async)throw new Error("async schema referenced by sync schema");l&&(a+=" var "+h+"; "),a+=" try { await "+_+"; ",l&&(a+=" "+h+" = true; "),a+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",l&&(a+=" "+h+" = false; "),a+=" } ",l&&(a+=" if ("+h+") { ")}else a+=" if (!"+_+") { if (vErrors === null) vErrors = "+o+".errors; else vErrors = vErrors.concat("+o+".errors); errors = vErrors.length; } ",l&&(a+=" else { ")}return a}},"./node_modules/ajv/lib/dotjs/required.js":function(e,t,r){"use strict";e.exports=function generate_required(e,t,r){var s=" ",o=e.level,a=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(a||""),d="valid"+o,h=e.opts.$data&&i&&i.$data;h&&(s+=" var schema"+o+" = "+e.util.getData(i.$data,a,e.dataPathArr)+"; ");var f="schema"+o;if(!h)if(i.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],m=i;if(m)for(var v,g=-1,y=m.length-1;g<y;){v=m[g+=1];var _=e.schema.properties[v];_&&e.util.schemaHasRules(_,e.RULES.all)||(p[p.length]=v)}}else p=i;if(h||p.length){var b=e.errorPath,S=h||p.length>=e.opts.loopRequired,E=e.opts.ownProperties;if(u)if(s+=" var missing"+o+"; ",S){h||(s+=" var "+f+" = validate.schema"+n+"; ");var w="' + "+(D="schema"+o+"["+(C="i"+o)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,D,e.opts.jsonPointers)),s+=" var "+d+" = true; ",h&&(s+=" if (schema"+o+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+o+")) "+d+" = false; else {"),s+=" for (var "+C+" = 0; "+C+" < "+f+".length; "+C+"++) { "+d+" = "+l+"["+f+"["+C+"]] !== undefined ",E&&(s+=" &&   Object.prototype.hasOwnProperty.call("+l+", "+f+"["+C+"]) "),s+="; if (!"+d+") break; } ",h&&(s+="  }  "),s+="  if (!"+d+") {   ",(M=M||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(s+=" , message: '",e.opts._errorDataPathProperty?s+="is a required property":s+="should have required property \\'"+w+"\\'",s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ";var P=s;s=M.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+P+"]); ":s+=" validate.errors = ["+P+"]; return false; ":s+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else { "}else{s+=" if ( ";var x=p;if(x)for(var C=-1,I=x.length-1;C<I;){A=x[C+=1],C&&(s+=" || "),s+=" ( ( "+(B=l+(T=e.util.getProperty(A)))+" === undefined ",E&&(s+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(A)+"') "),s+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?A:T)+") ) "}s+=") {  ";var M;w="' + "+(D="missing"+o)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,D,!0):b+" + "+D),(M=M||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(s+=" , message: '",e.opts._errorDataPathProperty?s+="is a required property":s+="should have required property \\'"+w+"\\'",s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ";P=s;s=M.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+P+"]); ":s+=" validate.errors = ["+P+"]; return false; ":s+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else { "}else if(S){h||(s+=" var "+f+" = validate.schema"+n+"; ");var D;w="' + "+(D="schema"+o+"["+(C="i"+o)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,D,e.opts.jsonPointers)),h&&(s+=" if ("+f+" && !Array.isArray("+f+")) {  var err =   ",!1!==e.createErrors?(s+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(s+=" , message: '",e.opts._errorDataPathProperty?s+="is a required property":s+="should have required property \\'"+w+"\\'",s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+f+" !== undefined) { "),s+=" for (var "+C+" = 0; "+C+" < "+f+".length; "+C+"++) { if ("+l+"["+f+"["+C+"]] === undefined ",E&&(s+=" || ! Object.prototype.hasOwnProperty.call("+l+", "+f+"["+C+"]) "),s+=") {  var err =   ",!1!==e.createErrors?(s+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(s+=" , message: '",e.opts._errorDataPathProperty?s+="is a required property":s+="should have required property \\'"+w+"\\'",s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(s+="  }  ")}else{var j=p;if(j)for(var A,O=-1,L=j.length-1;O<L;){A=j[O+=1];var T=e.util.getProperty(A),B=(w=e.util.escapeQuotes(A),l+T);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,A,e.opts.jsonPointers)),s+=" if ( "+B+" === undefined ",E&&(s+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(A)+"') "),s+=") {  var err =   ",!1!==e.createErrors?(s+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(s+=" , message: '",e.opts._errorDataPathProperty?s+="is a required property":s+="should have required property \\'"+w+"\\'",s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=b}else u&&(s+=" if (true) {");return s}},"./node_modules/ajv/lib/dotjs/uniqueItems.js":function(e,t,r){"use strict";e.exports=function generate_uniqueItems(e,t,r){var s,o=" ",a=e.level,i=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(i||""),h="valid"+a,f=e.opts.$data&&n&&n.$data;if(f?(o+=" var schema"+a+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",s="schema"+a):s=n,(n||f)&&!1!==e.opts.uniqueItems){f&&(o+=" var "+h+"; if ("+s+" === false || "+s+" === undefined) "+h+" = true; else if (typeof "+s+" != 'boolean') "+h+" = false; else { "),o+=" var i = "+d+".length , "+h+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,m=Array.isArray(p);if(!p||"object"==p||"array"==p||m&&(p.indexOf("object")>=0||p.indexOf("array")>=0))o+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+h+" = false; break outer; } } } ";else{o+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var v="checkDataType"+(m?"s":"");o+=" if ("+e.util[v](p,"item",!0)+") continue; ",m&&(o+=" if (typeof item == 'string') item = '\"' + item; "),o+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}o+=" } ",f&&(o+="  }  "),o+=" if (!"+h+") {   ";var g=g||[];g.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(o+=" , schema:  ",o+=f?"validate.schema"+c:""+n,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var y=o;o=g.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+y+"]); ":o+=" validate.errors = ["+y+"]; return false; ":o+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",l&&(o+=" else { ")}else l&&(o+=" if (true) { ");return o}},"./node_modules/ajv/lib/dotjs/validate.js":function(e,t,r){"use strict";e.exports=function generate_validate(e,t,r){var s="",o=!0===e.schema.$async,a=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),i=e.self._getId(e.schema);if(e.isTop&&(s+=" var validate = ",o&&(e.async=!0,s+="async "),s+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",i&&(e.opts.sourceCode||e.opts.processCode)&&(s+=" /*# sourceURL="+i+" */ ")),"boolean"==typeof e.schema||!a&&!e.schema.$ref){var n=e.level,c=e.dataLevel,u=e.schema["false schema"],l=e.schemaPath+e.util.getProperty("false schema"),d=e.errSchemaPath+"/false schema",h=!e.opts.allErrors,f="data"+(c||""),p="valid"+n;if(!1===e.schema){e.isTop?h=!0:s+=" var "+p+" = false; ",(Q=Q||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: 'boolean schema is false' "),e.opts.verbose&&(s+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),s+=" } "):s+=" {} ";var m=s;s=Q.pop(),!e.compositeRule&&h?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?s+=o?" return data; ":" validate.errors = null; return true; ":s+=" var "+p+" = true; ";return e.isTop&&(s+=" }; return validate; "),s}if(e.isTop){var v=e.isTop;n=e.level=0,c=e.dataLevel=0,f="data";e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],s+=" var vErrors = null; ",s+=" var errors = 0;     ",s+=" if (rootData === undefined) rootData = data; "}else{n=e.level,f="data"+((c=e.dataLevel)||"");if(i&&(e.baseId=e.resolve.url(e.baseId,i)),o&&!e.async)throw new Error("async schema in sync schema");s+=" var errs_"+n+" = errors;"}p="valid"+n,h=!e.opts.allErrors;var g="",y="",_=e.schema.type,b=Array.isArray(_);if(_&&e.opts.nullable&&!0===e.schema.nullable&&(b?-1==_.indexOf("null")&&(_=_.concat("null")):"null"!=_&&(_=[_,"null"],b=!0)),b&&1==_.length&&(_=_[0],b=!1),e.schema.$ref&&a){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(a=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(s+=" "+e.RULES.all.$comment.code(e,"$comment")),_){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,_);var E=e.RULES.types[_];if(S||b||!0===E||E&&!$shouldUseGroup(E)){l=e.schemaPath+".type",d=e.errSchemaPath+"/type",l=e.schemaPath+".type",d=e.errSchemaPath+"/type";var w=b?"checkDataTypes":"checkDataType";if(s+=" if ("+e.util[w](_,f,!0)+") { ",S){var P="dataType"+n,x="coerced"+n;s+=" var "+P+" = typeof "+f+"; ","array"==e.opts.coerceTypes&&(s+=" if ("+P+" == 'object' && Array.isArray("+f+")) "+P+" = 'array'; "),s+=" var "+x+" = undefined; ";var C="",I=S;if(I)for(var M,D=-1,j=I.length-1;D<j;)M=I[D+=1],D&&(s+=" if ("+x+" === undefined) { ",C+="}"),"array"==e.opts.coerceTypes&&"array"!=M&&(s+=" if ("+P+" == 'array' && "+f+".length == 1) { "+x+" = "+f+" = "+f+"[0]; "+P+" = typeof "+f+";  } "),"string"==M?s+=" if ("+P+" == 'number' || "+P+" == 'boolean') "+x+" = '' + "+f+"; else if ("+f+" === null) "+x+" = ''; ":"number"==M||"integer"==M?(s+=" if ("+P+" == 'boolean' || "+f+" === null || ("+P+" == 'string' && "+f+" && "+f+" == +"+f+" ","integer"==M&&(s+=" && !("+f+" % 1)"),s+=")) "+x+" = +"+f+"; "):"boolean"==M?s+=" if ("+f+" === 'false' || "+f+" === 0 || "+f+" === null) "+x+" = false; else if ("+f+" === 'true' || "+f+" === 1) "+x+" = true; ":"null"==M?s+=" if ("+f+" === '' || "+f+" === 0 || "+f+" === false) "+x+" = null; ":"array"==e.opts.coerceTypes&&"array"==M&&(s+=" if ("+P+" == 'string' || "+P+" == 'number' || "+P+" == 'boolean' || "+f+" == null) "+x+" = ["+f+"]; ");s+=" "+C+" if ("+x+" === undefined) {   ",(Q=Q||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",s+=b?""+_.join(","):""+_,s+="' } ",!1!==e.opts.messages&&(s+=" , message: 'should be ",s+=b?""+_.join(","):""+_,s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),s+=" } "):s+=" {} ";m=s;s=Q.pop(),!e.compositeRule&&h?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else {  ";var A=c?"data"+(c-1||""):"parentData";s+=" "+f+" = "+x+"; ",c||(s+="if ("+A+" !== undefined)"),s+=" "+A+"["+(c?e.dataPathArr[c]:"parentDataProperty")+"] = "+x+"; } "}else{(Q=Q||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",s+=b?""+_.join(","):""+_,s+="' } ",!1!==e.opts.messages&&(s+=" , message: 'should be ",s+=b?""+_.join(","):""+_,s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),s+=" } "):s+=" {} ";m=s;s=Q.pop(),!e.compositeRule&&h?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}s+=" } "}}if(e.schema.$ref&&!a)s+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",h&&(s+=" } if (errors === ",s+=v?"0":"errs_"+n,s+=") { ",y+="}");else{var O=e.RULES;if(O)for(var L=-1,T=O.length-1;L<T;)if($shouldUseGroup(E=O[L+=1])){if(E.type&&(s+=" if ("+e.util.checkDataType(E.type,f)+") { "),e.opts.useDefaults&&!e.compositeRule)if("object"==E.type&&e.schema.properties){u=e.schema.properties;var B=Object.keys(u);if(B)for(var R,F=-1,$=B.length-1;F<$;){if(void 0!==(N=u[R=B[F+=1]]).default)s+="  if ("+(V=f+e.util.getProperty(R))+" === undefined) "+V+" = ","shared"==e.opts.useDefaults?s+=" "+e.useDefault(N.default)+" ":s+=" "+JSON.stringify(N.default)+" ",s+="; "}}else if("array"==E.type&&Array.isArray(e.schema.items)){var k=e.schema.items;if(k){D=-1;for(var N,U=k.length-1;D<U;){var V;if(void 0!==(N=k[D+=1]).default)s+="  if ("+(V=f+"["+D+"]")+" === undefined) "+V+" = ","shared"==e.opts.useDefaults?s+=" "+e.useDefault(N.default)+" ":s+=" "+JSON.stringify(N.default)+" ",s+="; "}}}var z=E.rules;if(z)for(var q,W=-1,H=z.length-1;W<H;)if($shouldUseRule(q=z[W+=1])){var G=q.code(e,q.keyword,E.type);G&&(s+=" "+G+" ",h&&(g+="}"))}if(h&&(s+=" "+g+" ",g=""),E.type&&(s+=" } ",_&&_===E.type&&!S)){s+=" else { ";var Q;l=e.schemaPath+".type",d=e.errSchemaPath+"/type";(Q=Q||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",s+=b?""+_.join(","):""+_,s+="' } ",!1!==e.opts.messages&&(s+=" , message: 'should be ",s+=b?""+_.join(","):""+_,s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),s+=" } "):s+=" {} ";m=s;s=Q.pop(),!e.compositeRule&&h?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } "}h&&(s+=" if (errors === ",s+=v?"0":"errs_"+n,s+=") { ",y+="}")}}function $shouldUseGroup(e){for(var t=e.rules,r=0;r<t.length;r++)if($shouldUseRule(t[r]))return!0}function $shouldUseRule(t){return void 0!==e.schema[t.keyword]||t.implements&&function $ruleImplementsSomeKeyword(t){for(var r=t.implements,s=0;s<r.length;s++)if(void 0!==e.schema[r[s]])return!0}(t)}return h&&(s+=" "+y+" "),v?(o?(s+=" if (errors === 0) return data;           ",s+=" else throw new ValidationError(vErrors); "):(s+=" validate.errors = vErrors; ",s+=" return errors === 0;       "),s+=" }; return validate;"):s+=" var "+p+" = errors === errs_"+n+";",s=e.util.cleanUpCode(s),v&&(s=e.util.finalCleanUpCode(s,o)),s}},"./node_modules/ajv/lib/keyword.js":function(e,t,r){"use strict";var s=/^[a-z_$][a-z0-9_$-]*$/i,o=r("./node_modules/ajv/lib/dotjs/custom.js");e.exports={add:function addKeyword(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!s.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){if(t.macro&&void 0!==t.valid)throw new Error('"valid" option cannot be used with macro keywords');var a=t.type;if(Array.isArray(a)){var i,n=a.length;for(i=0;i<n;i++)checkDataType(a[i]);for(i=0;i<n;i++)_addRule(e,a[i],t)}else a&&checkDataType(a),_addRule(e,a,t);var c=!0===t.$data&&this._opts.$data;if(c&&!t.validate)throw new Error('$data support: "validate" function is not defined');var u=t.metaSchema;u&&(c&&(u={anyOf:[u,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(u,!0))}function _addRule(e,t,s){for(var a,i=0;i<r.length;i++){var n=r[i];if(n.type==t){a=n;break}}a||(a={type:t,rules:[]},r.push(a));var c={keyword:e,definition:s,custom:!0,code:o,implements:s.implements};a.rules.push(c),r.custom[e]=c}function checkDataType(e){if(!r.types[e])throw new Error("Unknown type "+e)}return r.keywords[e]=r.all[e]=!0,this},get:function getKeyword(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function removeKeyword(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var s=t[r].rules,o=0;o<s.length;o++)if(s[o].keyword==e){s.splice(o,1);break}return this}}},"./node_modules/ajv/lib/refs/data.json":function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},"./node_modules/ajv/lib/refs/json-schema-draft-06.json":function(e){e.exports={$schema:"http://json-schema.org/draft-06/schema#",$id:"http://json-schema.org/draft-06/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},title:{type:"string"},description:{type:"string"},default:{},examples:{type:"array",items:{}},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:{},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:{}}},"./node_modules/ajv/lib/refs/json-schema-draft-07.json":function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}},"./node_modules/ajv/node_modules/fast-deep-equal/index.js":function(e,t,r){"use strict";var s=Array.isArray,o=Object.keys,a=Object.prototype.hasOwnProperty;e.exports=function equal(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,i,n,c=s(e),u=s(t);if(c&&u){if((i=e.length)!=t.length)return!1;for(r=i;0!=r--;)if(!equal(e[r],t[r]))return!1;return!0}if(c!=u)return!1;var l=e instanceof Date,d=t instanceof Date;if(l!=d)return!1;if(l&&d)return e.getTime()==t.getTime();var h=e instanceof RegExp,f=t instanceof RegExp;if(h!=f)return!1;if(h&&f)return e.toString()==t.toString();var p=o(e);if((i=p.length)!==o(t).length)return!1;for(r=i;0!=r--;)if(!a.call(t,p[r]))return!1;for(r=i;0!=r--;)if(!equal(e[n=p[r]],t[n]))return!1;return!0}return e!=e&&t!=t}},"./node_modules/ajv/node_modules/json-schema-traverse/index.js":function(e,t,r){"use strict";var s=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function _traverse(e,t,r,o,a,i,n,c,u,l){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var d in t(o,a,i,n,c,u,l),o){var h=o[d];if(Array.isArray(h)){if(d in s.arrayKeywords)for(var f=0;f<h.length;f++)_traverse(e,t,r,h[f],a+"/"+d+"/"+f,i,a,d,o,f)}else if(d in s.propsKeywords){if(h&&"object"==typeof h)for(var p in h)_traverse(e,t,r,h[p],a+"/"+d+"/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),i,a,d,o,p)}else(d in s.keywords||e.allKeys&&!(d in s.skipKeywords))&&_traverse(e,t,r,h,a+"/"+d,i,a,d,o)}r(o,a,i,n,c,u,l)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};s.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},s.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},s.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},s.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},"./node_modules/base64-js/index.js":function(e,t,r){"use strict";t.byteLength=function byteLength(e){return 3*e.length/4-placeHoldersCount(e)},t.toByteArray=function toByteArray(e){var t,r,s,i,n,c=e.length;i=placeHoldersCount(e),n=new a(3*c/4-i),r=i>0?c-4:c;var u=0;for(t=0;t<r;t+=4)s=o[e.charCodeAt(t)]<<18|o[e.charCodeAt(t+1)]<<12|o[e.charCodeAt(t+2)]<<6|o[e.charCodeAt(t+3)],n[u++]=s>>16&255,n[u++]=s>>8&255,n[u++]=255&s;2===i?(s=o[e.charCodeAt(t)]<<2|o[e.charCodeAt(t+1)]>>4,n[u++]=255&s):1===i&&(s=o[e.charCodeAt(t)]<<10|o[e.charCodeAt(t+1)]<<4|o[e.charCodeAt(t+2)]>>2,n[u++]=s>>8&255,n[u++]=255&s);return n},t.fromByteArray=function fromByteArray(e){for(var t,r=e.length,o=r%3,a="",i=[],n=0,c=r-o;n<c;n+=16383)i.push(encodeChunk(e,n,n+16383>c?c:n+16383));1===o?(t=e[r-1],a+=s[t>>2],a+=s[t<<4&63],a+="=="):2===o&&(t=(e[r-2]<<8)+e[r-1],a+=s[t>>10],a+=s[t>>4&63],a+=s[t<<2&63],a+="=");return i.push(a),i.join("")};for(var s=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,c=i.length;n<c;++n)s[n]=i[n],o[i.charCodeAt(n)]=n;function placeHoldersCount(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function encodeChunk(e,t,r){for(var o,a,i=[],n=t;n<r;n+=3)o=(e[n]<<16)+(e[n+1]<<8)+e[n+2],i.push(s[(a=o)>>18&63]+s[a>>12&63]+s[a>>6&63]+s[63&a]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},"./node_modules/buffer/index.js":function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var s=r("./node_modules/base64-js/index.js"),o=r("./node_modules/ieee754/index.js"),a=r("./node_modules/isarray/index.js");function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer.prototype:(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,r)}function from(e,t,r,s){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function fromArrayBuffer(e,t,r,s){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(s||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===s?new Uint8Array(t):void 0===s?new Uint8Array(t,r):new Uint8Array(t,r,s);Buffer.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer.prototype:e=fromArrayLike(e,t);return e}(e,t,r,s):"string"==typeof t?function fromString(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var s=0|byteLength(t,r),o=(e=createBuffer(e,s)).write(t,r);o!==s&&(e=e.slice(0,o));return e}(e,t,r):function fromObject(e,t){if(Buffer.isBuffer(t)){var r=0|checked(t.length);return 0===(e=createBuffer(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function isnan(e){return e!=e}(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&a(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function fromArrayLike(e,t){var r=t.length<0?0:0|checked(t.length);e=createBuffer(e,r);for(var s=0;s<r;s+=1)e[s]=255&t[s];return e}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(s)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),s=!0}}function swap(e,t,r){var s=e[t];e[t]=e[r],e[r]=s}function bidirectionalIndexOf(e,t,r,s,o){if(0===e.length)return-1;if("string"==typeof r?(s=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=Buffer.from(t,s)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,s,o);if("number"==typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,s,o);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,s,o){var a,i=1,n=e.length,c=t.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return-1;i=2,n/=2,c/=2,r/=2}function read(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var u=-1;for(a=r;a<n;a++)if(read(e,a)===read(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===c)return u*i}else-1!==u&&(a-=a-u),u=-1}else for(r+c>n&&(r=n-c),a=r;a>=0;a--){for(var l=!0,d=0;d<c;d++)if(read(e,a+d)!==read(t,d)){l=!1;break}if(l)return a}return-1}function hexWrite(e,t,r,s){r=Number(r)||0;var o=e.length-r;s?(s=Number(s))>o&&(s=o):s=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");s>a/2&&(s=a/2);for(var i=0;i<s;++i){var n=parseInt(t.substr(2*i,2),16);if(isNaN(n))return i;e[r+i]=n}return i}function utf8Write(e,t,r,s){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,s)}function asciiWrite(e,t,r,s){return blitBuffer(function asciiToBytes(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,s)}function latin1Write(e,t,r,s){return asciiWrite(e,t,r,s)}function base64Write(e,t,r,s){return blitBuffer(base64ToBytes(t),e,r,s)}function ucs2Write(e,t,r,s){return blitBuffer(function utf16leToBytes(e,t){for(var r,s,o,a=[],i=0;i<e.length&&!((t-=2)<0);++i)r=e.charCodeAt(i),s=r>>8,o=r%256,a.push(o),a.push(s);return a}(t,e.length-r),e,r,s)}function base64Slice(e,t,r){return 0===t&&r===e.length?s.fromByteArray(e):s.fromByteArray(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);for(var s=[],o=t;o<r;){var a,n,c,u,l=e[o],d=null,h=l>239?4:l>223?3:l>191?2:1;if(o+h<=r)switch(h){case 1:l<128&&(d=l);break;case 2:128==(192&(a=e[o+1]))&&(u=(31&l)<<6|63&a)>127&&(d=u);break;case 3:a=e[o+1],n=e[o+2],128==(192&a)&&128==(192&n)&&(u=(15&l)<<12|(63&a)<<6|63&n)>2047&&(u<55296||u>57343)&&(d=u);break;case 4:a=e[o+1],n=e[o+2],c=e[o+3],128==(192&a)&&128==(192&n)&&128==(192&c)&&(u=(15&l)<<18|(63&a)<<12|(63&n)<<6|63&c)>65535&&u<1114112&&(d=u)}null===d?(d=65533,h=1):d>65535&&(d-=65536,s.push(d>>>10&1023|55296),d=56320|1023&d),s.push(d),o+=h}return function decodeCodePointsArray(e){var t=e.length;if(t<=i)return String.fromCharCode.apply(String,e);var r="",s=0;for(;s<t;)r+=String.fromCharCode.apply(String,e.slice(s,s+=i));return r}(s)}t.Buffer=Buffer,t.SlowBuffer=function SlowBuffer(e){+e!=e&&(e=0);return Buffer.alloc(+e)},t.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,r){return from(null,e,t,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(e,t,r){return function alloc(e,t,r,s){return assertSize(t),t<=0?createBuffer(e,t):void 0!==r?"string"==typeof s?createBuffer(e,t).fill(r,s):createBuffer(e,t).fill(r):createBuffer(e,t)}(null,e,t,r)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=function isBuffer(e){return!(null==e||!e._isBuffer)},Buffer.compare=function compare(e,t){if(!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,s=t.length,o=0,a=Math.min(r,s);o<a;++o)if(e[o]!==t[o]){r=e[o],s=t[o];break}return r<s?-1:s<r?1:0},Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var s=Buffer.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(!Buffer.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(s,o),o+=i.length}return s},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function swap32(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function swap64(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function toString(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):function slowToString(e,t,r){var s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}.apply(this,arguments)},Buffer.prototype.equals=function equals(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function inspect(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function compare(e,t,r,s,o){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===s&&(s=0),void 0===o&&(o=this.length),t<0||r>e.length||s<0||o>this.length)throw new RangeError("out of range index");if(s>=o&&t>=r)return 0;if(s>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(s>>>=0),i=(r>>>=0)-(t>>>=0),n=Math.min(a,i),c=this.slice(s,o),u=e.slice(t,r),l=0;l<n;++l)if(c[l]!==u[l]){a=c[l],i=u[l];break}return a<i?-1:i<a?1:0},Buffer.prototype.includes=function includes(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer.prototype.indexOf=function indexOf(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer.prototype.write=function write(e,t,r,s){if(void 0===t)s="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)s=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===s&&(s="utf8")):(s=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var a=!1;;)switch(s){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":return asciiWrite(this,e,t,r);case"latin1":case"binary":return latin1Write(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),a=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var i=4096;function asciiSlice(e,t,r){var s="";r=Math.min(e.length,r);for(var o=t;o<r;++o)s+=String.fromCharCode(127&e[o]);return s}function latin1Slice(e,t,r){var s="";r=Math.min(e.length,r);for(var o=t;o<r;++o)s+=String.fromCharCode(e[o]);return s}function hexSlice(e,t,r){var s=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>s)&&(r=s);for(var o="",a=t;a<r;++a)o+=toHex(e[a]);return o}function utf16leSlice(e,t,r){for(var s=e.slice(t,r),o="",a=0;a<s.length;a+=2)o+=String.fromCharCode(s[a]+256*s[a+1]);return o}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,s,o,a){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(r+s>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,r,s){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-r,2);o<a;++o)e[r+o]=(t&255<<8*(s?o:1-o))>>>8*(s?o:1-o)}function objectWriteUInt32(e,t,r,s){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-r,4);o<a;++o)e[r+o]=t>>>8*(s?o:3-o)&255}function checkIEEE754(e,t,r,s,o,a){if(r+s>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,s,a){return a||checkIEEE754(e,0,r,4),o.write(e,t,r,s,23,4),r+4}function writeDouble(e,t,r,s,a){return a||checkIEEE754(e,0,r,8),o.write(e,t,r,s,52,8),r+8}Buffer.prototype.slice=function slice(e,t){var r,s=this.length;if((e=~~e)<0?(e+=s)<0&&(e=0):e>s&&(e=s),(t=void 0===t?s:~~t)<0?(t+=s)<0&&(t=0):t>s&&(t=s),t<e&&(t=e),Buffer.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=Buffer.prototype;else{var o=t-e;r=new Buffer(o,void 0);for(var a=0;a<o;++a)r[a]=this[a+e]}return r},Buffer.prototype.readUIntLE=function readUIntLE(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var s=this[e],o=1,a=0;++a<t&&(o*=256);)s+=this[e+a]*o;return s},Buffer.prototype.readUIntBE=function readUIntBE(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var s=this[e+--t],o=1;t>0&&(o*=256);)s+=this[e+--t]*o;return s},Buffer.prototype.readUInt8=function readUInt8(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function readUInt16LE(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function readIntLE(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var s=this[e],o=1,a=0;++a<t&&(o*=256);)s+=this[e+a]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*t)),s},Buffer.prototype.readIntBE=function readIntBE(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var s=t,o=1,a=this[e+--s];s>0&&(o*=256);)a+=this[e+--s]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},Buffer.prototype.readInt8=function readInt8(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function readInt16LE(e,t){t||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function readInt16BE(e,t){t||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function readInt32LE(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function readFloatLE(e,t){return t||checkOffset(e,4,this.length),o.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(e,t){return t||checkOffset(e,4,this.length),o.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(e,t){return t||checkOffset(e,8,this.length),o.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(e,t){return t||checkOffset(e,8,this.length),o.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(e,t,r,s){(e=+e,t|=0,r|=0,s)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,a=0;for(this[t]=255&e;++a<r&&(o*=256);)this[t+a]=e/o&255;return t+r},Buffer.prototype.writeUIntBE=function writeUIntBE(e,t,r,s){(e=+e,t|=0,r|=0,s)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+r},Buffer.prototype.writeUInt8=function writeUInt8(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function writeIntLE(e,t,r,s){if(e=+e,t|=0,!s){var o=Math.pow(2,8*r-1);checkInt(this,e,t,r,o-1,-o)}var a=0,i=1,n=0;for(this[t]=255&e;++a<r&&(i*=256);)e<0&&0===n&&0!==this[t+a-1]&&(n=1),this[t+a]=(e/i>>0)-n&255;return t+r},Buffer.prototype.writeIntBE=function writeIntBE(e,t,r,s){if(e=+e,t|=0,!s){var o=Math.pow(2,8*r-1);checkInt(this,e,t,r,o-1,-o)}var a=r-1,i=1,n=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===n&&0!==this[t+a+1]&&(n=1),this[t+a]=(e/i>>0)-n&255;return t+r},Buffer.prototype.writeInt8=function writeInt8(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function writeInt16LE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function writeInt16BE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function writeInt32LE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function writeInt32BE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function writeFloatLE(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function writeFloatBE(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer.prototype.copy=function copy(e,t,r,s){if(r||(r=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<r&&(s=r),s===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-r&&(s=e.length-t+r);var o,a=s-r;if(this===e&&r<t&&t<s)for(o=a-1;o>=0;--o)e[o+t]=this[o+r];else if(a<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},Buffer.prototype.fill=function fill(e,t,r,s){if("string"==typeof e){if("string"==typeof t?(s=t,t=0,r=this.length):"string"==typeof r&&(s=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!Buffer.isEncoding(s))throw new TypeError("Unknown encoding: "+s)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var i=Buffer.isBuffer(e)?e:utf8ToBytes(new Buffer(e,s).toString()),n=i.length;for(a=0;a<r-t;++a)this[a+t]=i[a%n]}return this};var n=/[^+\/0-9A-Za-z-_]/g;function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var r;t=t||1/0;for(var s=e.length,o=null,a=[],i=0;i<s;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===s){(t-=3)>-1&&a.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function base64ToBytes(e){return s.toByteArray(function base64clean(e){if((e=function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(n,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,t,r,s){for(var o=0;o<s&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/class-transformer/ClassTransformer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/class-transformer/TransformOperationExecutor.js"),o=function(){function ClassTransformer(){}return ClassTransformer.prototype.classToPlain=function(e,t){return new s.TransformOperationExecutor(s.TransformationType.CLASS_TO_PLAIN,t||{}).transform(void 0,e,void 0,void 0,void 0,void 0)},ClassTransformer.prototype.classToPlainFromExist=function(e,t,r){return new s.TransformOperationExecutor(s.TransformationType.CLASS_TO_PLAIN,r||{}).transform(t,e,void 0,void 0,void 0,void 0)},ClassTransformer.prototype.plainToClass=function(e,t,r){return new s.TransformOperationExecutor(s.TransformationType.PLAIN_TO_CLASS,r||{}).transform(void 0,t,e,void 0,void 0,void 0)},ClassTransformer.prototype.plainToClassFromExist=function(e,t,r){return new s.TransformOperationExecutor(s.TransformationType.PLAIN_TO_CLASS,r||{}).transform(e,t,void 0,void 0,void 0,void 0)},ClassTransformer.prototype.classToClass=function(e,t){return new s.TransformOperationExecutor(s.TransformationType.CLASS_TO_CLASS,t||{}).transform(void 0,e,void 0,void 0,void 0,void 0)},ClassTransformer.prototype.classToClassFromExist=function(e,t,r){return new s.TransformOperationExecutor(s.TransformationType.CLASS_TO_CLASS,r||{}).transform(t,e,void 0,void 0,void 0,void 0)},ClassTransformer.prototype.serialize=function(e,t){return JSON.stringify(this.classToPlain(e,t))},ClassTransformer.prototype.deserialize=function(e,t,r){var s=JSON.parse(t);return this.plainToClass(e,s,r)},ClassTransformer.prototype.deserializeArray=function(e,t,r){var s=JSON.parse(t);return this.plainToClass(e,s,r)},ClassTransformer}();t.ClassTransformer=o},"./node_modules/class-transformer/TransformOperationExecutor.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,o=r("./node_modules/class-transformer/storage.js");!function(e){e[e.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",e[e.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",e[e.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"}(s=t.TransformationType||(t.TransformationType={}));var a=function(){function TransformOperationExecutor(e,t){this.transformationType=e,this.options=t,this.recursionStack=new Set}return TransformOperationExecutor.prototype.transform=function(e,t,r,a,i,n){var c=this;if(void 0===n&&(n=0),Array.isArray(t)||t instanceof Set){var u=a&&this.transformationType===s.PLAIN_TO_CLASS?new a:[];return t.forEach(function(t,o){var a=e?e[o]:void 0;if(c.options.enableCircularCheck&&c.isCircular(t))c.transformationType===s.CLASS_TO_CLASS&&(u instanceof Set?u.add(t):u.push(t));else{var i=void 0;if("function"!=typeof r&&r&&r.options&&r.options.discriminator&&r.options.discriminator.property&&r.options.discriminator.subTypes){if(c.transformationType===s.PLAIN_TO_CLASS){i=r.options.discriminator.subTypes.find(function(e){return e.name===t[r.options.discriminator.property]});var l={newObject:u,object:t,property:void 0},d=r.typeFunction(l);i=void 0===i?d:i.value,r.options.keepDiscriminatorProperty||delete t[r.options.discriminator.property]}c.transformationType===s.CLASS_TO_CLASS&&(i=t.constructor),c.transformationType===s.CLASS_TO_PLAIN&&(t[r.options.discriminator.property]=r.options.discriminator.subTypes.find(function(e){return e.value===t.constructor}).name)}else i=r;var h=c.transform(a,t,i,void 0,t instanceof Map,n+1);u instanceof Set?u.add(h):u.push(h)}}),u}if(r!==String||i){if(r!==Number||i){if(r!==Boolean||i){if((r===Date||t instanceof Date)&&!i)return t instanceof Date?new Date(t.valueOf()):null==t?t:new Date(t);if("object"==typeof t&&null!==t){r||t.constructor===Object||(r=t.constructor),!r&&e&&(r=e.constructor),this.options.enableCircularCheck&&this.recursionStack.add(t);var l=this.getKeys(r,t),d=e||{};e||this.transformationType!==s.PLAIN_TO_CLASS&&this.transformationType!==s.CLASS_TO_CLASS||(d=i?new Map:r?new r:{});for(var h=function(a){var c=a,u=a,l=a;if(!f.options.ignoreDecorators&&r)if(f.transformationType===s.PLAIN_TO_CLASS)(h=o.defaultMetadataStorage.findExposeMetadataByCustomName(r,a))&&(l=h.propertyName,u=h.propertyName);else if(f.transformationType===s.CLASS_TO_PLAIN||f.transformationType===s.CLASS_TO_CLASS){var h;(h=o.defaultMetadataStorage.findExposeMetadata(r,a))&&h.options&&h.options.name&&(u=h.options.name)}var p=void 0;p=t instanceof Map?t.get(c):t[c]instanceof Function?t[c]():t[c];var m=void 0,v=p instanceof Map;if(r&&i)m=r;else if(r){var g=o.defaultMetadataStorage.findTypeMetadata(r,l);if(g){var y={newObject:d,object:t,property:l},_=g.typeFunction(y);g.options&&g.options.discriminator&&g.options.discriminator.property&&g.options.discriminator.subTypes?t[c]instanceof Array?m=g:(f.transformationType===s.PLAIN_TO_CLASS&&(m=void 0===(m=g.options.discriminator.subTypes.find(function(e){return e.name===p[g.options.discriminator.property]}))?_:m.value,g.options.keepDiscriminatorProperty||delete p[g.options.discriminator.property]),f.transformationType===s.CLASS_TO_CLASS&&(m=p.constructor),f.transformationType===s.CLASS_TO_PLAIN&&(p[g.options.discriminator.property]=g.options.discriminator.subTypes.find(function(e){return e.value===p.constructor}).name)):m=_,v=v||g.reflectedType===Map}else f.options.targetMaps&&f.options.targetMaps.filter(function(e){return e.target===r&&!!e.properties[l]}).forEach(function(e){return m=e.properties[l]})}var b=Array.isArray(t[c])?f.getReflectedType(r,l):void 0,S=e?e[c]:void 0;if(d.constructor.prototype){var E=Object.getOwnPropertyDescriptor(d.constructor.prototype,u);if((f.transformationType===s.PLAIN_TO_CLASS||f.transformationType===s.CLASS_TO_CLASS)&&(d[u]instanceof Function||E&&!E.set))return"continue"}if(f.options.enableCircularCheck&&f.isCircular(p)){if(f.transformationType===s.CLASS_TO_CLASS){P=p;P=f.applyCustomTransformations(P,r,a,t,f.transformationType),d instanceof Map?d.set(u,P):d[u]=P}}else{var w=f.transformationType===s.PLAIN_TO_CLASS?u:a,P=void 0;f.transformationType===s.CLASS_TO_PLAIN?(P=t[w],P=f.applyCustomTransformations(P,r,w,t,f.transformationType),P=t[w]===P?p:P,P=f.transform(S,P,m,b,v,n+1)):(P=f.transform(S,p,m,b,v,n+1),P=f.applyCustomTransformations(P,r,w,t,f.transformationType)),d instanceof Map?d.set(u,P):d[u]=P}},f=this,p=0,m=l;p<m.length;p++){h(m[p])}return this.options.enableCircularCheck&&this.recursionStack.delete(t),d}return t}return null==t?t:Boolean(t)}return null==t?t:Number(t)}return null==t?t:String(t)},TransformOperationExecutor.prototype.applyCustomTransformations=function(e,t,r,s,a){var i=this,n=o.defaultMetadataStorage.findTransformMetadatas(t,r,this.transformationType);return void 0!==this.options.version&&(n=n.filter(function(e){return!e.options||i.checkVersion(e.options.since,e.options.until)})),(n=this.options.groups&&this.options.groups.length?n.filter(function(e){return!e.options||i.checkGroups(e.options.groups)}):n.filter(function(e){return!e.options||!e.options.groups||!e.options.groups.length})).forEach(function(t){e=t.transformFn(e,s,a)}),e},TransformOperationExecutor.prototype.isCircular=function(e){return this.recursionStack.has(e)},TransformOperationExecutor.prototype.getReflectedType=function(e,t){if(e){var r=o.defaultMetadataStorage.findTypeMetadata(e,t);return r?r.reflectedType:void 0}},TransformOperationExecutor.prototype.getKeys=function(e,t){var r=this,a=o.defaultMetadataStorage.getStrategy(e);"none"===a&&(a=this.options.strategy||"exposeAll");var i=[];if("exposeAll"===a&&(i=t instanceof Map?Array.from(t.keys()):Object.keys(t)),!this.options.ignoreDecorators&&e){var n=o.defaultMetadataStorage.getExposedProperties(e,this.transformationType);this.transformationType===s.PLAIN_TO_CLASS&&(n=n.map(function(t){var r=o.defaultMetadataStorage.findExposeMetadata(e,t);return r&&r.options&&r.options.name?r.options.name:t})),i=i.concat(n);var c=o.defaultMetadataStorage.getExcludedProperties(e,this.transformationType);c.length>0&&(i=i.filter(function(e){return-1===c.indexOf(e)})),void 0!==this.options.version&&(i=i.filter(function(t){var s=o.defaultMetadataStorage.findExposeMetadata(e,t);return!s||!s.options||r.checkVersion(s.options.since,s.options.until)})),i=this.options.groups&&this.options.groups.length?i.filter(function(t){var s=o.defaultMetadataStorage.findExposeMetadata(e,t);return!s||!s.options||r.checkGroups(s.options.groups)}):i.filter(function(t){var r=o.defaultMetadataStorage.findExposeMetadata(e,t);return!(r&&r.options&&r.options.groups&&r.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(i=i.filter(function(e){return r.options.excludePrefixes.every(function(t){return e.substr(0,t.length)!==t})})),i=i.filter(function(e,t,r){return r.indexOf(e)===t})},TransformOperationExecutor.prototype.checkVersion=function(e,t){var r=!0;return r&&e&&(r=this.options.version>=e),r&&t&&(r=this.options.version<t),r},TransformOperationExecutor.prototype.checkGroups=function(e){return!e||this.options.groups.some(function(t){return-1!==e.indexOf(t)})},TransformOperationExecutor}();t.TransformOperationExecutor=a},"./node_modules/class-transformer/decorators.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/class-transformer/ClassTransformer.js"),o=r("./node_modules/class-transformer/storage.js"),a=r("./node_modules/class-transformer/metadata/TypeMetadata.js"),i=r("./node_modules/class-transformer/metadata/ExposeMetadata.js"),n=r("./node_modules/class-transformer/metadata/ExcludeMetadata.js"),c=r("./node_modules/class-transformer/metadata/TransformMetadata.js");t.Transform=function Transform(e,t){return function(r,s){var a=new c.TransformMetadata(r.constructor,s,e,t);o.defaultMetadataStorage.addTransformMetadata(a)}},t.Type=function Type(e,t){return function(r,s){var i=Reflect.getMetadata("design:type",r,s),n=new a.TypeMetadata(r.constructor,s,i,e,t);o.defaultMetadataStorage.addTypeMetadata(n)}},t.Expose=function Expose(e){return function(t,r){var s=new i.ExposeMetadata(t instanceof Function?t:t.constructor,r,e||{});o.defaultMetadataStorage.addExposeMetadata(s)}},t.Exclude=function Exclude(e){return function(t,r){var s=new n.ExcludeMetadata(t instanceof Function?t:t.constructor,r,e||{});o.defaultMetadataStorage.addExcludeMetadata(s)}},t.TransformClassToPlain=function TransformClassToPlain(e){return function(t,r,o){var a=new s.ClassTransformer,i=o.value;o.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var s=i.apply(this,t);return!s||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof s.then?a.classToPlain(s,e):s.then(function(t){return a.classToPlain(t,e)})}}},t.TransformClassToClass=function TransformClassToClass(e){return function(t,r,o){var a=new s.ClassTransformer,i=o.value;o.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var s=i.apply(this,t);return!s||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof s.then?a.classToClass(s,e):s.then(function(t){return a.classToClass(t,e)})}}},t.TransformPlainToClass=function TransformPlainToClass(e,t){return function(r,o,a){var i=new s.ClassTransformer,n=a.value;a.value=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var o=n.apply(this,r);return!o||"object"!=typeof o&&"function"!=typeof o||"function"!=typeof o.then?i.plainToClass(e,o,t):o.then(function(r){return i.plainToClass(e,r,t)})}}}},"./node_modules/class-transformer/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/class-transformer/ClassTransformer.js"),o=r("./node_modules/class-transformer/ClassTransformer.js");t.ClassTransformer=o.ClassTransformer,function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r("./node_modules/class-transformer/decorators.js"));var a=new s.ClassTransformer;t.classToPlain=function classToPlain(e,t){return a.classToPlain(e,t)},t.classToPlainFromExist=function classToPlainFromExist(e,t,r){return a.classToPlainFromExist(e,t,r)},t.plainToClass=function plainToClass(e,t,r){return a.plainToClass(e,t,r)},t.plainToClassFromExist=function plainToClassFromExist(e,t,r){return a.plainToClassFromExist(e,t,r)},t.classToClass=function classToClass(e,t){return a.classToClass(e,t)},t.classToClassFromExist=function classToClassFromExist(e,t,r){return a.classToClassFromExist(e,t,r)},t.serialize=function serialize(e,t){return a.serialize(e,t)},t.deserialize=function deserialize(e,t,r){return a.deserialize(e,t,r)},t.deserializeArray=function deserializeArray(e,t,r){return a.deserializeArray(e,t,r)},function(e){e[e.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",e[e.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",e[e.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"}(t.TransformationType||(t.TransformationType={}))},"./node_modules/class-transformer/metadata/ExcludeMetadata.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){return function ExcludeMetadata(e,t,r){this.target=e,this.propertyName=t,this.options=r}}();t.ExcludeMetadata=s},"./node_modules/class-transformer/metadata/ExposeMetadata.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){return function ExposeMetadata(e,t,r){this.target=e,this.propertyName=t,this.options=r}}();t.ExposeMetadata=s},"./node_modules/class-transformer/metadata/MetadataStorage.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/class-transformer/TransformOperationExecutor.js"),o=function(){function MetadataStorage(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return MetadataStorage.prototype.addTypeMetadata=function(e){this._typeMetadatas.has(e.target)||this._typeMetadatas.set(e.target,new Map),this._typeMetadatas.get(e.target).set(e.propertyName,e)},MetadataStorage.prototype.addTransformMetadata=function(e){this._transformMetadatas.has(e.target)||this._transformMetadatas.set(e.target,new Map),this._transformMetadatas.get(e.target).has(e.propertyName)||this._transformMetadatas.get(e.target).set(e.propertyName,[]),this._transformMetadatas.get(e.target).get(e.propertyName).push(e)},MetadataStorage.prototype.addExposeMetadata=function(e){this._exposeMetadatas.has(e.target)||this._exposeMetadatas.set(e.target,new Map),this._exposeMetadatas.get(e.target).set(e.propertyName,e)},MetadataStorage.prototype.addExcludeMetadata=function(e){this._excludeMetadatas.has(e.target)||this._excludeMetadatas.set(e.target,new Map),this._excludeMetadatas.get(e.target).set(e.propertyName,e)},MetadataStorage.prototype.findTransformMetadatas=function(e,t,r){return this.findMetadatas(this._transformMetadatas,e,t).filter(function(e){return!e.options||(!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?r===s.TransformationType.CLASS_TO_CLASS||r===s.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||r===s.TransformationType.CLASS_TO_PLAIN))})},MetadataStorage.prototype.findExcludeMetadata=function(e,t){return this.findMetadata(this._excludeMetadatas,e,t)},MetadataStorage.prototype.findExposeMetadata=function(e,t){return this.findMetadata(this._exposeMetadatas,e,t)},MetadataStorage.prototype.findExposeMetadataByCustomName=function(e,t){return this.getExposedMetadatas(e).find(function(e){return e.options&&e.options.name===t})},MetadataStorage.prototype.findTypeMetadata=function(e,t){return this.findMetadata(this._typeMetadatas,e,t)},MetadataStorage.prototype.getStrategy=function(e){var t=this._excludeMetadatas.get(e),r=t&&t.get(void 0),s=this._exposeMetadatas.get(e),o=s&&s.get(void 0);return r&&o||!r&&!o?"none":r?"excludeAll":"exposeAll"},MetadataStorage.prototype.getExposedMetadatas=function(e){return this.getMetadata(this._exposeMetadatas,e)},MetadataStorage.prototype.getExcludedMetadatas=function(e){return this.getMetadata(this._excludeMetadatas,e)},MetadataStorage.prototype.getExposedProperties=function(e,t){return this.getExposedMetadatas(e).filter(function(e){return!e.options||(!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?t===s.TransformationType.CLASS_TO_CLASS||t===s.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||t===s.TransformationType.CLASS_TO_PLAIN))}).map(function(e){return e.propertyName})},MetadataStorage.prototype.getExcludedProperties=function(e,t){return this.getExcludedMetadatas(e).filter(function(e){return!e.options||(!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?t===s.TransformationType.CLASS_TO_CLASS||t===s.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||t===s.TransformationType.CLASS_TO_PLAIN))}).map(function(e){return e.propertyName})},MetadataStorage.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},MetadataStorage.prototype.getMetadata=function(e,t){var r,s=e.get(t);s&&(r=Array.from(s.values()).filter(function(e){return void 0!==e.propertyName}));for(var o=[],a=0,i=this.getAncestors(t);a<i.length;a++){var n=i[a],c=e.get(n);if(c){var u=Array.from(c.values()).filter(function(e){return void 0!==e.propertyName});o.push.apply(o,u)}}return o.concat(r||[])},MetadataStorage.prototype.findMetadata=function(e,t,r){var s=e.get(t);if(s){var o=s.get(r);if(o)return o}for(var a=0,i=this.getAncestors(t);a<i.length;a++){var n=i[a],c=e.get(n);if(c){var u=c.get(r);if(u)return u}}},MetadataStorage.prototype.findMetadatas=function(e,t,r){var s,o=e.get(t);o&&(s=o.get(r));for(var a=[],i=0,n=this.getAncestors(t);i<n.length;i++){var c=n[i],u=e.get(c);u&&u.has(r)&&a.push.apply(a,u.get(r))}return a.reverse().concat((s||[]).reverse())},MetadataStorage.prototype.getAncestors=function(e){if(!e)return[];if(!this._ancestorsMap.has(e)){for(var t=[],r=Object.getPrototypeOf(e.prototype.constructor);void 0!==r.prototype;r=Object.getPrototypeOf(r.prototype.constructor))t.push(r);this._ancestorsMap.set(e,t)}return this._ancestorsMap.get(e)},MetadataStorage}();t.MetadataStorage=o},"./node_modules/class-transformer/metadata/TransformMetadata.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){return function TransformMetadata(e,t,r,s){this.target=e,this.propertyName=t,this.transformFn=r,this.options=s}}();t.TransformMetadata=s},"./node_modules/class-transformer/metadata/TypeMetadata.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){return function TypeMetadata(e,t,r,s,o){this.target=e,this.propertyName=t,this.reflectedType=r,this.typeFunction=s,this.options=o}}();t.TypeMetadata=s},"./node_modules/class-transformer/storage.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/class-transformer/metadata/MetadataStorage.js");t.defaultMetadataStorage=new s.MetadataStorage},"./node_modules/events/events.js":function(e,t){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}e.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!function isNumber(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,r,s,o,a,i;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var n=new Error('Uncaught, unspecified "error" event. ('+t+")");throw n.context=t,n}if(isUndefined(r=this._events[e]))return!1;if(isFunction(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(isObject(r))for(o=Array.prototype.slice.call(arguments,1),s=(i=r.slice()).length,a=0;a<s;a++)i[a].apply(this,o);return!0},EventEmitter.prototype.addListener=function(e,t){var r;if(!isFunction(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned&&(r=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){if(!isFunction(t))throw TypeError("listener must be a function");var r=!1;function g(){this.removeListener(e,g),r||(r=!0,t.apply(this,arguments))}return g.listener=t,this.on(e,g),this},EventEmitter.prototype.removeListener=function(e,t){var r,s,o,a;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,s=-1,r===t||isFunction(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(r)){for(a=o;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){s=a;break}if(s<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(isFunction(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){return this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(isFunction(t))return 1;if(t)return t.length}return 0},EventEmitter.listenerCount=function(e,t){return e.listenerCount(t)}},"./node_modules/fast-json-stable-stringify/index.js":function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,s="boolean"==typeof t.cycles&&t.cycles,o=t.cmp&&(r=t.cmp,function(e){return function(t,s){var o={key:t,value:e[t]},a={key:s,value:e[s]};return r(o,a)}}),a=[];return function stringify(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var t,r;if(Array.isArray(e)){for(r="[",t=0;t<e.length;t++)t&&(r+=","),r+=stringify(e[t])||"null";return r+"]"}if(null===e)return"null";if(-1!==a.indexOf(e)){if(s)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var i=a.push(e)-1,n=Object.keys(e).sort(o&&o(e));for(r="",t=0;t<n.length;t++){var c=n[t],u=stringify(e[c]);u&&(r&&(r+=","),r+=JSON.stringify(c)+":"+u)}return a.splice(i,1),"{"+r+"}"}}(e)}},"./node_modules/ieee754/index.js":function(e,t){t.read=function(e,t,r,s,o){var a,i,n=8*o-s-1,c=(1<<n)-1,u=c>>1,l=-7,d=r?o-1:0,h=r?-1:1,f=e[t+d];for(d+=h,a=f&(1<<-l)-1,f>>=-l,l+=n;l>0;a=256*a+e[t+d],d+=h,l-=8);for(i=a&(1<<-l)-1,a>>=-l,l+=s;l>0;i=256*i+e[t+d],d+=h,l-=8);if(0===a)a=1-u;else{if(a===c)return i?NaN:1/0*(f?-1:1);i+=Math.pow(2,s),a-=u}return(f?-1:1)*i*Math.pow(2,a-s)},t.write=function(e,t,r,s,o,a){var i,n,c,u=8*a-o-1,l=(1<<u)-1,d=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=s?0:a-1,p=s?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(n=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),(t+=i+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(i++,c/=2),i+d>=l?(n=0,i=l):i+d>=1?(n=(t*c-1)*Math.pow(2,o),i+=d):(n=t*Math.pow(2,d-1)*Math.pow(2,o),i=0));o>=8;e[r+f]=255&n,f+=p,n/=256,o-=8);for(i=i<<o|n,u+=o;u>0;e[r+f]=255&i,f+=p,i/=256,u-=8);e[r+f-p]|=128*m}},"./node_modules/isarray/index.js":function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},"./node_modules/process/browser.js":function(e,t){var r,s,o=e.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(r===setTimeout)return setTimeout(e,0);if((r===defaultSetTimout||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){r=defaultSetTimout}try{s="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){s=defaultClearTimeout}}();var a,i=[],n=!1,c=-1;function cleanUpNextTick(){n&&a&&(n=!1,a.length?i=a.concat(i):c=-1,i.length&&drainQueue())}function drainQueue(){if(!n){var e=runTimeout(cleanUpNextTick);n=!0;for(var t=i.length;t;){for(a=i,i=[];++c<t;)a&&a[c].run();c=-1,t=i.length}a=null,n=!1,function runClearTimeout(e){if(s===clearTimeout)return clearTimeout(e);if((s===defaultClearTimeout||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{return s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new Item(e,t)),1!==i.length||n||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.prependListener=noop,o.prependOnceListener=noop,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},"./node_modules/reflect-metadata/Reflect.js":function(e,t,r){(function(e,t){
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r;!function(r){!function(s){var o="object"==typeof t?t:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),a=makeExporter(r);function makeExporter(e,t){return function(r,s){"function"!=typeof e[r]&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:s}),t&&t(r,s)}}void 0===o.Reflect?o.Reflect=r:a=makeExporter(o.Reflect,a),function(t){var r=Object.prototype.hasOwnProperty,s="function"==typeof Symbol,o=s&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",a=s&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,n={__proto__:[]}instanceof Array,c=!i&&!n,u={create:i?function(){return MakeDictionary(Object.create(null))}:n?function(){return MakeDictionary({__proto__:null})}:function(){return MakeDictionary({})},has:c?function(e,t){return r.call(e,t)}:function(e,t){return t in e},get:c?function(e,t){return r.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),d="object"==typeof e&&e.env&&"true"===e.env.REFLECT_METADATA_USE_MAP_POLYFILL,h=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function CreateMapPolyfill(){var e={},t=[],r=function(){function MapIterator(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return MapIterator.prototype["@@iterator"]=function(){return this},MapIterator.prototype[a]=function(){return this},MapIterator.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},MapIterator.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},MapIterator.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},MapIterator}();return function(){function Map(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(Map.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Map.prototype.has=function(e){return this._find(e,!1)>=0},Map.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},Map.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},Map.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var s=this._keys.length,o=r+1;o<s;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},Map.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},Map.prototype.keys=function(){return new r(this._keys,this._values,getKey)},Map.prototype.values=function(){return new r(this._keys,this._values,getValue)},Map.prototype.entries=function(){return new r(this._keys,this._values,getEntry)},Map.prototype["@@iterator"]=function(){return this.entries()},Map.prototype[a]=function(){return this.entries()},Map.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},Map}();function getKey(e,t){return e}function getValue(e,t){return t}function getEntry(e,t){return[e,t]}}():Map,f=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function CreateSetPolyfill(){return function(){function Set(){this._map=new h}return Object.defineProperty(Set.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Set.prototype.has=function(e){return this._map.has(e)},Set.prototype.add=function(e){return this._map.set(e,e),this},Set.prototype.delete=function(e){return this._map.delete(e)},Set.prototype.clear=function(){this._map.clear()},Set.prototype.keys=function(){return this._map.keys()},Set.prototype.values=function(){return this._map.values()},Set.prototype.entries=function(){return this._map.entries()},Set.prototype["@@iterator"]=function(){return this.keys()},Set.prototype[a]=function(){return this.keys()},Set}()}():Set,p=new(d||"function"!=typeof WeakMap?function CreateWeakMapPolyfill(){var e=16,t=u.create(),s=CreateUniqueKey();return function(){function WeakMap(){this._key=CreateUniqueKey()}return WeakMap.prototype.has=function(e){var t=GetOrCreateWeakMapTable(e,!1);return void 0!==t&&u.has(t,this._key)},WeakMap.prototype.get=function(e){var t=GetOrCreateWeakMapTable(e,!1);return void 0!==t?u.get(t,this._key):void 0},WeakMap.prototype.set=function(e,t){var r=GetOrCreateWeakMapTable(e,!0);return r[this._key]=t,this},WeakMap.prototype.delete=function(e){var t=GetOrCreateWeakMapTable(e,!1);return void 0!==t&&delete t[this._key]},WeakMap.prototype.clear=function(){this._key=CreateUniqueKey()},WeakMap}();function CreateUniqueKey(){var e;do{e="@@WeakMap@@"+CreateUUID()}while(u.has(t,e));return t[e]=!0,e}function GetOrCreateWeakMapTable(e,t){if(!r.call(e,s)){if(!t)return;Object.defineProperty(e,s,{value:u.create()})}return e[s]}function FillRandomBytes(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function CreateUUID(){var t=function GenRandomBytes(e){if("function"==typeof Uint8Array)return"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):FillRandomBytes(new Uint8Array(e),e);return FillRandomBytes(new Array(e),e)}(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var r="",s=0;s<e;++s){var o=t[s];4!==s&&6!==s&&8!==s||(r+="-"),o<16&&(r+="0"),r+=o.toString(16).toLowerCase()}return r}}():WeakMap);function GetOrCreateMetadataMap(e,t,r){var s=p.get(e);if(IsUndefined(s)){if(!r)return;s=new h,p.set(e,s)}var o=s.get(t);if(IsUndefined(o)){if(!r)return;o=new h,s.set(t,o)}return o}function OrdinaryHasOwnMetadata(e,t,r){var s=GetOrCreateMetadataMap(t,r,!1);return!IsUndefined(s)&&function ToBoolean(e){return!!e}(s.has(e))}function OrdinaryGetOwnMetadata(e,t,r){var s=GetOrCreateMetadataMap(t,r,!1);if(!IsUndefined(s))return s.get(e)}function OrdinaryDefineOwnMetadata(e,t,r,s){var o=GetOrCreateMetadataMap(r,s,!0);o.set(e,t)}function OrdinaryOwnMetadataKeys(e,t){var r=[],s=GetOrCreateMetadataMap(e,t,!1);if(IsUndefined(s))return r;for(var o=s.keys(),i=function GetIterator(e){var t=GetMethod(e,a);if(!IsCallable(t))throw new TypeError;var r=t.call(e);if(!IsObject(r))throw new TypeError;return r}(o),n=0;;){var c=IteratorStep(i);if(!c)return r.length=n,r;var u=c.value;try{r[n]=u}catch(e){try{IteratorClose(i)}finally{throw e}}n++}}function Type(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function IsUndefined(e){return void 0===e}function IsNull(e){return null===e}function IsObject(e){return"object"==typeof e?null!==e:"function"==typeof e}function ToPrimitive(e,t){switch(Type(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r=3===t?"string":5===t?"number":"default",s=GetMethod(e,o);if(void 0!==s){var a=s.call(e,r);if(IsObject(a))throw new TypeError;return a}return function OrdinaryToPrimitive(e,t){if("string"===t){var r=e.toString;if(IsCallable(r)){var s=r.call(e);if(!IsObject(s))return s}var o=e.valueOf;if(IsCallable(o)){var s=o.call(e);if(!IsObject(s))return s}}else{var o=e.valueOf;if(IsCallable(o)){var s=o.call(e);if(!IsObject(s))return s}var a=e.toString;if(IsCallable(a)){var s=a.call(e);if(!IsObject(s))return s}}throw new TypeError}(e,"default"===r?"number":r)}function ToPropertyKey(e){var t=ToPrimitive(e,3);return function IsSymbol(e){return"symbol"==typeof e}(t)?t:function ToString(e){return""+e}(t)}function IsArray(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function IsCallable(e){return"function"==typeof e}function IsConstructor(e){return"function"==typeof e}function GetMethod(e,t){var r=e[t];if(null!=r){if(!IsCallable(r))throw new TypeError;return r}}function IteratorStep(e){var t=e.next();return!t.done&&t}function IteratorClose(e){var t=e.return;t&&t.call(e)}function OrdinaryGetPrototypeOf(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===l)return t;if(t!==l)return t;var r=e.prototype,s=r&&Object.getPrototypeOf(r);if(null==s||s===Object.prototype)return t;var o=s.constructor;return"function"!=typeof o?t:o===e?t:o}function MakeDictionary(e){return e.__=void 0,delete e.__,e}t("decorate",function decorate(e,t,r,s){if(IsUndefined(r)){if(!IsArray(e))throw new TypeError;if(!IsConstructor(t))throw new TypeError;return function DecorateConstructor(e,t){for(var r=e.length-1;r>=0;--r){var s=e[r],o=s(t);if(!IsUndefined(o)&&!IsNull(o)){if(!IsConstructor(o))throw new TypeError;t=o}}return t}(e,t)}if(!IsArray(e))throw new TypeError;if(!IsObject(t))throw new TypeError;if(!IsObject(s)&&!IsUndefined(s)&&!IsNull(s))throw new TypeError;return IsNull(s)&&(s=void 0),r=ToPropertyKey(r),function DecorateProperty(e,t,r,s){for(var o=e.length-1;o>=0;--o){var a=e[o],i=a(t,r,s);if(!IsUndefined(i)&&!IsNull(i)){if(!IsObject(i))throw new TypeError;s=i}}return s}(e,t,r,s)}),t("metadata",function metadata(e,t){return function decorator(r,s){if(!IsObject(r))throw new TypeError;if(!IsUndefined(s)&&!function IsPropertyKey(e){switch(Type(e)){case 3:case 4:return!0;default:return!1}}(s))throw new TypeError;OrdinaryDefineOwnMetadata(e,t,r,s)}}),t("defineMetadata",function defineMetadata(e,t,r,s){if(!IsObject(r))throw new TypeError;IsUndefined(s)||(s=ToPropertyKey(s));return OrdinaryDefineOwnMetadata(e,t,r,s)}),t("hasMetadata",function hasMetadata(e,t,r){if(!IsObject(t))throw new TypeError;IsUndefined(r)||(r=ToPropertyKey(r));return function OrdinaryHasMetadata(e,t,r){var s=OrdinaryHasOwnMetadata(e,t,r);if(s)return!0;var o=OrdinaryGetPrototypeOf(t);if(!IsNull(o))return OrdinaryHasMetadata(e,o,r);return!1}(e,t,r)}),t("hasOwnMetadata",function hasOwnMetadata(e,t,r){if(!IsObject(t))throw new TypeError;IsUndefined(r)||(r=ToPropertyKey(r));return OrdinaryHasOwnMetadata(e,t,r)}),t("getMetadata",function getMetadata(e,t,r){if(!IsObject(t))throw new TypeError;IsUndefined(r)||(r=ToPropertyKey(r));return function OrdinaryGetMetadata(e,t,r){var s=OrdinaryHasOwnMetadata(e,t,r);if(s)return OrdinaryGetOwnMetadata(e,t,r);var o=OrdinaryGetPrototypeOf(t);if(!IsNull(o))return OrdinaryGetMetadata(e,o,r);return}(e,t,r)}),t("getOwnMetadata",function getOwnMetadata(e,t,r){if(!IsObject(t))throw new TypeError;IsUndefined(r)||(r=ToPropertyKey(r));return OrdinaryGetOwnMetadata(e,t,r)}),t("getMetadataKeys",function getMetadataKeys(e,t){if(!IsObject(e))throw new TypeError;IsUndefined(t)||(t=ToPropertyKey(t));return function OrdinaryMetadataKeys(e,t){var r=OrdinaryOwnMetadataKeys(e,t);var s=OrdinaryGetPrototypeOf(e);if(null===s)return r;var o=OrdinaryMetadataKeys(s,t);if(o.length<=0)return r;if(r.length<=0)return o;var a=new f;var i=[];for(var n=0,c=r;n<c.length;n++){var u=c[n],l=a.has(u);l||(a.add(u),i.push(u))}for(var d=0,h=o;d<h.length;d++){var u=h[d],l=a.has(u);l||(a.add(u),i.push(u))}return i}(e,t)}),t("getOwnMetadataKeys",function getOwnMetadataKeys(e,t){if(!IsObject(e))throw new TypeError;IsUndefined(t)||(t=ToPropertyKey(t));return OrdinaryOwnMetadataKeys(e,t)}),t("deleteMetadata",function deleteMetadata(e,t,r){if(!IsObject(t))throw new TypeError;IsUndefined(r)||(r=ToPropertyKey(r));var s=GetOrCreateMetadataMap(t,r,!1);if(IsUndefined(s))return!1;if(!s.delete(e))return!1;if(s.size>0)return!0;var o=p.get(t);return o.delete(r),o.size>0||(p.delete(t),!0)})}(a)}()}(r||(r={}))}).call(this,r("./node_modules/process/browser.js"),r("./node_modules/webpack/buildin/global.js"))},"./node_modules/safe-buffer/index.js":function(e,t,r){var s=r("./node_modules/buffer/index.js"),o=s.Buffer;function copyProps(e,t){for(var r in e)t[r]=e[r]}function SafeBuffer(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=s:(copyProps(s,t),t.Buffer=SafeBuffer),copyProps(o,SafeBuffer),SafeBuffer.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},SafeBuffer.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var s=o(e);return void 0!==t?"string"==typeof r?s.fill(t,r):s.fill(t):s.fill(0),s},SafeBuffer.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},SafeBuffer.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s.SlowBuffer(e)}},"./node_modules/string_decoder/lib/string_decoder.js":function(e,t,r){"use strict";var s=r("./node_modules/safe-buffer/index.js").Buffer,o=s.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(e){var t;switch(this.encoding=function normalizeEncoding(e){var t=function _normalizeEncoding(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(s.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,t=4;break;case"utf8":this.fillLast=utf8FillLast,t=4;break;case"base64":this.text=base64Text,this.end=base64End,t=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(t)}function utf8CheckByte(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function utf8FillLast(e){var t=this.lastTotal-this.lastNeed,r=function utf8CheckExtraBytes(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(r);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(r+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(r+2)}}(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function utf16Text(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var s=r.charCodeAt(r.length-1);if(s>=55296&&s<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function utf16End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function base64Text(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function base64End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function simpleWrite(e){return e.toString(this.encoding)}function simpleEnd(e){return e&&e.length?this.write(e):""}t.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},StringDecoder.prototype.end=function utf8End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t},StringDecoder.prototype.text=function utf8Text(e,t){var r=function utf8CheckIncomplete(e,t,r){var s=t.length-1;if(s<r)return 0;var o=utf8CheckByte(t[s]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--s<r)return 0;if((o=utf8CheckByte(t[s]))>=0)return o>0&&(e.lastNeed=o-2),o;if(--s<r)return 0;if((o=utf8CheckByte(t[s]))>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var s=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,s),e.toString("utf8",t,s)},StringDecoder.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},"./node_modules/uri-js/dist/es5/uri.all.js":function(e,t,r){
/** @license URI.js v4.2.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function merge(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var s=t.length-1,o=1;o<s;++o)t[o]=t[o].slice(1,-1);return t[s]=t[s].slice(1),t.join("")}return t[0]}function subexp(e){return"(?:"+e+")"}function typeOf(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function toUpperCase(e){return e.toUpperCase()}function buildExps(e){var t=merge("[0-9]","[A-Fa-f]"),r=subexp(subexp("%[EFef]"+t+"%"+t+t+"%"+t+t)+"|"+subexp("%[89A-Fa-f]"+t+"%"+t+t)+"|"+subexp("%"+t+t)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",o=merge("[\\:\\/\\?\\#\\[\\]\\@]",s),a=e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",i=e?"[\\uE000-\\uF8FF]":"[]",n=merge("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",a),c=subexp("[A-Za-z]"+merge("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),u=subexp(subexp(r+"|"+merge(n,s,"[\\:]"))+"*"),l=(subexp(subexp("25[0-5]")+"|"+subexp("2[0-4][0-9]")+"|"+subexp("1[0-9][0-9]")+"|"+subexp("[1-9][0-9]")+"|[0-9]"),subexp(subexp("25[0-5]")+"|"+subexp("2[0-4][0-9]")+"|"+subexp("1[0-9][0-9]")+"|"+subexp("0?[1-9][0-9]")+"|0?0?[0-9]")),d=subexp(l+"\\."+l+"\\."+l+"\\."+l),h=subexp(t+"{1,4}"),f=subexp(subexp(h+"\\:"+h)+"|"+d),p=subexp(subexp(h+"\\:")+"{6}"+f),m=subexp("\\:\\:"+subexp(h+"\\:")+"{5}"+f),v=subexp(subexp(h)+"?\\:\\:"+subexp(h+"\\:")+"{4}"+f),g=subexp(subexp(subexp(h+"\\:")+"{0,1}"+h)+"?\\:\\:"+subexp(h+"\\:")+"{3}"+f),y=subexp(subexp(subexp(h+"\\:")+"{0,2}"+h)+"?\\:\\:"+subexp(h+"\\:")+"{2}"+f),_=subexp(subexp(subexp(h+"\\:")+"{0,3}"+h)+"?\\:\\:"+h+"\\:"+f),b=subexp(subexp(subexp(h+"\\:")+"{0,4}"+h)+"?\\:\\:"+f),S=subexp(subexp(subexp(h+"\\:")+"{0,5}"+h)+"?\\:\\:"+h),E=subexp(subexp(subexp(h+"\\:")+"{0,6}"+h)+"?\\:\\:"),w=subexp([p,m,v,g,y,_,b,S,E].join("|")),P=subexp(subexp(n+"|"+r)+"+"),x=(subexp(w+"\\%25"+P),subexp(w+subexp("\\%25|\\%(?!"+t+"{2})")+P)),C=subexp("[vV]"+t+"+\\."+merge(n,s,"[\\:]")+"+"),I=subexp("\\["+subexp(x+"|"+w+"|"+C)+"\\]"),M=subexp(subexp(r+"|"+merge(n,s))+"*"),D=subexp(I+"|"+d+"(?!"+M+")|"+M),j=subexp("[0-9]*"),A=subexp(subexp(u+"@")+"?"+D+subexp("\\:"+j)+"?"),O=subexp(r+"|"+merge(n,s,"[\\:\\@]")),L=subexp(O+"*"),T=subexp(O+"+"),B=subexp(subexp(r+"|"+merge(n,s,"[\\@]"))+"+"),R=subexp(subexp("\\/"+L)+"*"),F=subexp("\\/"+subexp(T+R)+"?"),$=subexp(B+R),k=subexp(T+R),N="(?!"+O+")",U=(subexp(R+"|"+F+"|"+$+"|"+k+"|"+N),subexp(subexp(O+"|"+merge("[\\/\\?]",i))+"*")),V=subexp(subexp(O+"|[\\/\\?]")+"*"),z=subexp(subexp("\\/\\/"+A+R)+"|"+F+"|"+k+"|"+N),q=subexp(c+"\\:"+z+subexp("\\?"+U)+"?"+subexp("\\#"+V)+"?"),W=subexp(subexp("\\/\\/"+A+R)+"|"+F+"|"+$+"|"+N),H=subexp(W+subexp("\\?"+U)+"?"+subexp("\\#"+V)+"?");return subexp(q+"|"+H),subexp(c+"\\:"+z+subexp("\\?"+U)+"?"),subexp(subexp("\\/\\/("+subexp("("+u+")@")+"?("+D+")"+subexp("\\:("+j+")")+"?)")+"?("+R+"|"+F+"|"+k+"|"+N+")"),subexp("\\?("+U+")"),subexp("\\#("+V+")"),subexp(subexp("\\/\\/("+subexp("("+u+")@")+"?("+D+")"+subexp("\\:("+j+")")+"?)")+"?("+R+"|"+F+"|"+$+"|"+N+")"),subexp("\\?("+U+")"),subexp("\\#("+V+")"),subexp(subexp("\\/\\/("+subexp("("+u+")@")+"?("+D+")"+subexp("\\:("+j+")")+"?)")+"?("+R+"|"+F+"|"+k+"|"+N+")"),subexp("\\?("+U+")"),subexp("\\#("+V+")"),subexp("("+u+")@"),subexp("\\:("+j+")"),{NOT_SCHEME:new RegExp(merge("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(merge("[^\\%\\:]",n,s),"g"),NOT_HOST:new RegExp(merge("[^\\%\\[\\]\\:]",n,s),"g"),NOT_PATH:new RegExp(merge("[^\\%\\/\\:\\@]",n,s),"g"),NOT_PATH_NOSCHEME:new RegExp(merge("[^\\%\\/\\@]",n,s),"g"),NOT_QUERY:new RegExp(merge("[^\\%]",n,s,"[\\:\\@\\/\\?]",i),"g"),NOT_FRAGMENT:new RegExp(merge("[^\\%]",n,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(merge("[^]",n,s),"g"),UNRESERVED:new RegExp(n,"g"),OTHER_CHARS:new RegExp(merge("[^\\%]",n,o),"g"),PCT_ENCODED:new RegExp(r,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+w+")"+subexp(subexp("\\%25|\\%(?!"+t+"{2})")+"("+P+")")+"?\\]?$")}}var t=buildExps(!1),r=buildExps(!0),s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var r=[],s=!0,o=!1,a=void 0;try{for(var i,n=e[Symbol.iterator]();!(s=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{!s&&n.return&&n.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=2147483647,a=/^xn--/,i=/[^\0-\x7E]/,n=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u=Math.floor,l=String.fromCharCode;function error$1(e){throw new RangeError(c[e])}function mapDomain(e,t){var r=e.split("@"),s="";r.length>1&&(s=r[0]+"@",e=r[1]);var o=(e=e.replace(n,".")).split("."),a=function map(e,t){for(var r=[],s=e.length;s--;)r[s]=t(e[s]);return r}(o,t).join(".");return s+a}function ucs2decode(e){for(var t=[],r=0,s=e.length;r<s;){var o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<s){var a=e.charCodeAt(r++);56320==(64512&a)?t.push(((1023&o)<<10)+(1023&a)+65536):(t.push(o),r--)}else t.push(o)}return t}var d=function basicToDigit(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36},h=function digitToBasic(e,t){return e+22+75*(e<26)-((0!=t)<<5)},f=function adapt(e,t,r){var s=0;for(e=r?u(e/700):e>>1,e+=u(e/t);e>455;s+=36)e=u(e/35);return u(s+36*e/(e+38))},p=function decode(e){var t=[],r=e.length,s=0,a=128,i=72,n=e.lastIndexOf("-");n<0&&(n=0);for(var c=0;c<n;++c)e.charCodeAt(c)>=128&&error$1("not-basic"),t.push(e.charCodeAt(c));for(var l=n>0?n+1:0;l<r;){for(var h=s,p=1,m=36;;m+=36){l>=r&&error$1("invalid-input");var v=d(e.charCodeAt(l++));(v>=36||v>u((o-s)/p))&&error$1("overflow"),s+=v*p;var g=m<=i?1:m>=i+26?26:m-i;if(v<g)break;var y=36-g;p>u(o/y)&&error$1("overflow"),p*=y}var _=t.length+1;i=f(s-h,_,0==h),u(s/_)>o-a&&error$1("overflow"),a+=u(s/_),s%=_,t.splice(s++,0,a)}return String.fromCodePoint.apply(String,t)},m=function encode(e){var t=[],r=(e=ucs2decode(e)).length,s=128,a=0,i=72,n=!0,c=!1,d=void 0;try{for(var p,m=e[Symbol.iterator]();!(n=(p=m.next()).done);n=!0){var v=p.value;v<128&&t.push(l(v))}}catch(e){c=!0,d=e}finally{try{!n&&m.return&&m.return()}finally{if(c)throw d}}var g=t.length,y=g;for(g&&t.push("-");y<r;){var _=o,b=!0,S=!1,E=void 0;try{for(var w,P=e[Symbol.iterator]();!(b=(w=P.next()).done);b=!0){var x=w.value;x>=s&&x<_&&(_=x)}}catch(e){S=!0,E=e}finally{try{!b&&P.return&&P.return()}finally{if(S)throw E}}var C=y+1;_-s>u((o-a)/C)&&error$1("overflow"),a+=(_-s)*C,s=_;var I=!0,M=!1,D=void 0;try{for(var j,A=e[Symbol.iterator]();!(I=(j=A.next()).done);I=!0){var O=j.value;if(O<s&&++a>o&&error$1("overflow"),O==s){for(var L=a,T=36;;T+=36){var B=T<=i?1:T>=i+26?26:T-i;if(L<B)break;var R=L-B,F=36-B;t.push(l(h(B+R%F,0))),L=u(R/F)}t.push(l(h(L,0))),i=f(a,C,y==g),a=0,++y}}}catch(e){M=!0,D=e}finally{try{!I&&A.return&&A.return()}finally{if(M)throw D}}++a,++s}return t.join("")},v={version:"2.1.0",ucs2:{decode:ucs2decode,encode:function ucs2encode(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))}},decode:p,encode:m,toASCII:function toASCII(e){return mapDomain(e,function(e){return i.test(e)?"xn--"+m(e):e})},toUnicode:function toUnicode(e){return mapDomain(e,function(e){return a.test(e)?p(e.slice(4).toLowerCase()):e})}},g={};function pctEncChar(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function pctDecChars(e){for(var t="",r=0,s=e.length;r<s;){var o=parseInt(e.substr(r+1,2),16);if(o<128)t+=String.fromCharCode(o),r+=3;else if(o>=194&&o<224){if(s-r>=6){var a=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&o)<<6|63&a)}else t+=e.substr(r,6);r+=6}else if(o>=224){if(s-r>=9){var i=parseInt(e.substr(r+4,2),16),n=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&o)<<12|(63&i)<<6|63&n)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function _normalizeComponentEncoding(e,t){function decodeUnreserved(e){var r=pctDecChars(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,decodeUnreserved).replace(t.NOT_USERINFO,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(t.NOT_HOST,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,decodeUnreserved).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,decodeUnreserved).replace(t.NOT_QUERY,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,decodeUnreserved).replace(t.NOT_FRAGMENT,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),e}function _stripLeadingZeros(e){return e.replace(/^0*(.*)/,"$1")||"0"}function _normalizeIPv4(e,t){var r=e.match(t.IPV4ADDRESS)||[],o=s(r,2),a=o[1];return a?a.split(".").map(_stripLeadingZeros).join("."):e}function _normalizeIPv6(e,t){var r=e.match(t.IPV6ADDRESS)||[],o=s(r,3),a=o[1],i=o[2];if(a){for(var n=a.toLowerCase().split("::").reverse(),c=s(n,2),u=c[0],l=c[1],d=l?l.split(":").map(_stripLeadingZeros):[],h=u.split(":").map(_stripLeadingZeros),f=t.IPV4ADDRESS.test(h[h.length-1]),p=f?7:8,m=h.length-p,v=Array(p),g=0;g<p;++g)v[g]=d[g]||h[m+g]||"";f&&(v[p-1]=_normalizeIPv4(v[p-1],t));var y=v.reduce(function(e,t,r){if(!t||"0"===t){var s=e[e.length-1];s&&s.index+s.length===r?s.length++:e.push({index:r,length:1})}return e},[]),_=y.sort(function(e,t){return t.length-e.length})[0],b=void 0;if(_&&_.length>1){var S=v.slice(0,_.index),E=v.slice(_.index+_.length);b=S.join(":")+"::"+E.join(":")}else b=v.join(":");return i&&(b+="%"+i),b}return e}var y=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,_=void 0==="".match(/(){0}/)[1];function parse(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={},a=!1!==s.iri?r:t;"suffix"===s.reference&&(e=(s.scheme?s.scheme+":":"")+"//"+e);var i=e.match(y);if(i){_?(o.scheme=i[1],o.userinfo=i[3],o.host=i[4],o.port=parseInt(i[5],10),o.path=i[6]||"",o.query=i[7],o.fragment=i[8],isNaN(o.port)&&(o.port=i[5])):(o.scheme=i[1]||void 0,o.userinfo=-1!==e.indexOf("@")?i[3]:void 0,o.host=-1!==e.indexOf("//")?i[4]:void 0,o.port=parseInt(i[5],10),o.path=i[6]||"",o.query=-1!==e.indexOf("?")?i[7]:void 0,o.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(o.port)&&(o.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),o.host&&(o.host=_normalizeIPv6(_normalizeIPv4(o.host,a),a)),void 0!==o.scheme||void 0!==o.userinfo||void 0!==o.host||void 0!==o.port||o.path||void 0!==o.query?void 0===o.scheme?o.reference="relative":void 0===o.fragment?o.reference="absolute":o.reference="uri":o.reference="same-document",s.reference&&"suffix"!==s.reference&&s.reference!==o.reference&&(o.error=o.error||"URI is not a "+s.reference+" reference.");var n=g[(s.scheme||o.scheme||"").toLowerCase()];if(s.unicodeSupport||n&&n.unicodeSupport)_normalizeComponentEncoding(o,a);else{if(o.host&&(s.domainHost||n&&n.domainHost))try{o.host=v.toASCII(o.host.replace(a.PCT_ENCODED,pctDecChars).toLowerCase())}catch(e){o.error=o.error||"Host's domain name can not be converted to ASCII via punycode: "+e}_normalizeComponentEncoding(o,t)}n&&n.parse&&n.parse(o,s)}else o.error=o.error||"URI can not be parsed.";return o}var b=/^\.\.?\//,S=/^\/\.(\/|$)/,E=/^\/\.\.(\/|$)/,w=/^\/?(?:.|\n)*?(?=\/|$)/;function removeDotSegments(e){for(var t=[];e.length;)if(e.match(b))e=e.replace(b,"");else if(e.match(S))e=e.replace(S,"/");else if(e.match(E))e=e.replace(E,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(w);if(!r)throw new Error("Unexpected dot segment condition");var s=r[0];e=e.slice(s.length),t.push(s)}return t.join("")}function serialize(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s.iri?r:t,a=[],i=g[(s.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,s),e.host)if(o.IPV6ADDRESS.test(e.host));else if(s.domainHost||i&&i.domainHost)try{e.host=s.iri?v.toUnicode(e.host):v.toASCII(e.host.replace(o.PCT_ENCODED,pctDecChars).toLowerCase())}catch(t){e.error=e.error||"Host's domain name can not be converted to "+(s.iri?"Unicode":"ASCII")+" via punycode: "+t}_normalizeComponentEncoding(e,o),"suffix"!==s.reference&&e.scheme&&(a.push(e.scheme),a.push(":"));var n=function _recomposeAuthority(e,s){var o=!1!==s.iri?r:t,a=[];return void 0!==e.userinfo&&(a.push(e.userinfo),a.push("@")),void 0!==e.host&&a.push(_normalizeIPv6(_normalizeIPv4(String(e.host),o),o).replace(o.IPV6ADDRESS,function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"})),"number"==typeof e.port&&(a.push(":"),a.push(e.port.toString(10))),a.length?a.join(""):void 0}(e,s);if(void 0!==n&&("suffix"!==s.reference&&a.push("//"),a.push(n),e.path&&"/"!==e.path.charAt(0)&&a.push("/")),void 0!==e.path){var c=e.path;s.absolutePath||i&&i.absolutePath||(c=removeDotSegments(c)),void 0===n&&(c=c.replace(/^\/\//,"/%2F")),a.push(c)}return void 0!==e.query&&(a.push("?"),a.push(e.query)),void 0!==e.fragment&&(a.push("#"),a.push(e.fragment)),a.join("")}function resolveComponents(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments[3],o={};return s||(e=parse(serialize(e,r),r),t=parse(serialize(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=removeDotSegments(t.path||""),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=removeDotSegments(t.path||""),o.query=t.query):(t.path?("/"===t.path.charAt(0)?o.path=removeDotSegments(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path:o.path="/"+t.path,o.path=removeDotSegments(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function unescapeComponent(e,s){return e&&e.toString().replace(s&&s.iri?r.PCT_ENCODED:t.PCT_ENCODED,pctDecChars)}var P={scheme:"http",domainHost:!0,parse:function parse(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function serialize(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},x={scheme:"https",domainHost:P.domainHost,parse:P.parse,serialize:P.serialize},C={},I="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",M="[0-9A-Fa-f]",D=subexp(subexp("%[EFef][0-9A-Fa-f]%"+M+M+"%"+M+M)+"|"+subexp("%[89A-Fa-f][0-9A-Fa-f]%"+M+M)+"|"+subexp("%"+M+M)),j=merge("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),A=new RegExp(I,"g"),O=new RegExp(D,"g"),L=new RegExp(merge("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',j),"g"),T=new RegExp(merge("[^]",I,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),B=T;function decodeUnreserved(e){var t=pctDecChars(e);return t.match(A)?t:e}var R={scheme:"mailto",parse:function parse$$1(e,t){var r=e,s=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var o=!1,a={},i=r.query.split("&"),n=0,c=i.length;n<c;++n){var u=i[n].split("=");switch(u[0]){case"to":for(var l=u[1].split(","),d=0,h=l.length;d<h;++d)s.push(l[d]);break;case"subject":r.subject=unescapeComponent(u[1],t);break;case"body":r.body=unescapeComponent(u[1],t);break;default:o=!0,a[unescapeComponent(u[0],t)]=unescapeComponent(u[1],t)}}o&&(r.headers=a)}r.query=void 0;for(var f=0,p=s.length;f<p;++f){var m=s[f].split("@");if(m[0]=unescapeComponent(m[0]),t.unicodeSupport)m[1]=unescapeComponent(m[1],t).toLowerCase();else try{m[1]=v.toASCII(unescapeComponent(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}s[f]=m.join("@")}return r},serialize:function serialize$$1(e,t){var r=e,s=function toArray(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}(e.to);if(s){for(var o=0,a=s.length;o<a;++o){var i=String(s[o]),n=i.lastIndexOf("@"),c=i.slice(0,n).replace(O,decodeUnreserved).replace(O,toUpperCase).replace(L,pctEncChar),u=i.slice(n+1);try{u=t.iri?v.toUnicode(u):v.toASCII(unescapeComponent(u,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}s[o]=c+"@"+u}r.path=s.join(",")}var l=e.headers=e.headers||{};e.subject&&(l.subject=e.subject),e.body&&(l.body=e.body);var d=[];for(var h in l)l[h]!==C[h]&&d.push(h.replace(O,decodeUnreserved).replace(O,toUpperCase).replace(T,pctEncChar)+"="+l[h].replace(O,decodeUnreserved).replace(O,toUpperCase).replace(B,pctEncChar));return d.length&&(r.query=d.join("&")),r}},F=/^([^\:]+)\:(.*)/,$={scheme:"urn",parse:function parse$$1(e,t){var r=e.path&&e.path.match(F),s=e;if(r){var o=t.scheme||s.scheme||"urn",a=r[1].toLowerCase(),i=r[2],n=o+":"+(t.nid||a),c=g[n];s.nid=a,s.nss=i,s.path=void 0,c&&(s=c.parse(s,t))}else s.error=s.error||"URN can not be parsed.";return s},serialize:function serialize$$1(e,t){var r=t.scheme||e.scheme||"urn",s=e.nid,o=r+":"+(t.nid||s),a=g[o];a&&(e=a.serialize(e,t));var i=e,n=e.nss;return i.path=(s||t.nid)+":"+n,i}},k=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,N={scheme:"urn:uuid",parse:function parse(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(k)||(r.error=r.error||"UUID is not valid."),r},serialize:function serialize(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};g[P.scheme]=P,g[x.scheme]=x,g[R.scheme]=R,g[$.scheme]=$,g[N.scheme]=N,e.SCHEMES=g,e.pctEncChar=pctEncChar,e.pctDecChars=pctDecChars,e.parse=parse,e.removeDotSegments=removeDotSegments,e.serialize=serialize,e.resolveComponents=resolveComponents,e.resolve=function resolve(e,t,r){var s=function assign(e,t){var r=e;if(t)for(var s in t)r[s]=t[s];return r}({scheme:"null"},r);return serialize(resolveComponents(parse(e,s),parse(t,s),s,!0),s)},e.normalize=function normalize(e,t){return"string"==typeof e?e=serialize(parse(e,t),t):"object"===typeOf(e)&&(e=parse(serialize(e,t),t)),e},e.equal=function equal(e,t,r){return"string"==typeof e?e=serialize(parse(e,r),r):"object"===typeOf(e)&&(e=serialize(e,r)),"string"==typeof t?t=serialize(parse(t,r),r):"object"===typeOf(t)&&(t=serialize(t,r)),e===t},e.escapeComponent=function escapeComponent(e,s){return e&&e.toString().replace(s&&s.iri?r.ESCAPE:t.ESCAPE,pctEncChar)},e.unescapeComponent=unescapeComponent,Object.defineProperty(e,"__esModule",{value:!0})}(t)},"./node_modules/webpack/buildin/global.js":function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},"./src/client/ButtplugBrowserWebsocketConnector.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(s.next(e))}catch(e){a(e)}}function rejected(e){try{step(s.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r("./node_modules/events/events.js"),a=r("./src/core/MessageUtils.ts"),i=r("./src/client/ButtplugMessageSorter.ts");t.ButtplugBrowserWebsocketConnector=class ButtplugBrowserWebsocketConnector extends o.EventEmitter{constructor(e){super(),this._url=e,this._sorter=new i.ButtplugMessageSorter,this.Connect=(()=>s(this,void 0,void 0,function*(){const e=new WebSocket(this._url);let t,r;const o=new Promise((e,s)=>{t=e,r=s}),a=e=>r();return e.addEventListener("open",r=>s(this,void 0,void 0,function*(){this._ws=e,this._ws.addEventListener("message",e=>{this.ParseIncomingMessage(e)}),this._ws.removeEventListener("close",a),this._ws.addEventListener("close",this.Disconnect),t()})),e.addEventListener("close",a),o})),this.Disconnect=(()=>{this.Connected&&(this._ws.close(),this._ws=void 0,this.emit("disconnect"))}),this.Send=(e=>s(this,void 0,void 0,function*(){if(!this.Connected)throw new Error("ButtplugClient not connected");const t=this._sorter.PrepareOutgoingMessage(e);return this._ws.send("["+e.toJSON()+"]"),yield t})),this.ParseIncomingMessage=(e=>{if("string"==typeof e.data){const t=a.FromJSON(e.data),r=this._sorter.ParseIncomingMessages(t);this.emit("message",r)}else if(e.data instanceof Blob){const t=new FileReader;t.addEventListener("load",e=>{this.OnReaderLoad(e)}),t.readAsText(e.data)}})}get Connected(){return void 0!==this._ws}OnReaderLoad(e){const t=a.FromJSON(e.target.result),r=this._sorter.ParseIncomingMessages(t);this.emit("message",r)}}},"./src/client/ButtplugClientConnectorException.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r("./src/core/Exceptions.ts"),o=r("./src/core/Messages.ts");t.ButtplugClientConnectorException=class ButtplugClientConnectorException extends s.ButtplugException{constructor(e){super(e,o.ErrorClass.ERROR_UNKNOWN)}}},"./src/client/ButtplugClientDevice.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(s.next(e))}catch(e){a(e)}}function rejected(e){try{step(s.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r("./src/core/Messages.ts"),a=r("./src/core/Exceptions.ts");class ButtplugClientDevice{constructor(e,t,r,s){this._index=e,this._name=t,this._sendClosure=s,this.allowedMsgs=new Map;for(const e of Object.keys(r))this.allowedMsgs.set(e,r[e])}get Name(){return this._name}get Index(){return this._index}get AllowedMessages(){return Array.from(this.allowedMsgs.keys())}static fromMsg(e,t){return new ButtplugClientDevice(e.DeviceIndex,e.DeviceName,e.DeviceMessages,t)}CheckAllowedMessageType(e){if(-1===this.AllowedMessages.indexOf(e))throw new a.ButtplugDeviceException(`Message ${e} does not exist on device ${this._name}`)}MessageAttributes(e){return this.CheckAllowedMessageType(e),this.allowedMsgs.get(e)}SendMessageAsync(e){return s(this,void 0,void 0,function*(){yield this._sendClosure(this,e)})}SendVibrateCmd(e){return s(this,void 0,void 0,function*(){let t;if(this.CheckAllowedMessageType(o.VibrateCmd.name),"number"==typeof e){const r=this.MessageAttributes(o.VibrateCmd.name).FeatureCount;t=o.VibrateCmd.Create(this._index,new Array(r).fill(e))}else{if(!Array.isArray(e))throw new a.ButtplugDeviceException("SendVibrateCmd can only take numbers or arrays of numbers.");t=o.VibrateCmd.Create(this._index,e),this.CheckGenericSubcommandList(o.SpeedSubcommand.name,t.Speeds,this.MessageAttributes(o.VibrateCmd.name).FeatureCount)}yield this.SendMessageAsync(t)})}SendRotateCmd(e,t){return s(this,void 0,void 0,function*(){let r;if(this.CheckAllowedMessageType(o.RotateCmd.name),"number"==typeof e){const s=this.MessageAttributes(o.RotateCmd.name).FeatureCount;r=o.RotateCmd.Create(this._index,new Array(s).fill([e,t]))}else{if(!Array.isArray(e))throw new a.ButtplugDeviceException("SendRotateCmd can only take a number and boolean, or an array of number/boolean tuples");r=o.RotateCmd.Create(this._index,e),this.CheckGenericSubcommandList(o.SpeedSubcommand.name,r.Rotations,this.MessageAttributes(o.RotateCmd.name).FeatureCount)}yield this.SendMessageAsync(r)})}SendLinearCmd(e,t){return s(this,void 0,void 0,function*(){let r;if(this.CheckAllowedMessageType(o.LinearCmd.name),"number"==typeof e){const s=this.MessageAttributes(o.LinearCmd.name).FeatureCount;r=o.LinearCmd.Create(this._index,new Array(s).fill([e,t]))}else{if(!Array.isArray(e))throw new a.ButtplugDeviceException("SendLinearCmd can only take a number and number, or an array of number/number tuples");r=o.LinearCmd.Create(this._index,e),this.CheckGenericSubcommandList(o.SpeedSubcommand.name,r.Vectors,this.MessageAttributes(o.LinearCmd.name).FeatureCount)}yield this.SendMessageAsync(r)})}SendFleshlightLaunchFW12Cmd(e,t){return s(this,void 0,void 0,function*(){this.CheckAllowedMessageType(o.FleshlightLaunchFW12Cmd.name),yield this.SendMessageAsync(new o.FleshlightLaunchFW12Cmd(e,t,this._index))})}SendLovenseCmd(e){return s(this,void 0,void 0,function*(){this.CheckAllowedMessageType(o.LovenseCmd.name),yield this.SendMessageAsync(new o.LovenseCmd(e,this._index))})}SendVorzeA10CycloneCmd(e,t){return s(this,void 0,void 0,function*(){this.CheckAllowedMessageType(o.VorzeA10CycloneCmd.name),yield this.SendMessageAsync(new o.VorzeA10CycloneCmd(e,t,this._index))})}SendStopDeviceCmd(){return s(this,void 0,void 0,function*(){this.CheckAllowedMessageType(o.StopDeviceCmd.name),yield this.SendMessageAsync(new o.StopDeviceCmd(this._index))})}SendKiirooCmd(e){return s(this,void 0,void 0,function*(){this.CheckAllowedMessageType(o.KiirooCmd.name),yield this.SendMessageAsync(new o.KiirooCmd(e,this._index))})}CheckGenericSubcommandList(e,t,r){if(0===t.length||t.length>r){if(1===r)throw new a.ButtplugDeviceException(`${e} requires 1 subcommand for this device, ${t.length} present.`);throw new a.ButtplugDeviceException(`${e} requires between 1 and ${r} subcommands for this device, ${t.length} present.`)}for(const s of t)if(s.Index>=r)throw new a.ButtplugDeviceException(`Index ${s.Index} is out of bounds for ${e} for this device.`)}}t.ButtplugClientDevice=ButtplugClientDevice},"./src/client/ButtplugEmbeddedServerConnector.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(s.next(e))}catch(e){a(e)}}function rejected(e){try{step(s.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r("./node_modules/events/events.js"),a=r("./src/server/ButtplugServer.ts"),i=r("./src/client/ButtplugClientConnectorException.ts");t.ButtplugEmbeddedServerConnector=class ButtplugEmbeddedServerConnector extends o.EventEmitter{constructor(){super(...arguments),this._connected=!1,this._server=null,this.Connect=(()=>(this._connected=!0,null===this._server&&(this._server=new a.ButtplugServer),this._server.addListener("message",this.OnMessageReceived),Promise.resolve())),this.Disconnect=(()=>{this._connected&&(this._server.Shutdown(),this._connected=!1,this._server=null,this.emit("disconnect"))}),this.Send=(e=>s(this,void 0,void 0,function*(){return this._connected?yield this._server.SendMessage(e):Promise.reject(new i.ButtplugClientConnectorException("Client not connected."))})),this.OnMessageReceived=(e=>{this.emit("message",[e])})}set Server(e){this._server=e}get Server(){return this._server}get Connected(){return this._connected}}},"./src/client/ButtplugMessageSorter.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r("./src/core/Messages.ts"),o=r("./src/core/Exceptions.ts");t.ButtplugMessageSorter=class ButtplugMessageSorter{constructor(){this._counter=1,this._waitingMsgs=new Map}PrepareOutgoingMessage(e){let t,r;e.Id=this._counter;const s=new Promise((e,s)=>{t=e,r=s});return this._waitingMsgs.set(this._counter,[t,r]),this._counter+=1,s}ParseIncomingMessages(e){const t=[];for(const r of e)if(r.Id!==s.SYSTEM_MESSAGE_ID&&this._waitingMsgs.has(r.Id)){const[e,t]=this._waitingMsgs.get(r.Id);if(r.Type===s.Error){t(o.ButtplugException.FromError(r));continue}e(r)}else t.push(r);return t}}},"./src/client/Client.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(s.next(e))}catch(e){a(e)}}function rejected(e){try{step(s.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r("./src/core/Logging.ts"),a=r("./node_modules/events/events.js"),i=r("./src/client/ButtplugClientDevice.ts"),n=r("./src/client/ButtplugBrowserWebsocketConnector.ts"),c=r("./src/client/ButtplugEmbeddedServerConnector.ts"),u=r("./src/core/Messages.ts"),l=r("./src/core/MessageUtils.ts"),d=r("./src/core/Exceptions.ts"),h=r("./src/client/ButtplugClientConnectorException.ts");t.ButtplugClient=class ButtplugClient extends a.EventEmitter{constructor(e="Generic Buttplug Client"){super(),this._pingTimer=null,this._connector=null,this._devices=new Map,this._logger=o.ButtplugLogger.Logger,this._isScanning=!1,this._messageVersion=1,this.ConnectWebsocket=(e=>s(this,void 0,void 0,function*(){this._logger.Info(`ButtplugClient: Connecting to ${e}`),yield this.Connect(new n.ButtplugBrowserWebsocketConnector(e))})),this.ConnectLocal=(()=>s(this,void 0,void 0,function*(){this._logger.Info("ButtplugClient: Connecting to In-Browser Server"),yield this.Connect(new c.ButtplugEmbeddedServerConnector)})),this.Connect=(e=>s(this,void 0,void 0,function*(){this._logger.Info(`ButtplugClient: Connecting using ${e.constructor.name}`),yield e.Connect(),this._connector=e,this._connector.addListener("message",this.ParseMessages),this._connector.addListener("disconnect",this.DisconnectHandler),yield this.InitializeConnection()})),this.Disconnect=(()=>s(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: Disconnect called"),this.CheckConnector(),yield this.ShutdownConnection(),this._connector.Disconnect()})),this.StartScanning=(()=>s(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StartScanning called"),this._isScanning=!0,yield this.SendMsgExpectOk(new u.StartScanning)})),this.StopScanning=(()=>s(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StopScanning called"),this._isScanning=!1,yield this.SendMsgExpectOk(new u.StopScanning)})),this.RequestLog=(e=>s(this,void 0,void 0,function*(){this._logger.Debug(`ButtplugClient: RequestLog called with level ${e}`),yield this.SendMsgExpectOk(new u.RequestLog(e))})),this.StopAllDevices=(()=>s(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StopAllDevices"),yield this.SendMsgExpectOk(new u.StopAllDevices)})),this.ParseMessages=(e=>{this.ParseMessagesInternal(e)}),this.DisconnectHandler=(()=>{this._logger.Info("ButtplugClient: Disconnect event receieved."),this.emit("disconnect")}),this.InitializeConnection=(()=>s(this,void 0,void 0,function*(){this.CheckConnector();const e=yield this.SendMessage(new u.RequestServerInfo(this._clientName,1));switch(e.constructor){case u.ServerInfo:{const t=e;this._logger.Info(`ButtplugClient: Connected to Server ${t.ServerName}`);const r=t.MaxPingTime;if(t.MessageVersion<this._messageVersion)throw this._connector.Disconnect(),d.ButtplugException.LogAndError(d.ButtplugInitException,this._logger,"Server protocol version is older than client protocol version. Please update server.");return r>0&&(this._pingTimer=setInterval(()=>s(this,void 0,void 0,function*(){this.Connected?this.SendMessage(new u.Ping):yield this.ShutdownConnection()}),Math.round(r/2))),yield this.RequestDeviceList(),!0}case u.Error:{this._connector.Disconnect();const t=e;throw d.ButtplugException.LogAndError(d.ButtplugInitException,this._logger,`Cannot connect to server. ${t.ErrorMessage}`)}}return!1})),this.RequestDeviceList=(()=>s(this,void 0,void 0,function*(){this.CheckConnector(),this._logger.Debug("ButtplugClient: ReceiveDeviceList called"),(yield this.SendMessage(new u.RequestDeviceList)).Devices.forEach(e=>{if(this._devices.has(e.DeviceIndex))this._logger.Debug(`ButtplugClient: Device already added: ${e}`);else{const t=i.ButtplugClientDevice.fromMsg(e,this.SendDeviceMessageClosure);this._logger.Debug(`ButtplugClient: Adding Device: ${t}`),this._devices.set(e.DeviceIndex,t),this.emit("deviceadded",t)}})})),this.ShutdownConnection=(()=>s(this,void 0,void 0,function*(){yield this.StopAllDevices(),null!==this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=null)})),this.SendMsgExpectOk=(e=>s(this,void 0,void 0,function*(){const t=yield this.SendMessage(e);switch(t.constructor){case u.Ok:return;case u.Error:throw d.ButtplugException.FromError(t);default:throw d.ButtplugException.LogAndError(d.ButtplugMessageException,this._logger,`Message type ${t.constructor} not handled bySendMsgExpectOk`)}})),this.SendDeviceMessageClosure=((e,t)=>s(this,void 0,void 0,function*(){this.SendDeviceMessage(e,t)})),this._clientName=e,this._logger.Debug(`ButtplugClient: Client ${e} created.`)}get Connector(){return this._connector}get Connected(){return null!==this._connector&&this._connector.Connected}get Devices(){this.CheckConnector();const e=[];return this._devices.forEach((t,r)=>{e.push(t)}),e}get IsScanning(){return this._isScanning}SendDeviceMessage(e,t){return s(this,void 0,void 0,function*(){this.CheckConnector();const r=this._devices.get(e.Index);if(void 0===r)throw d.ButtplugException.LogAndError(d.ButtplugDeviceException,this._logger,`Device ${e.Index} not available.`);if(-1===r.AllowedMessages.indexOf(t.Type.name))throw d.ButtplugException.LogAndError(d.ButtplugDeviceException,this._logger,`Device ${e.Name} does not accept message type ${t.Type}.`);t.DeviceIndex=e.Index,yield this.SendMsgExpectOk(t)})}ParseMessagesInternal(e){for(const t of e)switch(t.constructor){case u.Log:this.emit("log",t);break;case u.DeviceAdded:const e=t,r=i.ButtplugClientDevice.fromMsg(e,this.SendDeviceMessageClosure);this._devices.set(e.DeviceIndex,r),this.emit("deviceadded",r);break;case u.DeviceRemoved:const s=t;if(this._devices.has(s.DeviceIndex)){const e=this._devices.get(s.DeviceIndex);this._devices.delete(s.DeviceIndex),this.emit("deviceremoved",e)}break;case u.ScanningFinished:this._isScanning=!1,this.emit("scanningfinished",t)}}SendMessage(e){return s(this,void 0,void 0,function*(){return this.CheckConnector(),l.CheckMessage(e),yield this._connector.Send(e)})}CheckConnector(){if(!this.Connected)throw new h.ButtplugClientConnectorException("ButtplugClient not connected")}}},"./src/client/IButtplugConnector.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/core/Exceptions.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r("./src/core/Messages.ts");class ButtplugException extends Error{constructor(e,t,r=s.SYSTEM_MESSAGE_ID,o){super(e),this.errorClass=s.ErrorClass.ERROR_UNKNOWN,this.errorClass=t,this.innerError=o,this.messageId=r}get ErrorClass(){return this.errorClass}get InnerException(){return this.innerError}get Id(){return this.messageId}static LogAndError(e,t,r,o=s.SYSTEM_MESSAGE_ID){return t.Error(r),new e(r,o)}static FromError(e){switch(e.ErrorCode){case s.ErrorClass.ERROR_DEVICE:return new ButtplugDeviceException(e.ErrorMessage,e.Id);case s.ErrorClass.ERROR_INIT:return new ButtplugInitException(e.ErrorMessage,e.Id);case s.ErrorClass.ERROR_UNKNOWN:return new ButtplugUnknownException(e.ErrorMessage,e.Id);case s.ErrorClass.ERROR_PING:return new ButtplugPingException(e.ErrorMessage,e.Id);case s.ErrorClass.ERROR_MSG:return new ButtplugMessageException(e.ErrorMessage,e.Id);default:throw new Error(`Message type ${e.ErrorCode} not handled`)}}}t.ButtplugException=ButtplugException;class ButtplugInitException extends ButtplugException{constructor(e,t=s.SYSTEM_MESSAGE_ID){super(e,s.ErrorClass.ERROR_INIT,t)}}t.ButtplugInitException=ButtplugInitException;class ButtplugDeviceException extends ButtplugException{constructor(e,t=s.SYSTEM_MESSAGE_ID){super(e,s.ErrorClass.ERROR_DEVICE,t)}}t.ButtplugDeviceException=ButtplugDeviceException;class ButtplugMessageException extends ButtplugException{constructor(e,t=s.SYSTEM_MESSAGE_ID){super(e,s.ErrorClass.ERROR_MSG,t)}}t.ButtplugMessageException=ButtplugMessageException;class ButtplugPingException extends ButtplugException{constructor(e,t=s.SYSTEM_MESSAGE_ID){super(e,s.ErrorClass.ERROR_PING,t)}}t.ButtplugPingException=ButtplugPingException;class ButtplugUnknownException extends ButtplugException{constructor(e,t=s.SYSTEM_MESSAGE_ID){super(e,s.ErrorClass.ERROR_UNKNOWN,t)}}t.ButtplugUnknownException=ButtplugUnknownException},"./src/core/Logging.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r("./node_modules/events/events.js");var o;!function(e){e[e.Off=0]="Off",e[e.Fatal=1]="Fatal",e[e.Error=2]="Error",e[e.Warn=3]="Warn",e[e.Info=4]="Info",e[e.Debug=5]="Debug",e[e.Trace=6]="Trace"}(o=t.ButtplugLogLevel||(t.ButtplugLogLevel={}));class LogMessage{constructor(e,t){const r=new Date,s=r.getHours(),o=r.getMinutes(),a=r.getSeconds();this.timestamp=`${s}:${o}:${a}`,this.logMessage=e,this.logLevel=t}get Message(){return this.logMessage}get LogLevel(){return this.logLevel}get Timestamp(){return this.timestamp}get FormattedMessage(){return`${o[this.logLevel]} : ${this.timestamp} : ${this.logMessage}`}}t.LogMessage=LogMessage;class ButtplugLogger extends s.EventEmitter{constructor(){super(),this.maximumConsoleLogLevel=o.Off,this.maximumEventLogLevel=o.Off}static get Logger(){return void 0===ButtplugLogger.sLogger&&(ButtplugLogger.sLogger=new ButtplugLogger),this.sLogger}get MaximumConsoleLogLevel(){return this.maximumConsoleLogLevel}set MaximumConsoleLogLevel(e){this.maximumConsoleLogLevel=e}get MaximumEventLogLevel(){return this.maximumEventLogLevel}set MaximumEventLogLevel(e){this.maximumEventLogLevel=e}Fatal(e){this.AddLogMessage(e,o.Fatal)}Error(e){this.AddLogMessage(e,o.Error)}Warn(e){this.AddLogMessage(e,o.Warn)}Info(e){this.AddLogMessage(e,o.Info)}Debug(e){this.AddLogMessage(e,o.Debug)}Trace(e){this.AddLogMessage(e,o.Trace)}AddLogMessage(e,t){if(t>this.maximumEventLogLevel&&t>this.maximumConsoleLogLevel)return;const r=new LogMessage(e,t);t<=this.maximumConsoleLogLevel&&console.log(r.FormattedMessage),t<=this.maximumEventLogLevel&&this.emit("log",r)}}ButtplugLogger.sLogger=void 0,t.ButtplugLogger=ButtplugLogger},"./src/core/MessageUtils.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r("./node_modules/class-transformer/index.js"),o=r("./node_modules/ajv/lib/ajv.js"),a=r("./src/core/Messages.ts"),i=r("./src/core/Exceptions.ts"),n=r("./dependencies/buttplug-schema/schema/buttplug-schema.json"),c=new o;c.addMetaSchema(r("./node_modules/ajv/lib/refs/json-schema-draft-06.json"));const u=c.compile(n);t.CheckMessage=function CheckMessage(e){if(u([e.toProtocolFormat()]))return;const t=u.errors.map(e=>e.message).join("; ");throw new i.ButtplugMessageException(t)},t.FromJSON=function FromJSON(e){const t=JSON.parse(e);if(!u(t)){const e=u.errors.map(e=>e.message).join("; ");throw new i.ButtplugMessageException(e)}const r=[];for(const e of Array.from(t)){const t=s.plainToClass(a[Object.getOwnPropertyNames(e)[0]],e[Object.getOwnPropertyNames(e)[0]]);r.push(t)}return r},t.GetSchemaVersion=function GetSchemaVersion(){return parseInt(n.version,10)}},"./src/core/Messages.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r("./node_modules/class-transformer/index.js"),o=r("./src/core/Exceptions.ts");r("./node_modules/reflect-metadata/Reflect.js"),t.SYSTEM_MESSAGE_ID=0,t.DEFAULT_MESSAGE_ID=1,t.MAX_ID=4294967295;class ButtplugMessage{constructor(e){this.Id=e}DowngradeMessage(){throw new o.ButtplugMessageException("Message version downgrade required, but not defined for this message type.",this.Id)}get Type(){return this.constructor}getType(){return this.Type}toJSON(){return JSON.stringify(this.toProtocolFormat())}toProtocolFormat(){const e={};return e[this.Type.name]=s.classToPlain(this),e}}t.ButtplugMessage=ButtplugMessage;class ButtplugDeviceMessage extends ButtplugMessage{constructor(e,t){super(t),this.DeviceIndex=e,this.Id=t}}t.ButtplugDeviceMessage=ButtplugDeviceMessage;class ButtplugSystemMessage extends ButtplugMessage{constructor(e=t.SYSTEM_MESSAGE_ID){super(e),this.Id=e}}t.ButtplugSystemMessage=ButtplugSystemMessage;t.Ok=class Ok extends ButtplugSystemMessage{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}};t.Ping=class Ping extends ButtplugMessage{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}};var a;t.Test=class Test extends ButtplugMessage{constructor(e,r=t.DEFAULT_MESSAGE_ID){super(r),this.TestString=e,this.Id=r}get SchemaVersion(){return 0}},function(e){e[e.ERROR_UNKNOWN=0]="ERROR_UNKNOWN",e[e.ERROR_INIT=1]="ERROR_INIT",e[e.ERROR_PING=2]="ERROR_PING",e[e.ERROR_MSG=3]="ERROR_MSG",e[e.ERROR_DEVICE=4]="ERROR_DEVICE"}(a=t.ErrorClass||(t.ErrorClass={}));t.Error=class Error extends ButtplugSystemMessage{constructor(e,r=a.ERROR_UNKNOWN,s=t.DEFAULT_MESSAGE_ID){super(s),this.ErrorMessage=e,this.ErrorCode=r,this.Id=s}get SchemaVersion(){return 0}};class DeviceInfo{constructor(e,t,r){this.DeviceIndex=e,this.DeviceName=t,this.DeviceMessages=r}}t.DeviceInfo=DeviceInfo;class DeviceListVersion0 extends ButtplugSystemMessage{constructor(e,t){super(),this.Devices=e,this.Id=t}get Type(){return DeviceList.constructor}get SchemaVersion(){return 0}}t.DeviceListVersion0=DeviceListVersion0;t.DeviceInfoWithSpecifications=class DeviceInfoWithSpecifications{constructor(e,t,r){this.DeviceIndex=e,this.DeviceName=t,this.DeviceMessages=r}};class DeviceList extends ButtplugSystemMessage{constructor(e,t){super(),this.Devices=e,this.Id=t}DowngradeMessage(){const e=[];for(const t of this.Devices)e.push(new DeviceInfo(t.DeviceIndex,t.DeviceName,Object.keys(t.DeviceMessages)));return new DeviceListVersion0(e,this.Id)}get SchemaVersion(){return 1}}t.DeviceList=DeviceList;class DeviceAddedVersion0 extends ButtplugSystemMessage{constructor(e,t,r){super(),this.DeviceIndex=e,this.DeviceName=t,this.DeviceMessages=r}get Type(){return DeviceAdded.constructor}get SchemaVersion(){return 0}}t.DeviceAddedVersion0=DeviceAddedVersion0;class DeviceAdded extends ButtplugSystemMessage{constructor(e,t,r){super(),this.DeviceIndex=e,this.DeviceName=t,this.DeviceMessages=r}get SchemaVersion(){return 1}DowngradeMessage(){return new DeviceAddedVersion0(this.DeviceIndex,this.DeviceName,Object.keys(this.DeviceMessages))}}t.DeviceAdded=DeviceAdded;t.DeviceRemoved=class DeviceRemoved extends ButtplugSystemMessage{constructor(e){super(),this.DeviceIndex=e}get SchemaVersion(){return 0}};t.RequestDeviceList=class RequestDeviceList extends ButtplugMessage{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}};t.StartScanning=class StartScanning extends ButtplugMessage{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}};t.StopScanning=class StopScanning extends ButtplugMessage{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}};t.ScanningFinished=class ScanningFinished extends ButtplugSystemMessage{constructor(){super()}get SchemaVersion(){return 0}};t.RequestLog=class RequestLog extends ButtplugMessage{constructor(e,r=t.DEFAULT_MESSAGE_ID){super(r),this.LogLevel=e,this.Id=r}get SchemaVersion(){return 0}};t.Log=class Log extends ButtplugSystemMessage{constructor(e,t){super(),this.LogLevel=e,this.LogMessage=t}get SchemaVersion(){return 0}};t.RequestServerInfo=class RequestServerInfo extends ButtplugMessage{constructor(e,r=0,s=t.DEFAULT_MESSAGE_ID){super(s),this.ClientName=e,this.MessageVersion=r,this.Id=s}get SchemaVersion(){return 1}};t.ServerInfo=class ServerInfo extends ButtplugSystemMessage{constructor(e,r,s,o,a,i,n=t.DEFAULT_MESSAGE_ID){super(),this.MajorVersion=e,this.MinorVersion=r,this.BuildVersion=s,this.MessageVersion=o,this.MaxPingTime=a,this.ServerName=i,this.Id=n}get SchemaVersion(){return 0}};t.FleshlightLaunchFW12Cmd=class FleshlightLaunchFW12Cmd extends ButtplugDeviceMessage{constructor(e,r,s=-1,o=t.DEFAULT_MESSAGE_ID){super(s,o),this.Speed=e,this.Position=r,this.DeviceIndex=s,this.Id=o}get SchemaVersion(){return 0}};t.KiirooCmd=class KiirooCmd extends ButtplugDeviceMessage{constructor(e=0,r=-1,s=t.DEFAULT_MESSAGE_ID){super(r,s),this.DeviceIndex=r,this.Id=s,this.Command="0",this.Command=String(e)}set Position(e){this.Command=e>=0&&e<=4?String(Math.round(e)):"0"}get Position(){const e=Number(this.Command)?Number(this.Command):0;return e<0||e>4?0:Math.round(e)}get SchemaVersion(){return 0}};t.SingleMotorVibrateCmd=class SingleMotorVibrateCmd extends ButtplugDeviceMessage{constructor(e,r=-1,s=t.DEFAULT_MESSAGE_ID){super(r,s),this.Speed=e,this.DeviceIndex=r,this.Id=s}get SchemaVersion(){return 0}};t.StopDeviceCmd=class StopDeviceCmd extends ButtplugDeviceMessage{constructor(e=-1,r=t.DEFAULT_MESSAGE_ID){super(e,r),this.DeviceIndex=e,this.Id=r}get SchemaVersion(){return 0}};t.StopAllDevices=class StopAllDevices extends ButtplugMessage{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}};t.LovenseCmd=class LovenseCmd extends ButtplugDeviceMessage{constructor(e,r=-1,s=t.DEFAULT_MESSAGE_ID){super(r,s),this.Command=e,this.DeviceIndex=r,this.Id=s}get SchemaVersion(){return 0}};t.VorzeA10CycloneCmd=class VorzeA10CycloneCmd extends ButtplugDeviceMessage{constructor(e,r,s=-1,o=t.DEFAULT_MESSAGE_ID){super(s,o),this.Speed=e,this.Clockwise=r,this.DeviceIndex=s,this.Id=o}get SchemaVersion(){return 0}};class GenericMessageSubcommand{constructor(e){this.Index=e}}t.GenericMessageSubcommand=GenericMessageSubcommand;class SpeedSubcommand extends GenericMessageSubcommand{constructor(e,t){super(e),this.Speed=t}}t.SpeedSubcommand=SpeedSubcommand;class VibrateCmd extends ButtplugDeviceMessage{constructor(e,r=-1,s=t.DEFAULT_MESSAGE_ID){super(r,s),this.Speeds=e,this.DeviceIndex=r,this.Id=s}get SchemaVersion(){return 1}static Create(e,r){const s=new Array;let o=0;for(const e of r)s.push(new SpeedSubcommand(o,e)),++o;return new VibrateCmd(s,e,t.DEFAULT_MESSAGE_ID)}}t.VibrateCmd=VibrateCmd;class RotateSubcommand extends GenericMessageSubcommand{constructor(e,t,r){super(e),this.Speed=t,this.Clockwise=r}static Create(e,t){const r=new Array;let s=0;for(const e of t)r.push(new SpeedSubcommand(s,e)),++s;return new VibrateCmd(r,e)}}t.RotateSubcommand=RotateSubcommand;class RotateCmd extends ButtplugDeviceMessage{constructor(e,r=-1,s=t.DEFAULT_MESSAGE_ID){super(r,s),this.Rotations=e,this.DeviceIndex=r,this.Id=s}get SchemaVersion(){return 1}static Create(e,t){const r=new Array;let s=0;for(const e of t)r.push(new RotateSubcommand(s,e[0],e[1])),++s;return new RotateCmd(r,e)}}t.RotateCmd=RotateCmd;class VectorSubcommand extends GenericMessageSubcommand{constructor(e,t,r){super(e),this.Position=t,this.Duration=r}}t.VectorSubcommand=VectorSubcommand;class LinearCmd extends ButtplugDeviceMessage{constructor(e,r=-1,s=t.DEFAULT_MESSAGE_ID){super(r,s),this.Vectors=e,this.DeviceIndex=r,this.Id=s}get SchemaVersion(){return 1}static Create(e,t){const r=new Array;let s=0;for(const e of t)r.push(new VectorSubcommand(s,e[0],e[1])),++s;return new LinearCmd(r,e)}}t.LinearCmd=LinearCmd;t.MessageAttributes=class MessageAttributes{constructor(e){this.FeatureCount=e}}},"./src/index.ts":function(e,t,r){"use strict";function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),__export(r("./src/client/Client.ts")),__export(r("./src/client/ButtplugClientDevice.ts")),__export(r("./src/client/IButtplugConnector.ts")),__export(r("./src/client/ButtplugEmbeddedServerConnector.ts")),__export(r("./src/core/Messages.ts")),__export(r("./src/core/MessageUtils.ts")),__export(r("./src/core/Logging.ts")),__export(r("./src/core/Exceptions.ts")),__export(r("./src/server/ButtplugServer.ts")),__export(r("./src/server/ButtplugDevice.ts")),__export(r("./src/server/IDeviceSubtypeManager.ts")),__export(r("./src/server/bluetooth/ButtplugBluetoothDevice.ts")),__export(r("./src/server/bluetooth/BluetoothDeviceInfo.ts")),__export(r("./src/server/bluetooth/BluetoothDevices.ts")),__export(r("./src/server/bluetooth/IBluetoothDeviceImpl.ts"))},"./src/server/ButtplugDevice.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(s.next(e))}catch(e){a(e)}}function rejected(e){try{step(s.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r("./node_modules/events/events.js"),a=r("./src/core/Exceptions.ts");t.ButtplugDevice=class ButtplugDevice extends o.EventEmitter{constructor(e,t){super(),this._name=e,this._id=t,this.MsgFuncs=new Map,this.ParseMessage=(e=>s(this,void 0,void 0,function*(){if(!this.MsgFuncs.has(e.Type))throw new a.ButtplugMessageException(`${this._name} cannot handle message of type ${e.Type}`,e.Id);return this.MsgFuncs.get(e.Type)(e)}))}get Name(){return this._name}get Id(){return this._id}get AllowedMessageTypes(){return Object.keys(this.MessageSpecifications)}}},"./src/server/ButtplugServer.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(s.next(e))}catch(e){a(e)}}function rejected(e){try{step(s.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r("./src/core/Messages.ts"),a=r("./src/core/MessageUtils.ts"),i=r("./src/server/DeviceManager.ts"),n=r("./node_modules/events/events.js"),c=r("./src/core/Logging.ts"),u=r("./src/core/Messages.ts"),l=r("./src/core/Exceptions.ts");t.ButtplugServer=class ButtplugServer extends n.EventEmitter{constructor(e="Buttplug JS Internal Server",t=0){super(),this._serverName=e,this._maxPingTime=t,this._clientSchemaVersion=-1,this._clientName=void 0,this._pingTimedOut=!1,this._receivedRequestServerInfo=!1,this._logger=c.ButtplugLogger.Logger,this._outgoingLogLevel=c.ButtplugLogLevel.Off,this._connected=!1,this.AddDeviceManager=(e=>{this._deviceManager.AddDeviceManager(e)}),this.ClearDeviceManagers=(()=>{this._deviceManager.ClearDeviceManagers()}),this.Disconnect=(()=>{this._connected=!1}),this.CheckConnection=(()=>{if(!this._connected)throw new Error("Server not connected to client.")}),this.SendMessage=(e=>s(this,void 0,void 0,function*(){e instanceof u.RequestServerInfo||this.CheckConnection();const t=e.Id;if(this._logger.Trace(`Server: Got Message: ${e}`),0===t)throw l.ButtplugException.LogAndError(l.ButtplugMessageException,this._logger,"Message Id 0 is reserved for outgoing system messages. Use another Id.",t);if(this._pingTimedOut)throw l.ButtplugException.LogAndError(l.ButtplugPingException,this._logger,"Ping timed out.",t);if(!this._receivedRequestServerInfo&&e.Type!==o.RequestServerInfo)throw l.ButtplugException.LogAndError(l.ButtplugInitException,this._logger,"RequestServerInfo must be first message received by server.",t);switch(e.Type){case o.RequestLog:const r=e;return this._logger.Debug(`Server: RequestLog received for level ${r.LogLevel}`),r.LogLevel===c.ButtplugLogLevel[c.ButtplugLogLevel.Off]?this._logger.removeListener("log",this.OnLogMessage):this._outgoingLogLevel===c.ButtplugLogLevel.Off&&this._logger.addListener("log",this.OnLogMessage),this._logger.MaximumEventLogLevel=c.ButtplugLogLevel[r.LogLevel],this._outgoingLogLevel=c.ButtplugLogLevel[r.LogLevel],new o.Ok(r.Id);case o.Ping:return new o.Ok(e.Id);case o.RequestServerInfo:this._logger.Debug("Server: RequestServerInfo received.");const s=e;if(this._clientSchemaVersion>1)throw l.ButtplugException.LogAndError(l.ButtplugInitException,this._logger,`Client schema (${this._clientSchemaVersion}) newer than `+"server schema (1). Please upgrade server.",t);return this._receivedRequestServerInfo=!0,this._clientSchemaVersion=s.MessageVersion,this._clientName=s.ClientName,this._connected=!0,new o.ServerInfo(0,0,0,a.GetSchemaVersion(),this._maxPingTime,this._serverName,t);case o.Test:this._logger.Debug("Server: Test received.");const i=e;return new o.Test(i.TestString,e.Id)}return this._deviceManager.SendMessage(e)})),this.Shutdown=(()=>s(this,void 0,void 0,function*(){this.Disconnect(),yield this._deviceManager.Shutdown()})),this.OnLogMessage=(e=>{e.LogLevel>this._outgoingLogLevel||this.SendOutgoingMessage(new o.Log(c.ButtplugLogLevel[e.LogLevel],e.Message))}),this.SendOutgoingMessage=(e=>{if(this._connected){if(-1===this._clientSchemaVersion)throw l.ButtplugException.LogAndError(l.ButtplugMessageException,this._logger,"Cannot discern client schema version. Was RequestServerInfo message sent?");for(;e.SchemaVersion!==this._clientSchemaVersion&&e.SchemaVersion>0;)e=e.DowngradeMessage();this.emit("message",e)}}),this._logger.Info(`Server: Starting Buttplug Server: ${this._serverName}`),this._deviceManager=new i.DeviceManager(e=>this.SendOutgoingMessage(e))}get DeviceManagers(){return this._deviceManager.DeviceManagers}}},"./src/server/DeviceManager.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(s.next(e))}catch(e){a(e)}}function rejected(e){try{step(s.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r("./src/core/Messages.ts"),a=r("./src/server/bluetooth/WebBluetoothDeviceManager.ts"),i=r("./node_modules/events/events.js"),n=r("./src/core/Logging.ts"),c=r("./src/core/Exceptions.ts");t.DeviceManager=class DeviceManager extends i.EventEmitter{constructor(e){super(),this._subtypeManagers=[],this._devices=new Map,this._deviceCounter=0,this._logger=n.ButtplugLogger.Logger,this.Shutdown=(()=>s(this,void 0,void 0,function*(){for(const e of this._devices.values())yield e.Disconnect()})),this.ClearDeviceManagers=(()=>{this._logger.Info("DeviceManager: Clearing device subtype managers"),this._subtypeManagers=[]}),this.AddDeviceManager=(e=>{this._logger.Info(`DeviceManager: Adding Device Manager ${e.constructor.name}`),e.SetLogger(this._logger),this._subtypeManagers.push(e),e.addListener("deviceadded",this.OnDeviceAdded),e.addListener("deviceremoved",this.OnDeviceRemoved),e.addListener("scanningfinished",this.OnScanningFinished)}),this.SendMessage=(e=>s(this,void 0,void 0,function*(){const t=e.Id;switch(e.Type){case o.StartScanning:if(this._logger.Debug("DeviceManager: Starting scan"),0===this._subtypeManagers.length)throw c.ButtplugException.LogAndError(c.ButtplugDeviceException,this._logger,"No device managers available, cannot scan.",t);for(const e of this._subtypeManagers)if(!e.IsScanning)try{yield e.StartScanning()}catch(e){for(const e of this._subtypeManagers)e.IsScanning&&e.StopScanning();throw e}return new o.Ok(t);case o.StopScanning:this._logger.Debug("DeviceManager: Stopping scan");for(const e of this._subtypeManagers)e.IsScanning&&e.StopScanning();return new o.Ok(t);case o.StopAllDevices:return this._logger.Debug("DeviceManager: Stopping all devices"),this._devices.forEach((e,t)=>{e.ParseMessage(new o.StopDeviceCmd)}),new o.Ok(t);case o.RequestDeviceList:this._logger.Debug("DeviceManager: Sending device list");const r=[];return this._devices.forEach((e,t)=>{r.push(new o.DeviceInfoWithSpecifications(t,e.Name,e.MessageSpecifications))}),new o.DeviceList(r,t)}const r=e;if(void 0===r.DeviceIndex)throw c.ButtplugException.LogAndError(c.ButtplugMessageException,this._logger,`Message Type ${e.Type} unhandled by this server.`,t);if(!this._devices.has(r.DeviceIndex))throw c.ButtplugException.LogAndError(c.ButtplugDeviceException,this._logger,`Device Index ${r.DeviceIndex} does not exist`,t);const s=this._devices.get(r.DeviceIndex);if(s.AllowedMessageTypes.indexOf(e.Type.name)<0)throw c.ButtplugException.LogAndError(c.ButtplugDeviceException,this._logger,`Device ${s.Name} does not take message type ${e.Type}`,t);return this._logger.Trace(`DeviceManager: Sending ${r.Type} to ${s.Name} (${r.Id})`),yield s.ParseMessage(r)})),this.OnDeviceAdded=(e=>{for(const t of this._devices.values())if(t.Id===e.Id)return void this._logger.Info(`DeviceManager: Device ${e.Name} (id: ${e.Id}) already added, ignoring.`);const t=this._deviceCounter;this._deviceCounter+=1,this._devices.set(t,e),this._logger.Info(`DeviceManager: Device Added: ${e.Name} (${t})`),e.addListener("deviceremoved",this.OnDeviceRemoved),this._msgClosure(new o.DeviceAdded(t,e.Name,e.MessageSpecifications))}),this.OnDeviceRemoved=(e=>{let t=null;for(const r of Array.from(this._devices.entries()))if(r[1]===e){t=r[0];break}null!==t&&(e.removeAllListeners("deviceremoved"),this._devices.delete(t),this._logger.Info(`DeviceManager: Device Removed: ${e.Name} (${t})`),this._msgClosure(new o.DeviceRemoved(t)))}),this.OnScanningFinished=(()=>{this._logger.Debug("DeviceManager: Scanning Finished.");for(const e of this._subtypeManagers)if(e.IsScanning)return;this._msgClosure(new o.ScanningFinished)}),this._logger.Debug("DeviceManager: Starting Device Manager"),"undefined"!=typeof window&&void 0!==window.navigator&&navigator.bluetooth?this.AddDeviceManager(new a.WebBluetoothDeviceManager(this._logger)):this._logger.Info("DeviceManager: Not adding WebBluetooth Manager, no WebBluetooth capabilities found."),this._msgClosure=e}get DeviceManagers(){return this._subtypeManagers}}},"./src/server/IDeviceSubtypeManager.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/server/bluetooth/BluetoothDeviceInfo.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BluetoothDeviceInfo=class BluetoothDeviceInfo{constructor(e,t,r,s,o){this._names=e,this._namePrefixes=t,this._services=r,this._characteristics=s,this._createFunc=o}get Names(){return this._names}get NamePrefixes(){return this._namePrefixes}get Services(){return this._services}get Characteristics(){return this._characteristics}get Create(){return this._createFunc}}},"./src/server/bluetooth/BluetoothDevices.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r("./src/server/bluetooth/devices/FleshlightLaunch.ts"),o=r("./src/server/bluetooth/devices/Lovense.ts"),a=r("./src/server/bluetooth/devices/VorzeA10Cyclone.ts"),i=r("./src/server/bluetooth/devices/WeVibe.ts"),n=r("./src/server/bluetooth/devices/Maxpro.ts");t.BluetoothDevices=class BluetoothDevices{static GetDeviceInfo(){return[s.FleshlightLaunch.DeviceInfo,o.Lovense.DeviceInfo,n.Maxpro.DeviceInfo,a.VorzeA10Cyclone.DeviceInfo,i.WeVibe.DeviceInfo]}}},"./src/server/bluetooth/ButtplugBluetoothDevice.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r("./src/server/ButtplugDevice.ts");t.ButtplugBluetoothDevice=class ButtplugBluetoothDevice extends s.ButtplugDevice{constructor(e,t){super(e,t.Id),this._deviceImpl=t}Disconnect(){this._deviceImpl.Disconnect()}OnDisconnect(){this.emit("deviceremoved",this)}}},"./src/server/bluetooth/IBluetoothDeviceImpl.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/server/bluetooth/WebBluetoothDevice.ts":function(e,t,r){"use strict";(function(e){var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(s.next(e))}catch(e){a(e)}}function rejected(e){try{step(s.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r("./src/core/Logging.ts"),a=r("./src/core/Exceptions.ts"),i=r("./node_modules/events/events.js"),n=r("./node_modules/string_decoder/lib/string_decoder.js");class WebBluetoothDevice extends i.EventEmitter{constructor(t,r){super(),this._deviceInfo=t,this._device=r,this._notificationHandlers=new Map,this._logger=o.ButtplugLogger.Logger,this._decoder=new n.StringDecoder("utf-8"),this._characteristics=new Map,this.Connect=(()=>s(this,void 0,void 0,function*(){this._logger.Debug(`WebBluetoothDevice: ${this.constructor.name} connecting`),this._device.addEventListener("gattserverdisconnected",this.OnDisconnect),this._server=yield this._device.gatt.connect();const e=yield this._server.getPrimaryServices();if(0===e.length)throw a.ButtplugException.LogAndError(a.ButtplugDeviceException,this._logger,`Cannot find gatt service to connect to on device ${this._device.name}`);this._service=e[0];for(const e of Object.getOwnPropertyNames(this._deviceInfo.Characteristics))this._characteristics.set(e,yield this._service.getCharacteristic(this._deviceInfo.Characteristics[e]));if(0===this._characteristics.size){const e=yield this._service.getCharacteristics();for(const t of e)t.properties.write||t.properties.writeWithoutResponse||t.properties.reliableWrite?this._characteristics.set("tx",t):(t.properties.read||t.properties.broadcast||t.properties.notify||t.properties.indicate)&&this._characteristics.set("rx",t)}})),this.Disconnect=(()=>s(this,void 0,void 0,function*(){for(const e of this._notificationHandlers.keys())this.Unsubscribe(e);this._server.disconnect()})),this.OnDisconnect=(()=>{this._logger.Debug(`WebBluetoothDevice: ${this.constructor.name} disconnecting`),this._device.removeEventListener("gattserverdisconnected",this.OnDisconnect),this.emit("deviceremoved")}),this.WriteString=((t,r)=>s(this,void 0,void 0,function*(){return yield this.WriteValue(t,e.from(r))})),this.WriteValue=((e,t)=>s(this,void 0,void 0,function*(){if(!this._characteristics.has(e))throw a.ButtplugException.LogAndError(a.ButtplugDeviceException,this._logger,"Tried to access wrong characteristic!");const r=this._characteristics.get(e);this._logger.Trace(`WebBluetoothDevice: ${this.constructor.name} writing ${t} to ${r.uuid}`),yield r.writeValue(t)})),this.ReadString=(t=>s(this,void 0,void 0,function*(){const r=yield this.ReadValue(t);return this._decoder.end(e.from(r))})),this.ReadValue=(e=>s(this,void 0,void 0,function*(){if(!this._characteristics.has(e))throw a.ButtplugException.LogAndError(a.ButtplugDeviceException,this._logger,"Tried to access wrong characteristic!");const t=this._characteristics.get(e);return this._logger.Trace(`WebBluetoothDevice: ${this.constructor.name} reading from ${t.uuid}`),yield t.readValue()})),this.Subscribe=(e=>s(this,void 0,void 0,function*(){if(!this._characteristics.has(e))throw a.ButtplugException.LogAndError(a.ButtplugDeviceException,this._logger,"Tried to access wrong characteristic!");if(this._notificationHandlers.has(e))throw a.ButtplugException.LogAndError(a.ButtplugDeviceException,this._logger,"Already listening on this characteristic!");const t=this._characteristics.get(e);this._logger.Trace(`WebBluetoothDevice: ${this.constructor.name} subscribing to updates from ${t.uuid}`),yield t.startNotifications(),this._notificationHandlers.set(e,t=>{this.CharacteristicValueChanged(t,e)}),t.addEventListener("characteristicvaluechanged",this._notificationHandlers.get(e))})),this.Unsubscribe=(e=>s(this,void 0,void 0,function*(){if(!this._characteristics.has(e))throw a.ButtplugException.LogAndError(a.ButtplugDeviceException,this._logger,"Tried to access wrong characteristic!");if(!this._notificationHandlers.has(e))throw a.ButtplugException.LogAndError(a.ButtplugDeviceException,this._logger,"Not listening on this characteristic!");const t=this._characteristics.get(e);this._logger.Trace(`WebBluetoothDevice: ${this.constructor.name} unsubscribing to updates from ${t.uuid}`),t.removeEventListener("characteristicvaluechanged",this._notificationHandlers.get(e)),this._notificationHandlers.delete(e),yield t.stopNotifications()})),this.CharacteristicValueChanged=((t,r)=>{const s=t.target.value;this.emit("characteristicvaluechanged",r,e.from(s.buffer))})}static CreateDevice(e,t){return s(this,void 0,void 0,function*(){const r=new WebBluetoothDevice(e,t);yield r.Connect();const s=yield e.Create(r);return r.addListener("deviceremoved",()=>{s.OnDisconnect()}),o.ButtplugLogger.Logger.Debug(`WebBluetoothDevice: Creating ${s.constructor.name}`),s})}get Name(){return this._device.name}get Id(){return this._device.id}}t.WebBluetoothDevice=WebBluetoothDevice}).call(this,r("./node_modules/buffer/index.js").Buffer)},"./src/server/bluetooth/WebBluetoothDeviceManager.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(s.next(e))}catch(e){a(e)}}function rejected(e){try{step(s.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r("./src/core/Logging.ts"),a=r("./src/core/Exceptions.ts"),i=r("./src/server/bluetooth/BluetoothDevices.ts"),n=r("./node_modules/events/events.js"),c=r("./src/server/bluetooth/WebBluetoothDevice.ts");t.WebBluetoothDeviceManager=class WebBluetoothDeviceManager extends n.EventEmitter{constructor(e){super(),this.OpenDevice=(e=>s(this,void 0,void 0,function*(){if(void 0===e)return;const t=i.BluetoothDevices.GetDeviceInfo();let r=null;for(const s of t){if(s.Names.indexOf(e.name)>=0){r=s;break}for(const t of s.NamePrefixes)if(-1!==e.name.indexOf(t)){r=s;break}}if(null===r)return;const s=yield c.WebBluetoothDevice.CreateDevice(r,e);this.emit("deviceadded",s)})),this.SetLogger(void 0!==e?e:o.ButtplugLogger.Logger)}SetLogger(e){this._logger=e}StartScanning(){return s(this,void 0,void 0,function*(){const e=i.BluetoothDevices.GetDeviceInfo(),t={filters:new Array,optionalServices:new Array};for(const r of e){for(const e of r.Names)t.filters.push({name:e});for(const e of r.NamePrefixes)t.filters.push({namePrefix:e});t.optionalServices=[...t.optionalServices,...r.Services]}let r;this._logger.Trace("Bluetooth filter set: "+t);try{r=yield navigator.bluetooth.requestDevice(t)}catch(e){if(this.emit("scanningfinished"),-1!==e.message.indexOf("User cancelled"))return;throw a.ButtplugException.LogAndError(a.ButtplugDeviceException,this._logger,"Bluetooth scanning interrupted. Either user cancelled out of dialog, or bluetooth radio is not available. Exception: "+e)}try{yield this.OpenDevice(r)}catch(e){throw this.emit("scanningfinished"),a.ButtplugException.LogAndError(a.ButtplugDeviceException,this._logger,`Cannot open device ${r.name}: ${e}`)}this.emit("scanningfinished")})}StopScanning(){}get IsScanning(){return!1}}},"./src/server/bluetooth/devices/FleshlightLaunch.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(s.next(e))}catch(e){a(e)}}function rejected(e){try{step(s.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r("./src/server/bluetooth/BluetoothDeviceInfo.ts"),a=r("./src/server/bluetooth/ButtplugBluetoothDevice.ts"),i=r("./src/core/Messages.ts"),n=r("./src/core/Exceptions.ts");class FleshlightLaunch extends a.ButtplugBluetoothDevice{constructor(e){super("Fleshlight Launch",e),this._lastPosition=0,this.Initialize=(()=>s(this,void 0,void 0,function*(){yield this._deviceImpl.WriteValue("cmd",new Uint8Array([0]))})),this.HandleStopDeviceCmd=(e=>s(this,void 0,void 0,function*(){return yield this.HandleFleshlightLaunchFW12Cmd(new i.FleshlightLaunchFW12Cmd(0,0,e.DeviceIndex,e.Id))})),this.HandleFleshlightLaunchFW12Cmd=(e=>s(this,void 0,void 0,function*(){return this._lastPosition=e.Position,yield this._deviceImpl.WriteValue("tx",new Uint8Array([e.Position,e.Speed])),new i.Ok(e.Id)})),this.HandleLinearCmd=(e=>s(this,void 0,void 0,function*(){if(1!==e.Vectors.length)throw new n.ButtplugDeviceException("LinearCmd requires 1 vector for this device.",e.Id);const t=e.Vectors[0],r=100*t.Position,s=Math.abs(r-this._lastPosition);let o=Math.floor(25e3*Math.pow(90*t.Duration/s,-1.05));o=Math.min(Math.max(o,0),95);const a=Math.floor(r/99*90+4.5);return yield this.HandleFleshlightLaunchFW12Cmd(new i.FleshlightLaunchFW12Cmd(o,a,e.DeviceIndex,e.Id))})),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.FleshlightLaunchFW12Cmd,this.HandleFleshlightLaunchFW12Cmd),this.MsgFuncs.set(i.LinearCmd,this.HandleLinearCmd)}static CreateInstance(e){return s(this,void 0,void 0,function*(){const t=new FleshlightLaunch(e);return yield t.Initialize(),t})}get MessageSpecifications(){return{FleshlightLaunchFW12Cmd:{},StopDeviceCmd:{},LinearCmd:{FeatureCount:1}}}}FleshlightLaunch.DeviceInfo=new o.BluetoothDeviceInfo(["Launch"],[],["88f80580-0000-01e6-aace-0002a5d5c51b"],{cmd:"88f80583-0000-01e6-aace-0002a5d5c51b",tx:"88f80581-0000-01e6-aace-0002a5d5c51b"},FleshlightLaunch.CreateInstance),t.FleshlightLaunch=FleshlightLaunch},"./src/server/bluetooth/devices/Lovense.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(s.next(e))}catch(e){a(e)}}function rejected(e){try{step(s.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r("./src/server/bluetooth/BluetoothDeviceInfo.ts"),a=r("./src/server/bluetooth/ButtplugBluetoothDevice.ts"),i=r("./src/core/Messages.ts"),n=r("./src/core/Messages.ts"),c=r("./src/core/Exceptions.ts");class Lovense extends a.ButtplugBluetoothDevice{constructor(e){super(`Lovense ${e.Name}`,e),this._initPromise=new Promise((e,t)=>{this._initResolve=e}),this._isClockwise=!1,this._specs={VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}},this.Initialize=(()=>s(this,void 0,void 0,function*(){this._deviceImpl.addListener("characteristicvaluechanged",this.OnValueChanged),yield this._deviceImpl.Subscribe("rx"),yield this._deviceImpl.WriteString("tx","DeviceType;"),yield this._initPromise})),this.OnValueChanged=((e,t)=>s(this,void 0,void 0,function*(){if(void 0!==this._initResolve){this.ParseDeviceType(t.toString());const e=this._initResolve;return this._initResolve=void 0,void e()}})),this.HandleStopDeviceCmd=(e=>s(this,void 0,void 0,function*(){return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id)),this._specs.hasOwnProperty("RotateCmd")&&this.HandleRotateCmd(new i.RotateCmd([new n.RotateSubcommand(0,0,this._isClockwise)],0,e.Id)),new i.Ok(e.Id)})),this.HandleSingleMotorVibrateCmd=(e=>s(this,void 0,void 0,function*(){const t=[];for(let r=0;r<this._specs.VibrateCmd.FeatureCount;r++)t.push(new i.SpeedSubcommand(r,e.Speed));return yield this.HandleVibrateCmd(new i.VibrateCmd(t,e.DeviceIndex,e.Id))})),this.HandleVibrateCmd=(e=>s(this,void 0,void 0,function*(){if(e.Speeds.length>this._specs.VibrateCmd.FeatureCount)throw new c.ButtplugDeviceException("Lovense devices require VibrateCmd to have at most "+`${this._specs.VibrateCmd.FeatureCount} speed commands, `+`${e.Speeds.length} sent.`,e.Id);for(const t of e.Speeds){const e=this._specs.VibrateCmd.FeatureCount>1?(t.Index+1).toString(10):"",r=Math.floor(20*t.Speed);yield this._deviceImpl.WriteString("tx",`Vibrate${e}:${r};`)}return new i.Ok(e.Id)})),this.HandleRotateCmd=(e=>s(this,void 0,void 0,function*(){if(1!==e.Rotations.length)throw new c.ButtplugDeviceException("Lovense devices require RotateCmd to have 1 rotate command, "+`${e.Rotations.length} sent.`,e.Id);const t=e.Rotations[0];if(0!==t.Index)throw new c.ButtplugDeviceException("Rotation command sent for invalid index.");t.Clockwise!==this._isClockwise&&(yield this._deviceImpl.WriteString("tx","RotateChange;"));const r=Math.floor(20*t.Speed);return yield this._deviceImpl.WriteString("tx",`Rotate:${r};`),new i.Ok(e.Id)}))}static CreateInstance(e){return s(this,void 0,void 0,function*(){const t=new Lovense(e);return yield t.Initialize(),t})}get MessageSpecifications(){return this._specs}ParseDeviceType(e){let t,r,s;[t,r,s]=e.split(":"),Lovense._deviceNames.hasOwnProperty(t)||(t="0"),this._name=`Lovense ${Lovense._deviceNames[t]} v${r}`,this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.VibrateCmd,this.HandleVibrateCmd),this.MsgFuncs.set(i.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),"P"===t?this._specs.VibrateCmd={FeatureCount:2}:"A"!==t&&"C"!==t||(this._specs.RotateCmd={FeatureCount:1},this.MsgFuncs.set(i.RotateCmd,this.HandleRotateCmd))}}Lovense.DeviceInfo=(()=>{const e=["0000fff0-0000-1000-8000-00805f9b34fb","6e400001-b5a3-f393-e0a9-e50e24dcca9e","4f300001-0023-4bd4-bbd5-a6920e4c5653"];for(let t=0;t<16;++t)e.push(`5${t.toString(16)}300001-0023-4bd4-bbd5-a6920e4c5653`),e.push(`5${t.toString(16)}300001-0024-4bd4-bbd5-a6920e4c5653`);return new o.BluetoothDeviceInfo([],["LVS"],e,{},Lovense.CreateInstance)})(),Lovense._deviceNames={A:"Nora",B:"Max",C:"Nora",L:"Ambi",O:"Osci",P:"Edge",S:"Lush",W:"Domi",Z:"Hush",0:"Unknown"},t.Lovense=Lovense},"./src/server/bluetooth/devices/Maxpro.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(s.next(e))}catch(e){a(e)}}function rejected(e){try{step(s.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r("./src/server/bluetooth/BluetoothDeviceInfo.ts"),a=r("./src/server/bluetooth/ButtplugBluetoothDevice.ts"),i=r("./src/core/Messages.ts"),n=r("./src/core/Exceptions.ts");class Maxpro extends a.ButtplugBluetoothDevice{constructor(e){super(`Maxpro ${e.Name}`,e),this.HandleVibrateCmd=(e=>s(this,void 0,void 0,function*(){if(1!==e.Speeds.length)throw new n.ButtplugDeviceException("Maxpro devices require VibrateCmd to have 1 speed command, "+`${e.Speeds.length} sent.`,e.Id);return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id))})),this.HandleStopDeviceCmd=(e=>s(this,void 0,void 0,function*(){return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=(e=>s(this,void 0,void 0,function*(){const t=Math.floor(100*e.Speed),r=new Uint8Array([85,4,7,255,255,63,t,95,t,0]),s=255&r.reduce((e,t)=>e+t);return r[9]=s,yield this._deviceImpl.WriteValue("tx",r),new i.Ok(e.Id)})),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(i.VibrateCmd,this.HandleVibrateCmd)}static CreateInstance(e){return s(this,void 0,void 0,function*(){return new Maxpro(e)})}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}Maxpro.DeviceInfo=new o.BluetoothDeviceInfo(["M2"],[],["6e400001-b5a3-f393-e0a9-e50e24dcca9e"],{},Maxpro.CreateInstance),t.Maxpro=Maxpro},"./src/server/bluetooth/devices/VorzeA10Cyclone.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(s.next(e))}catch(e){a(e)}}function rejected(e){try{step(s.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r("./src/server/bluetooth/BluetoothDeviceInfo.ts"),a=r("./src/server/bluetooth/ButtplugBluetoothDevice.ts"),i=r("./src/core/Messages.ts"),n=r("./src/core/Exceptions.ts");class VorzeA10Cyclone extends a.ButtplugBluetoothDevice{constructor(e){super("CycSA"===e.Name?"Vorze A10 Cyclone":"Vorze UFO SA",e),this.IsCyclone=!1,this.HandleRotateCmd=(e=>s(this,void 0,void 0,function*(){if(1!==e.Rotations.length)throw new n.ButtplugDeviceException("Vorze A10 Cyclone devices require RotateCmd to have 1 rotation command,"+` ${e.Rotations.length} sent.`,e.Id);return yield this.HandleVorzeA10CycloneCmd(new i.VorzeA10CycloneCmd(100*e.Rotations[0].Speed,e.Rotations[0].Clockwise,e.DeviceIndex,e.Id))})),this.HandleStopDeviceCmd=(e=>s(this,void 0,void 0,function*(){return yield this.HandleVorzeA10CycloneCmd(new i.VorzeA10CycloneCmd(0,!1,e.DeviceIndex,e.Id))})),this.HandleVorzeA10CycloneCmd=(e=>s(this,void 0,void 0,function*(){const t=255&((e.Clockwise?1:0)<<7|e.Speed);return yield this._deviceImpl.WriteValue("tx",new Uint8Array([this.IsCyclone?1:2,1,t])),new i.Ok(e.Id)})),this.IsCyclone="CycSA"===e.Name,this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.VorzeA10CycloneCmd,this.HandleVorzeA10CycloneCmd),this.MsgFuncs.set(i.RotateCmd,this.HandleRotateCmd)}static CreateInstance(e){return s(this,void 0,void 0,function*(){return new VorzeA10Cyclone(e)})}get MessageSpecifications(){return{RotateCmd:{FeatureCount:1},VorzeA10CycloneCmd:{},StopDeviceCmd:{}}}}VorzeA10Cyclone.DeviceInfo=new o.BluetoothDeviceInfo(["CycSA","UFOSA"],[],["40ee1111-63ec-4b7f-8ce7-712efd55b90e"],{},VorzeA10Cyclone.CreateInstance),t.VorzeA10Cyclone=VorzeA10Cyclone},"./src/server/bluetooth/devices/WeVibe.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(s.next(e))}catch(e){a(e)}}function rejected(e){try{step(s.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r("./src/server/bluetooth/BluetoothDeviceInfo.ts"),a=r("./src/server/bluetooth/ButtplugBluetoothDevice.ts"),i=r("./src/core/Messages.ts"),n=r("./src/core/Exceptions.ts");class WeVibe extends a.ButtplugBluetoothDevice{constructor(e){super(`WeVibe ${e.Name}`,e),this.HandleVibrateCmd=(e=>s(this,void 0,void 0,function*(){if(1!==e.Speeds.length)throw new n.ButtplugDeviceException("WeVibe devices require VibrateCmd to have 1 speed command, "+`${e.Speeds.length} sent.`,e.Id);return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id))})),this.HandleStopDeviceCmd=(e=>s(this,void 0,void 0,function*(){return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=(e=>s(this,void 0,void 0,function*(){const t=Math.floor(15*e.Speed),r=new Uint8Array([15,3,0,t<<4|t,0,3,0,0]);return yield this._deviceImpl.WriteValue("tx",r),new i.Ok(e.Id)})),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(i.VibrateCmd,this.HandleVibrateCmd)}static CreateInstance(e){return s(this,void 0,void 0,function*(){return new WeVibe(e)})}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}WeVibe.DeviceInfo=new o.BluetoothDeviceInfo(["4 Plus","Ditto","Nova","Wish","Pivot","Verge","Cougar","Sync"],[],["f000bb03-0451-4000-b000-000000000000"],{},WeVibe.CreateInstance),t.WeVibe=WeVibe}})});
//# sourceMappingURL=buttplug.min.js.map